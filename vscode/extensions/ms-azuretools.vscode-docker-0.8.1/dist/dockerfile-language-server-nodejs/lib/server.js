module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2458)}({10:function(e,t){e.exports=require("fs")},105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(179),i=n(813),s=n(361);t.JSONInstruction=class JSONInstruction extends s.ModifiableInstruction{constructor(e,t,n,s,o,c){super(e,t,n,s,o,c),this.jsonStrings=[];const u=this.getRawArgumentsContent();if(null===u)return;const l=this.getArguments();if(1===l.length&&"[]"===l[0].getValue()){let e=l[0].getRange();return this.openingBracket=new r.Argument("[",a.Range.create(e.start.line,e.start.character,e.start.line,e.start.character+1)),void(this.closingBracket=new r.Argument("]",a.Range.create(e.start.line,e.start.character+1,e.end.line,e.end.character)))}if(2===l.length&&"["===l[0].getValue()&&"]"===l[1].getValue())return this.openingBracket=l[0],void(this.closingBracket=l[1]);const g=e.offsetAt(this.getArgumentsRange().start);let d=-1,h="",m=!1,f="";e:for(let t=0;t<u.length;t++){let n=u.charAt(t);switch(n){case"[":if(""===h)this.openingBracket=new r.Argument("[",a.Range.create(e.positionAt(g+t),e.positionAt(g+t+1))),h="[";else{if(!m)break e;f+=n}break;case'"':if("["===h||","===h){d=t,m=!0,h='"',f+=n;continue}if('"'!==h)break e;if(!m)break e;f+=n,m=!1,this.jsonStrings.push(new i.JSONArgument(f,a.Range.create(e.positionAt(g+d),e.positionAt(g+t+1)),a.Range.create(e.positionAt(g+d+1),e.positionAt(g+t)))),f="";break;case",":if(m)f+=n;else{if('"'!==h)break e;h=","}break;case"]":if(m)f+=n;else if(""!==h){this.closingBracket=new r.Argument("]",a.Range.create(e.positionAt(g+t),e.positionAt(g+t+1)));break e}break;case" ":case"\t":break;case"\\":if(m)switch(u.charAt(t+1)){case'"':case"\\":f+=u.charAt(t+1),t++;continue;case" ":case"\t":t:for(let e=t+2;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break;case"\r":t++;default:t++;continue}else t:for(let e=t+1;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break e;default:if(!m)break e;f+=n}}}stopSearchingForFlags(e){return!0}getOpeningBracket(){return this.openingBracket}getJSONStrings(){return this.jsonStrings}getClosingBracket(){return this.closingBracket}}},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(180),i=n(827),s=n(371);t.JSONInstruction=class JSONInstruction extends s.ModifiableInstruction{constructor(e,t,n,s,o,c){super(e,t,n,s,o,c),this.openingBracket=null,this.closingBracket=null,this.jsonStrings=[];const u=this.getRawArgumentsContent();if(null===u)return;const l=this.getArguments();if(1===l.length&&"[]"===l[0].getValue()){let e=l[0].getRange();return this.openingBracket=new r.Argument("[",a.Range.create(e.start.line,e.start.character,e.start.line,e.start.character+1)),void(this.closingBracket=new r.Argument("]",a.Range.create(e.start.line,e.start.character+1,e.end.line,e.end.character)))}if(2===l.length&&"["===l[0].getValue()&&"]"===l[1].getValue())return this.openingBracket=l[0],void(this.closingBracket=l[1]);const g=e.offsetAt(this.getArgumentsRange().start);let d=-1,h="",m=!1,f="";e:for(let t=0;t<u.length;t++){let n=u.charAt(t);switch(n){case"[":if(""===h)this.openingBracket=new r.Argument("[",a.Range.create(e.positionAt(g+t),e.positionAt(g+t+1))),h="[";else{if(!m)break e;f+=n}break;case'"':if("["===h||","===h){d=t,m=!0,h='"',f+=n;continue}if('"'!==h)break e;if(!m)break e;f+=n,m=!1,this.jsonStrings.push(new i.JSONArgument(f,a.Range.create(e.positionAt(g+d),e.positionAt(g+t+1)),a.Range.create(e.positionAt(g+d+1),e.positionAt(g+t)))),f="";break;case",":if(m)f+=n;else{if('"'!==h)break e;h=","}break;case"]":if(m)f+=n;else if(""!==h){this.closingBracket=new r.Argument("]",a.Range.create(e.positionAt(g+t),e.positionAt(g+t+1)));break e}break;case" ":case"\t":break;case"\\":if(m)switch(u.charAt(t+1)){case'"':case"\\":f+=u.charAt(t+1),t++;continue;case" ":case"\t":t:for(let e=t+2;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break;case"\r":t++;default:t++;continue}else t:for(let e=t+1;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break e;default:if(!m)break e;f+=n}}}stopSearchingForFlags(e){return!0}getOpeningBracket(){return this.openingBracket}getJSONStrings(){return this.jsonStrings}getClosingBracket(){return this.closingBracket}}},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class Util{static isWhitespace(e){return" "===e||"\t"===e||Util.isNewline(e)}static isNewline(e){return"\r"===e||"\n"===e}static findLeadingNonWhitespace(e,t){e:for(let n=0;n<e.length;n++)switch(e.charAt(n)){case" ":case"\t":continue;case t:t:for(let t=n+1;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":continue;case"\r":n=t+1;continue e;case"\n":n=t;continue e;default:break t}return n;default:return n}return-1}static isInsideRange(e,t){return t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line}}t.Util=Util},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class Util{static isWhitespace(e){return" "===e||"\t"===e||Util.isNewline(e)}static isNewline(e){return"\r"===e||"\n"===e}static findLeadingNonWhitespace(e,t){e:for(let n=0;n<e.length;n++)switch(e.charAt(n)){case" ":case"\t":continue;case t:t:for(let t=n+1;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":continue;case"\r":n=t+1;continue e;case"\n":n=t;continue e;default:break t}return n;default:return n}return-1}static isInsideRange(e,t){return t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line}}t.Util=Util},145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEYWORDS=["ADD","ARG","CMD","COPY","ENTRYPOINT","ENV","EXPOSE","FROM","HEALTHCHECK","LABEL","MAINTAINER","ONBUILD","RUN","SHELL","STOPSIGNAL","USER","VOLUME","WORKDIR"];var a=function(){function e(){}return e.isWhitespace=function(t){return" "===t||"\t"===t||e.isNewline(t)},e.isNewline=function(e){return"\r"===e||"\n"===e},e.isInsideRange=function(e,t){return null!==t&&(t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line)},e.rangeEquals=function(t,n){return e.positionEquals(t.start,n.start)&&e.positionEquals(t.end,n.end)},e.positionEquals=function(e,t){return e.line==t.line&&e.character===t.character},e.positionBefore=function(e,t){return e.line<t.line||!(e.line>t.line)&&e.character<t.character},e}();t.Util=a},178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(179);t.Argument=a.Argument;var r=n(813);t.JSONArgument=r.JSONArgument;const i=n(814);t.Comment=i.Comment;const s=n(815);var o=n(818);t.Flag=o.Flag;const c=n(85);t.Instruction=c.Instruction;var u=n(242);t.Line=u.Line;const l=n(816);t.ParserDirective=l.ParserDirective;var g=n(363);t.Property=g.Property;var d=n(817);t.Variable=d.Variable;var h=n(819);t.Add=h.Add;const m=n(362);t.Arg=m.Arg;const f=n(364);t.Cmd=f.Cmd;const p=n(365);t.Copy=p.Copy;const A=n(367);t.Entrypoint=A.Entrypoint;const _=n(366);t.Env=_.Env;const R=n(244);t.From=R.From;const I=n(368);t.Healthcheck=I.Healthcheck;var S=n(105);t.JSONInstruction=S.JSONInstruction;var D=n(820);t.Label=D.Label;var E=n(361);t.ModifiableInstruction=E.ModifiableInstruction;var N=n(369);t.Onbuild=N.Onbuild;var C=n(243);t.PropertyInstruction=C.PropertyInstruction;var b=n(821);t.Shell=b.Shell;var v=n(822);t.Stopsignal=v.Stopsignal;var V=n(824);t.User=V.User;var k=n(825);t.Volume=k.Volume;var T=n(823);t.Workdir=T.Workdir,function(e){e.ADD="ARG",e.ARG="ARG",e.CMD="CMD",e.COPY="COPY",e.ENTRYPOINT="ENTRYPOINT",e.ENV="ENV",e.EXPOSE="EXPOSE",e.FROM="FROM",e.HEALTHCHECK="HEALTHCHECK",e.LABEL="LABEL",e.MAINTAINER="MAINTAINER",e.ONBUILD="ONBUILD",e.RUN="RUN",e.SHELL="SHELL",e.STOPSIGNAL="STOPSIGNAL",e.USER="USER",e.VOLUME="VOLUME",e.WORKDIR="WORKDIR"}(t.Keyword||(t.Keyword={})),function(e){e.escape="escape"}(t.Directive||(t.Directive={})),t.DefaultVariables=["FTP_PROXY","ftp_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","NO_PROXY","no_proxy"],function(e){e.parse=function(e){return(new s.Parser).parse(e)}}(t.DockerfileParser||(t.DockerfileParser={}))},179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Argument=class Argument{constructor(e,t){this.value=e,this.range=t}toString(){return this.value}getRange(){return this.range}getValue(){return this.value}isAfter(e){return!(this.range.end.line<e.line)&&(this.range.start.line>e.line||this.range.start.character>e.character)}isBefore(e){return this.range.start.line<e.line||!(this.range.end.line>e.line)&&this.range.end.character<e.character}}},18:function(e,t){e.exports=require("vscode-languageserver-types")},180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Argument=class Argument{constructor(e,t){this.value=e,this.range=t}toString(){return this.value}getRange(){return this.range}getValue(){return this.value}isAfter(e){return!(this.range.end.line<e.line)&&(this.range.start.line>e.line||this.range.start.character>e.character)}isBefore(e){return this.range.start.line<e.line||!(this.range.end.line>e.line)&&this.range.end.character<e.character}}},20:function(e,t){e.exports=require("url")},242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Line=class Line{constructor(e,t){this.document=e,this.range=t}getRange(){return this.range}getTextContent(){return this.document.getText().substring(this.document.offsetAt(this.range.start),this.document.offsetAt(this.range.end))}isAfter(e){return this.range.start.line>e.range.start.line}isBefore(e){return this.range.start.line<e}}},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(85),i=n(363),s=n(179),o=n(119);t.PropertyInstruction=class PropertyInstruction extends r.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i),this.properties=void 0}getProperties(){if(void 0===this.properties){let e=this.getPropertyArguments();if(0===e.length)this.properties=[];else if(1===e.length)this.properties=[new i.Property(this.document,this.escapeChar,e[0])];else if(2===e.length)-1===e[0].getValue().indexOf("=")?this.properties=[new i.Property(this.document,this.escapeChar,e[0],e[1])]:this.properties=[new i.Property(this.document,this.escapeChar,e[0]),new i.Property(this.document,this.escapeChar,e[1])];else if(-1===e[0].getValue().indexOf("=")){let t=this.document.getText(),n=e[1].getRange().start,r=e[e.length-1].getRange().end;t=t.substring(this.document.offsetAt(n),this.document.offsetAt(r)),this.properties=[new i.Property(this.document,this.escapeChar,e[0],new s.Argument(t,a.Range.create(e[1].getRange().start,e[e.length-1].getRange().end)))]}else{this.properties=[];for(let t=0;t<e.length;t++)this.properties.push(new i.Property(this.document,this.escapeChar,e[t]))}}return this.properties}findTrailingNonWhitespace(e){let t=e.length;e:for(let n=e.length-1;n>=0;n--)switch(e.charAt(n)){case" ":case"\t":continue;case"\n":"\r"===e.charAt(n-1)&&(n-=1);case"\r":t:for(let a=n-1;a>=0;a--)switch(e.charAt(a)){case" ":case"\t":case"\r":case"\n":case this.escapeChar:continue;default:t=a;break t}break e;default:t=n;break e}return t}getPropertyArguments(){const e=[];let t=this.getInstructionRange(),n=this.document.offsetAt(t.end),r=n-this.document.offsetAt(t.start),i=this.getTextContent(),c=i.substring(r),u=o.Util.findLeadingNonWhitespace(c,this.escapeChar);if(-1===u)return[];let l=!1,g=!1,d=-1,h=this.findTrailingNonWhitespace(c);i=c.substring(u,h+1);let m=0,f=!1;e:for(let t=0;t<i.length;t++){let r=i.charAt(t);switch(r){case this.escapeChar:if(t+1===i.length){g=!0;break e}switch(l||(d=t),i.charAt(t+1)){case" ":case"\t":if(!o.Util.isWhitespace(i.charAt(t+2))){t+=1;continue e}t:for(let r=t+2;r<i.length;r++)switch(i.charAt(r)){case"\r":r++;case"\n":l=!0,t=r;continue e;case" ":case"\t":break;default:e.push(new s.Argument(i.substring(m,t),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t+2)))),m=r;break t}t=m-1;continue e;case"\r":t++;case"\n":l=!0,t+=1;continue e;case this.escapeChar:-1===m&&(m=t),t+=1;continue e;default:-1===m&&(m=t);continue e}case"'":case'"':-1===m&&(m=t);for(let o=t+1;o<i.length;o++)switch(i.charAt(o)){case r:if(" "!==i.charAt(o+1)&&""!==i.charAt(o+1)){t=o;continue e}e.push(new s.Argument(i.substring(m,o+1),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+o+1)))),t=o,m=-1;continue e;case this.escapeChar:o++}break e;case" ":case"\t":l?-1!==m&&(f=!0):-1!==m&&(e.push(new s.Argument(i.substring(m,t),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t)))),m=-1);break;case"\r":t++;case"\n":f=!1;break;case"#":if(l){for(let e=t+1;e<i.length;e++)switch(i.charAt(e)){case"\r":e++;case"\n":t=e,f=!1;continue e}if(-1!==m){let t=i.substring(m,d);e.push(new s.Argument(t,a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+d)))),m=-1}break e}-1===m&&(m=t);break;default:if(f&&(-1!==m&&(e.push(new s.Argument(i.substring(m,d),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+d)))),m=-1),f=!1),l=!1,-1===m&&(m=t),"$"===r&&"{"===i.charAt(t+1)){let e=!1,n=!1,a=!1;for(let r=t+1;r<i.length;r++)switch(i.charAt(r)){case this.escapeChar:a=!0;break;case"\r":case"\n":break;case"'":e=!e,a=!1;break;case'"':n=!n,a=!1;break;case" ":case"\t":if(a||e||n)break;t=r-1;continue e;case"}":t=r;continue e;default:a=!1}break e}}}if(-1!==m&&m!==i.length){let t=g?i.length-1:i.length,r=i.substring(m,t);e.push(new s.Argument(r,a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t))))}return e}}},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(85);t.From=class From extends r.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getImage(){return this.getRangeContent(this.getImageRange())}getImageName(){return this.getRangeContent(this.getImageNameRange())}getImageNameRange(){let e=this.getImageRange();if(e){let t=this.getRegistryRange();t&&(e.start=this.document.positionAt(this.document.offsetAt(t.end)+1));let n=this.getImageTagRange(),a=this.getImageDigestRange();return null===n?null!==a&&(e.end=this.document.positionAt(this.document.offsetAt(a.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(n.start)-1),e}return null}getImageRange(){let e=this.getArguments();return 0!==e.length?e[0].getRange():null}getImageTag(){return this.getRangeContent(this.getImageTagRange())}getImageTagRange(){const e=this.getImageRange();if(e&&null===this.getImageDigestRange()){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,":");if(n>t.indexOf("/"))return a.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}getImageDigest(){return this.getRangeContent(this.getImageDigestRange())}getImageDigestRange(){let e=this.getImageRange();if(e){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,"@");if(-1!==n)return a.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}indexOf(e,t,n){let a=t.indexOf(n);const r=this.getVariables();for(let i=0;i<r.length;i++){const s=e+a,o=r[i].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){const r=this.document.offsetAt(o.end)-e,s=t.substring(r).indexOf(n);if(-1===s)return-1;a=s+r,i=-1}}return a}lastIndexOf(e,t,n){let a=t.lastIndexOf(n);const r=this.getVariables();for(let i=0;i<r.length;i++){const s=e+a,o=r[i].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){if(-1===(a=t.substring(0,a).lastIndexOf(n)))return-1;i=-1}}return a}getRegistry(){return this.getRangeContent(this.getRegistryRange())}getRegistryRange(){const e=this.getImageRange();if(e){const t=this.getImageTagRange(),n=this.getImageDigestRange();null===t?null!==n&&(e.end=this.document.positionAt(this.document.offsetAt(n.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(t.start)-1);const r=this.getRangeContent(e),i=this.indexOf(this.document.offsetAt(e.start),r,":"),s=this.indexOf(this.document.offsetAt(e.start),r,"/"),o=this.lastIndexOf(this.document.offsetAt(e.start),r,"/");if(-1!==s&&s!==o||-1!==i){const t=this.document.offsetAt(e.start);return a.Range.create(e.start,this.document.positionAt(t+s))}}return null}getBuildStage(){let e=this.getBuildStageRange();return null===e?null:this.getRangeContent(e)}getBuildStageRange(){let e=this.getArguments();return 3===e.length&&"AS"===e[1].getValue().toUpperCase()?e[2].getRange():null}}},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Line=class Line{constructor(e,t){this.document=e,this.range=t}getRange(){return this.range}getTextContent(){return this.document.getText().substring(this.document.offsetAt(this.range.start),this.document.offsetAt(this.range.end))}isAfter(e){return this.range.start.line>e.range.start.line}isBefore(e){return this.range.start.line<e}}},2458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(10),r=n(2459),i=n(812),s=n(826);let o=null,c=new Map,u=r.createConnection(),l=s.DockerfileLanguageServiceFactory.createLanguageService();l.setLogger({log(e){u.console.log(e)}});let g=!1,d=!1,h=!1,m=!1,f={};function p(e){return f[e]?Promise.resolve(f[e]):new Promise((t,n)=>{let i=r.Files.uriToFilePath(e);void 0===i?t(null):a.exists(i,n=>{n?a.readFile(i,(n,a)=>{t(r.TextDocument.create(e,"dockerfile",1,a.toString()))}):t(null)})})}function A(e){return e.textDocument&&e.textDocument.completion&&e.textDocument.completion.completionItem&&e.textDocument.completion.completionItem.deprecatedSupport}function _(e){return e.textDocument&&e.textDocument.completion&&e.textDocument.completion.completionItem&&e.textDocument.completion.completionItem.snippetSupport}function R(e){return e.textDocument&&e.textDocument.completion&&e.textDocument.completion.completionItem&&e.textDocument.completion.completionItem.documentationFormat}function I(e){return e.textDocument&&e.textDocument.hover&&e.textDocument.hover.contentFormat}function S(e){return e.textDocument&&e.textDocument.foldingRange&&e.textDocument.foldingRange.lineFoldingOnly}function D(e){let t=e.textDocument&&e.textDocument.foldingRange&&e.textDocument.foldingRange.rangeLimit;return null==t||"boolean"==typeof t||isNaN(t)?t=Number.MAX_VALUE:"number"!=typeof t&&(t=Number(t)),t}function E(e){let t=i.ValidationSeverity.WARNING,n=i.ValidationSeverity.WARNING,a=i.ValidationSeverity.WARNING,r=i.ValidationSeverity.WARNING,s=i.ValidationSeverity.WARNING,o=i.ValidationSeverity.WARNING,c=i.ValidationSeverity.WARNING,u=i.ValidationSeverity.WARNING,l=i.ValidationSeverity.WARNING;return e&&(t=C(e.deprecatedMaintainer),n=C(e.directiveCasing),a=C(e.emptyContinuationLine),r=C(e.instructionCasing),s=C(e.instructionCmdMultiple),o=C(e.instructionEntrypointMultiple),c=C(e.instructionHealthcheckMultiple),u=C(e.instructionJSONInSingleQuotes),l=C(e.instructionWorkdirRelative)),{deprecatedMaintainer:t,directiveCasing:n,emptyContinuationLine:a,instructionCasing:r,instructionCmdMultiple:s,instructionEntrypointMultiple:o,instructionHealthcheckMultiple:c,instructionJSONInSingleQuotes:u,instructionWorkdirRelative:l}}function N(e){if(d)(function(e){let t=c.get(e);t||(t=u.workspace.getConfiguration({section:"docker.languageserver.diagnostics",scopeUri:e}),c.set(e,t));return t})(e.uri).then(t=>{const n=E(t),a=l.validate(e.getText(),n);u.sendDiagnostics({uri:e.uri,diagnostics:a})});else{const t=l.validate(e.getText(),o);u.sendDiagnostics({uri:e.uri,diagnostics:t})}}function C(e){switch(e){case"ignore":return i.ValidationSeverity.IGNORE;case"warning":return i.ValidationSeverity.WARNING;case"error":return i.ValidationSeverity.ERROR}return null}function b(){const e=[];for(let t in f)e.push({section:"docker.languageserver.diagnostics",scopeUri:t});c.clear(),u.workspace.getConfiguration(e).then(t=>{const n=[];for(let a=0;a<t.length;a++){const r=e[a].scopeUri;t[a]&&!c.has(r)&&(c.set(r,Promise.resolve(t[a])),n.push(r))}for(const e of n)N(f[e])})}function v(e,t,n,a){let i=l.computeCommandEdits(t.getText(),n,a);if(i){if(h){let n=r.VersionedTextDocumentIdentifier.create(e,t.version);return{documentChanges:[r.TextDocumentEdit.create(n,i)]}}return{changes:{[e]:i}}}return null}u.onInitialized(()=>{d&&u.client.register(r.DidChangeConfigurationNotification.type)}),u.onInitialize(e=>{!function(e){l.setCapabilities({completion:{completionItem:{deprecatedSupport:A(e),documentationFormat:R(e),snippetSupport:_(e)}},hover:{contentFormat:I(e)},foldingRange:{lineFoldingOnly:S(e),rangeLimit:D(e)}})}(e.capabilities),g=e.capabilities.workspace&&!0===e.capabilities.workspace.applyEdit,h=e.capabilities.workspace&&e.capabilities.workspace.workspaceEdit&&!0===e.capabilities.workspace.workspaceEdit.documentChanges,d=e.capabilities.workspace&&!0===e.capabilities.workspace.configuration;const t=e.capabilities.textDocument&&e.capabilities.textDocument.rename&&!0===e.capabilities.textDocument.rename.prepareSupport;return m=function(e){let t=e.textDocument&&e.textDocument.codeAction&&e.textDocument.codeAction.codeActionLiteralSupport&&e.textDocument.codeAction.codeActionLiteralSupport.codeActionKind&&e.textDocument.codeAction.codeActionLiteralSupport.codeActionKind.valueSet;if(null==t)return!1;for(let e of t)if(e===r.CodeActionKind.QuickFix)return!0;return!1}(e.capabilities),{capabilities:{textDocumentSync:r.TextDocumentSyncKind.Incremental,codeActionProvider:g,completionProvider:{resolveProvider:!0,triggerCharacters:["="," ","$","-"]},executeCommandProvider:g?{commands:[s.CommandIds.LOWERCASE,s.CommandIds.UPPERCASE,s.CommandIds.EXTRA_ARGUMENT,s.CommandIds.DIRECTIVE_TO_BACKSLASH,s.CommandIds.DIRECTIVE_TO_BACKTICK,s.CommandIds.FLAG_TO_CHOWN,s.CommandIds.FLAG_TO_COPY_FROM,s.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL,s.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES,s.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD,s.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT,s.CommandIds.CONVERT_TO_AS,s.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE]}:void 0,documentFormattingProvider:!0,documentRangeFormattingProvider:!0,documentOnTypeFormattingProvider:{firstTriggerCharacter:"\\",moreTriggerCharacter:["`"]},hoverProvider:!0,documentSymbolProvider:!0,documentHighlightProvider:!0,renameProvider:!t||{prepareProvider:!0},definitionProvider:!0,signatureHelpProvider:{triggerCharacters:["-","[",","," ","="]},documentLinkProvider:{resolveProvider:!0},foldingRangeProvider:!0}}}),u.onNotification(r.DidChangeConfigurationNotification.type,()=>{b()}),u.onDidChangeConfiguration(e=>{if(d)b();else{let t=e.settings;o=t.docker&&t.docker.languageserver&&t.docker.languageserver.diagnostics?E(t.docker.languageserver.diagnostics):E(null),Object.keys(f).forEach(e=>{N(f[e])})}}),u.onCompletion(e=>p(e.textDocument.uri).then(t=>t?l.computeCompletionItems(t.getText(),e.position):null)),u.onSignatureHelp(e=>p(e.textDocument.uri).then(t=>null!==t?l.computeSignatureHelp(t.getText(),e.position):{signatures:[],activeSignature:null,activeParameter:null})),u.onCompletionResolve(e=>l.resolveCompletionItem(e)),u.onHover(e=>p(e.textDocument.uri).then(t=>t?l.computeHover(t.getText(),e.position):null)),u.onDocumentHighlight(e=>p(e.textDocument.uri).then(t=>t?l.computeHighlightRanges(t.getText(),e.position):[])),u.onCodeAction(e=>{if(g&&e.context.diagnostics.length>0){let t=l.computeCodeActions(e.textDocument,e.range,e.context);return m?p(e.textDocument.uri).then(n=>{let a=[];for(let i of t){let t={title:i.title,kind:r.CodeActionKind.QuickFix},s=v(e.textDocument.uri,n,i.command,i.arguments);s&&(t.edit=s),a.push(t)}return a}):t}return[]}),u.onExecuteCommand(e=>{if(g){let t=e.arguments[0];p(t).then(n=>{if(n){let a=v(t,n,e.command,e.arguments);a&&u.workspace.applyEdit(a)}return null})}}),u.onDefinition(e=>p(e.textDocument.uri).then(t=>t?l.computeDefinition(e.textDocument,t.getText(),e.position):null)),u.onRenameRequest(e=>p(e.textDocument.uri).then(t=>{if(t){let n=l.computeRename(e.textDocument,t.getText(),e.position,e.newName);return{changes:{[e.textDocument.uri]:n}}}return null})),u.onPrepareRename(e=>p(e.textDocument.uri).then(t=>t?l.prepareRename(t.getText(),e.position):null)),u.onDocumentSymbol(e=>p(e.textDocument.uri).then(t=>t?l.computeSymbols(e.textDocument,t.getText()):[])),u.onDocumentFormatting(e=>p(e.textDocument.uri).then(t=>t?l.format(t.getText(),e.options):[])),u.onDocumentRangeFormatting(e=>p(e.textDocument.uri).then(t=>t?l.formatRange(t.getText(),e.range,e.options):[])),u.onDocumentOnTypeFormatting(e=>p(e.textDocument.uri).then(t=>t?l.formatOnType(t.getText(),e.position,e.ch,e.options):[])),u.onDocumentLinks(e=>p(e.textDocument.uri).then(e=>e?l.computeLinks(e.getText()):[])),u.onDocumentLinkResolve(e=>l.resolveLink(e)),u.onFoldingRanges(e=>p(e.textDocument.uri).then(e=>e?l.computeFoldingRanges(e.getText()):[])),u.onDidOpenTextDocument(e=>{let t=r.TextDocument.create(e.textDocument.uri,e.textDocument.languageId,e.textDocument.version,e.textDocument.text);f[e.textDocument.uri]=t,N(t)}),u.onDidChangeTextDocument(e=>{let t=f[e.textDocument.uri],n=t.getText(),a=n,i=e.contentChanges;for(let e=0;e<i.length;e++){if(!i[e].range&&!i[e].rangeLength){n=i[e].text;break}let a=t.offsetAt(i[e].range.start),r=null;r=i[e].range.end?t.offsetAt(i[e].range.end):a+i[e].rangeLength,n=n.substring(0,a)+i[e].text+n.substring(r)}t=r.TextDocument.create(e.textDocument.uri,t.languageId,e.textDocument.version,n),f[e.textDocument.uri]=t,a!==n&&N(t)}),u.onDidCloseTextDocument(e=>{c.delete(e.textDocument.uri),u.sendDiagnostics({uri:e.textDocument.uri,diagnostics:[]}),delete f[e.textDocument.uri]}),u.listen()},2459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(49);t.Event=a.Event;const r=n(2460),i=n(2461),s=n(811),o=n(2462);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(49));const c=n(2463);!function(e){e.uriToFilePath=c.uriToFilePath,e.resolveGlobalNodePath=c.resolveGlobalNodePath,e.resolveGlobalYarnPath=c.resolveGlobalYarnPath,e.resolve=c.resolve,e.resolveModule=c.resolveModule,e.resolveModule2=c.resolveModule2,e.resolveModulePath=c.resolveModulePath}(t.Files||(t.Files={}));let u=!1,l=void 0;function g(e){if(null!==e)return e}!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(l=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(u?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let n=process.argv[t];if("--clientProcessId"===n&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=n.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();t.TextDocuments=class TextDocuments{constructor(){this._documents=Object.create(null),this._onDidChangeContent=new a.Emitter,this._onDidOpen=new a.Emitter,this._onDidClose=new a.Emitter,this._onDidSave=new a.Emitter,this._onWillSave=new a.Emitter}get syncKind(){return a.TextDocumentSyncKind.Full}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=a.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t=e.textDocument,n=a.TextDocument.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=n;let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges,a=n.length>0?n[n.length-1]:void 0;if(a){let e=this._documents[t.uri];if(e&&function(e){return s.func(e.update)}(e)){if(null===t.version||void 0===t.version)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);e.update(a,t.version),this._onDidChangeContent.fire(Object.freeze({document:e}))}}}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};t.ErrorMessageTracker=class ErrorMessageTracker{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}},function(e){e.create=function(){return new BulkRegistrationImpl}}(t.BulkRegistration||(t.BulkRegistration={}));class BulkRegistrationImpl{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const n=s.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);const a=o.generateUuid();this._registrations.push({id:a,method:n,registerOptions:t||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}}!function(e){e.create=function(){return new BulkUnregistrationImpl(void 0,[])}}(t.BulkUnregistration||(t.BulkUnregistration={}));class BulkUnregistrationImpl{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(a.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=s.string(e)?e:e.method,n=this._unregistrations.get(t);if(!n)return!1;let r={unregisterations:[n]};return this._connection.sendRequest(a.UnregistrationRequest.type,r).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${n.id} failed.`)}),!0}}class ConnectionLogger{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(a.MessageType.Error,e)}warn(e){this.send(a.MessageType.Warning,e)}info(e){this.send(a.MessageType.Info,e)}log(e){this.send(a.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(a.LogMessageNotification.type,{type:e,message:t})}}class RemoteWindowImpl{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let n={type:a.MessageType.Error,message:e,actions:t};return this._connection.sendRequest(a.ShowMessageRequest.type,n).then(g)}showWarningMessage(e,...t){let n={type:a.MessageType.Warning,message:e,actions:t};return this._connection.sendRequest(a.ShowMessageRequest.type,n).then(g)}showInformationMessage(e,...t){let n={type:a.MessageType.Info,message:e,actions:t};return this._connection.sendRequest(a.ShowMessageRequest.type,n).then(g)}}class RemoteClientImpl{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof BulkRegistrationImpl?this.registerMany(e):e instanceof BulkUnregistrationImpl?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,t,n){const r=s.string(t)?t:t.method,i=o.generateUuid();let c={registrations:[{id:i,method:r,registerOptions:n||{}}]};return e.isAttached||e.attach(this._connection),this._connection.sendRequest(a.RegistrationRequest.type,c).then(t=>(e.add({id:i,method:r}),e),e=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(e)))}registerSingle2(e,t){const n=s.string(e)?e:e.method,r=o.generateUuid();let i={registrations:[{id:r,method:n,registerOptions:t||{}}]};return this._connection.sendRequest(a.RegistrationRequest.type,i).then(e=>a.Disposable.create(()=>{this.unregisterSingle(r,n)}),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let n={unregisterations:[{id:e,method:t}]};return this._connection.sendRequest(a.UnregistrationRequest.type,n).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this._connection.sendRequest(a.RegistrationRequest.type,t).then(()=>new BulkUnregistrationImpl(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const d=i.WorkspaceFoldersFeature(r.ConfigurationFeature(class _RemoteWorkspaceImpl{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(n=e)&&n.edit?e:{edit:e};var n;return this._connection.sendRequest(a.ApplyWorkspaceEditRequest.type,t)}}));class TracerImpl{constructor(){this._trace=a.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==a.Trace.Off&&this._connection.sendNotification(a.LogTraceNotification.type,{message:e,verbose:this._trace===a.Trace.Verbose?t:void 0})}}class TelemetryImpl{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this._connection.sendNotification(a.TelemetryEventNotification.type,e)}}function h(e,t){return function(n){return t(e(n))}}function m(e,t){return function(n){return t(e(n))}}function f(e,t){return function(n){return t(e(n))}}function p(e,t){return function(n){return t(e(n))}}function A(e,t){return function(n){return t(e(n))}}function _(e,t){return function(n){return t(e(n))}}t.combineConsoleFeatures=h,t.combineTelemetryFeatures=m,t.combineTracerFeatures=f,t.combineClientFeatures=p,t.combineWindowFeatures=A,t.combineWorkspaceFeatures=_,t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,h),tracer:n(e.tracer,t.tracer,f),telemetry:n(e.telemetry,t.telemetry,m),client:n(e.client,t.client,p),window:n(e.window,t.window,A),workspace:n(e.workspace,t.workspace,_)}},t.createConnection=function(e,t,n,r){let i,o,c,g;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=n,n=r),a.ConnectionStrategy.is(e)?g=e:(o=e,c=t,g=n),function(e,t,n,r){if(!e&&!t&&process.argv.length>2){let n=void 0,r=void 0,s=process.argv.slice(2);for(let o=0;o<s.length;o++){let c=s[o];if("--node-ipc"===c){e=new a.IPCMessageReader(process),t=new a.IPCMessageWriter(process);break}if("--stdio"===c){e=process.stdin,t=process.stdout;break}if("--socket"===c){n=parseInt(s[o+1]);break}if("--pipe"===c){r=s[o+1];break}var i=c.split("=");if("--socket"===i[0]){n=parseInt(i[1]);break}if("--pipe"===i[0]){r=i[1];break}}if(n){let r=a.createServerSocketTransport(n);e=r[0],t=r[1]}else if(r){let n=a.createServerPipeTransport(r);e=n[0],t=n[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+o);if(!t)throw new Error("Connection output stream is not set. "+o);if(s.func(e.read)&&s.func(e.on)){let t=e;t.on("end",()=>{process.exit(u?0:1)}),t.on("close",()=>{process.exit(u?0:1)})}const c=r&&r.console?new(r.console(ConnectionLogger)):new ConnectionLogger,g=a.createProtocolConnection(e,t,c,n);c.rawAttach(g);const h=r&&r.tracer?new(r.tracer(TracerImpl)):new TracerImpl,m=r&&r.telemetry?new(r.telemetry(TelemetryImpl)):new TelemetryImpl,f=r&&r.client?new(r.client(RemoteClientImpl)):new RemoteClientImpl,p=r&&r.window?new(r.window(RemoteWindowImpl)):new RemoteWindowImpl,A=r&&r.workspace?new(r.workspace(d)):new d,_=[c,h,m,f,p,A];let R=void 0,I=void 0,S=void 0,D={listen:()=>g.listen(),sendRequest:(e,...t)=>g.sendRequest(s.string(e)?e:e.method,...t),onRequest:(e,t)=>g.onRequest(e,t),sendNotification:(e,t)=>{const n=s.string(e)?e:e.method;1===arguments.length?g.sendNotification(n):g.sendNotification(n,t)},onNotification:(e,t)=>g.onNotification(e,t),onInitialize:e=>I=e,onInitialized:e=>g.onNotification(a.InitializedNotification.type,e),onShutdown:e=>R=e,onExit:e=>S=e,get console(){return c},get telemetry(){return m},get tracer(){return h},get client(){return f},get window(){return p},get workspace(){return A},onDidChangeConfiguration:e=>g.onNotification(a.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>g.onNotification(a.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>g.onNotification(a.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>g.onNotification(a.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>g.onNotification(a.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>g.onNotification(a.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>g.onRequest(a.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>g.onNotification(a.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>g.sendNotification(a.PublishDiagnosticsNotification.type,e),onHover:e=>g.onRequest(a.HoverRequest.type,e),onCompletion:e=>g.onRequest(a.CompletionRequest.type,e),onCompletionResolve:e=>g.onRequest(a.CompletionResolveRequest.type,e),onSignatureHelp:e=>g.onRequest(a.SignatureHelpRequest.type,e),onDeclaration:e=>g.onRequest(a.DeclarationRequest.type,e),onDefinition:e=>g.onRequest(a.DefinitionRequest.type,e),onTypeDefinition:e=>g.onRequest(a.TypeDefinitionRequest.type,e),onImplementation:e=>g.onRequest(a.ImplementationRequest.type,e),onReferences:e=>g.onRequest(a.ReferencesRequest.type,e),onDocumentHighlight:e=>g.onRequest(a.DocumentHighlightRequest.type,e),onDocumentSymbol:e=>g.onRequest(a.DocumentSymbolRequest.type,e),onWorkspaceSymbol:e=>g.onRequest(a.WorkspaceSymbolRequest.type,e),onCodeAction:e=>g.onRequest(a.CodeActionRequest.type,e),onCodeLens:e=>g.onRequest(a.CodeLensRequest.type,e),onCodeLensResolve:e=>g.onRequest(a.CodeLensResolveRequest.type,e),onDocumentFormatting:e=>g.onRequest(a.DocumentFormattingRequest.type,e),onDocumentRangeFormatting:e=>g.onRequest(a.DocumentRangeFormattingRequest.type,e),onDocumentOnTypeFormatting:e=>g.onRequest(a.DocumentOnTypeFormattingRequest.type,e),onRenameRequest:e=>g.onRequest(a.RenameRequest.type,e),onPrepareRename:e=>g.onRequest(a.PrepareRenameRequest.type,e),onDocumentLinks:e=>g.onRequest(a.DocumentLinkRequest.type,e),onDocumentLinkResolve:e=>g.onRequest(a.DocumentLinkResolveRequest.type,e),onDocumentColor:e=>g.onRequest(a.DocumentColorRequest.type,e),onColorPresentation:e=>g.onRequest(a.ColorPresentationRequest.type,e),onFoldingRanges:e=>g.onRequest(a.FoldingRangeRequest.type,e),onExecuteCommand:e=>g.onRequest(a.ExecuteCommandRequest.type,e),dispose:()=>g.dispose()};for(let e of _)e.attach(D);return g.onRequest(a.InitializeRequest.type,e=>{const t=e.processId;s.number(t)&&void 0===l&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(u?0:1)}},3e3),s.string(e.trace)&&(h.trace=a.Trace.fromString(e.trace));for(let t of _)t.initialize(e.capabilities);if(I)return function(e){return s.thenable(e)?e:Promise.resolve(e)}(I(e,(new a.CancellationTokenSource).token)).then(e=>{if(e instanceof a.ResponseError)return e;let t=e;t||(t={capabilities:{}});let n=t.capabilities;n||(n={},t.capabilities=n),void 0===n.textDocumentSync||null===n.textDocumentSync?n.textDocumentSync=s.number(D.__textDocumentSync)?D.__textDocumentSync:a.TextDocumentSyncKind.None:s.number(n.textDocumentSync)||s.number(n.textDocumentSync.change)||(n.textDocumentSync.change=s.number(D.__textDocumentSync)?D.__textDocumentSync:a.TextDocumentSyncKind.None);for(let e of _)e.fillServerCapabilities(n);return t});{let e={capabilities:{textDocumentSync:a.TextDocumentSyncKind.None}};for(let t of _)t.fillServerCapabilities(e.capabilities);return e}}),g.onRequest(a.ShutdownRequest.type,()=>(u=!0,R?R((new a.CancellationTokenSource).token):void 0)),g.onNotification(a.ExitNotification.type,()=>{try{S&&S()}finally{u?process.exit(0):process.exit(1)}}),g.onNotification(a.SetTraceNotification.type,e=>{h.trace=a.Trace.fromString(e.value)}),D}(o,c,g,i)},function(e){e.all={__brand:"features"}}(t.ProposedFeatures||(t.ProposedFeatures={}))},246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(86),i=n(373),s=n(180),o=n(120);t.PropertyInstruction=class PropertyInstruction extends r.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i),this.properties=void 0}getProperties(){if(void 0===this.properties){let e=this.getPropertyArguments();if(0===e.length)this.properties=[];else if(1===e.length)this.properties=[new i.Property(this.document,this.escapeChar,e[0])];else if(2===e.length)-1===e[0].getValue().indexOf("=")?this.properties=[new i.Property(this.document,this.escapeChar,e[0],e[1])]:this.properties=[new i.Property(this.document,this.escapeChar,e[0]),new i.Property(this.document,this.escapeChar,e[1])];else if(-1===e[0].getValue().indexOf("=")){let t=this.document.getText(),n=e[1].getRange().start,r=e[e.length-1].getRange().end;t=t.substring(this.document.offsetAt(n),this.document.offsetAt(r)),this.properties=[new i.Property(this.document,this.escapeChar,e[0],new s.Argument(t,a.Range.create(e[1].getRange().start,e[e.length-1].getRange().end)))]}else{this.properties=[];for(let t=0;t<e.length;t++)this.properties.push(new i.Property(this.document,this.escapeChar,e[t]))}}return this.properties}findTrailingNonWhitespace(e){let t=e.length;e:for(let n=e.length-1;n>=0;n--)switch(e.charAt(n)){case" ":case"\t":continue;case"\n":"\r"===e.charAt(n-1)&&(n-=1);case"\r":t:for(let a=n-1;a>=0;a--)switch(e.charAt(a)){case" ":case"\t":case"\r":case"\n":case this.escapeChar:continue;default:t=a;break t}break e;default:t=n;break e}return t}getPropertyArguments(){const e=[];let t=this.getInstructionRange(),n=this.document.offsetAt(t.end),r=n-this.document.offsetAt(t.start),i=this.getTextContent(),c=i.substring(r),u=o.Util.findLeadingNonWhitespace(c,this.escapeChar);if(-1===u)return[];let l=!1,g=!1,d=-1,h=this.findTrailingNonWhitespace(c);i=c.substring(u,h+1);let m=0,f=!1;e:for(let t=0;t<i.length;t++){let r=i.charAt(t);switch(r){case this.escapeChar:if(t+1===i.length){g=!0;break e}switch(l||(d=t),i.charAt(t+1)){case" ":case"\t":if(!o.Util.isWhitespace(i.charAt(t+2))){t+=1;continue e}t:for(let r=t+2;r<i.length;r++)switch(i.charAt(r)){case"\r":r++;case"\n":l=!0,t=r;continue e;case" ":case"\t":break;default:e.push(new s.Argument(i.substring(m,t),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t+2)))),m=r;break t}t=m-1;continue e;case"\r":t++;case"\n":l=!0,t+=1;continue e;case this.escapeChar:-1===m&&(m=t),t+=1;continue e;default:-1===m&&(m=t);continue e}case"'":case'"':-1===m&&(m=t);for(let o=t+1;o<i.length;o++)switch(i.charAt(o)){case r:if(" "!==i.charAt(o+1)&&""!==i.charAt(o+1)){t=o;continue e}e.push(new s.Argument(i.substring(m,o+1),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+o+1)))),t=o,m=-1;continue e;case this.escapeChar:o++}break e;case" ":case"\t":l?-1!==m&&(f=!0):-1!==m&&(e.push(new s.Argument(i.substring(m,t),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t)))),m=-1);break;case"\r":t++;case"\n":f=!1;break;case"#":if(l){for(let e=t+1;e<i.length;e++)switch(i.charAt(e)){case"\r":e++;case"\n":t=e,f=!1;continue e}if(-1!==m){let t=i.substring(m,d);e.push(new s.Argument(t,a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+d)))),m=-1}break e}-1===m&&(m=t);break;default:if(f&&(-1!==m&&(e.push(new s.Argument(i.substring(m,d),a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+d)))),m=-1),f=!1),l=!1,-1===m&&(m=t),"$"===r&&"{"===i.charAt(t+1)){let e=!1,n=!1,a=!1;for(let r=t+1;r<i.length;r++)switch(i.charAt(r)){case this.escapeChar:a=!0;break;case"\r":case"\n":break;case"'":e=!e,a=!1;break;case'"':n=!n,a=!1;break;case" ":case"\t":if(a||e||n)break;t=r-1;continue e;case"}":t=r;continue e;default:a=!1}break e}}}if(-1!==m&&m!==i.length){let t=g?i.length-1:i.length,r=i.substring(m,t);e.push(new s.Argument(r,a.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t))))}return e}}},2460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(49),r=n(811);t.ConfigurationFeature=(e=>(class extends e{getConfiguration(e){return e?r.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(a.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}}))},2461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(49);t.WorkspaceFoldersFeature=(e=>(class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new a.Emitter,this.connection.onNotification(a.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(a.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(a.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}))},2462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class ValueUUID{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}function a(){return new V4UUID}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],V4UUID._timeHighBits=["8","9","a","b"],t.empty=new ValueUUID("00000000-0000-0000-0000-000000000000"),t.v4=a;const r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function i(e){return r.test(e)}t.isUUID=i,t.parse=function(e){if(!i(e))throw new Error("invalid uuid");return new ValueUUID(e)},t.generateUuid=function(){return a().asHex()}},2463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20),r=n(3);n(10),n(71);t.uriToFilePath=function(e){let t=a.parse(e);if("file:"!==t.protocol||!t.path)return;let n=t.path.split("/");for(var i=0,s=n.length;i<s;i++)n[i]=decodeURIComponent(n[i]);if("win32"===process.platform&&n.length>1){let e=n[0],t=n[1];0===e.length&&t.length>1&&":"===t[1]&&n.shift()}return r.normalize(n.join("/"))},t.resolveModule=function(e,t){throw new Error("Not implemented")},t.resolve=function(e,t,n,a){throw new Error("Not implemented")},t.resolveGlobalNodePath=function(e){throw new Error("Not implemented")},t.resolveGlobalYarnPath=function(e){throw new Error("Not implemented")},t.resolveModulePath=function(e,t,n,a){throw new Error("Not implemented")},t.resolveModule2=function(e,t,n,a){throw new Error("Not implemented")}},2464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(178);t.DockerFormatter=class DockerFormatter{getIndentation(e){let t="\t";if(e&&e.insertSpaces){t="";for(let n=0;n<e.tabSize;n++)t+=" "}return t}createFormattingEdit(e,t,n,r,i){return r?a.TextEdit.replace({start:e.positionAt(t),end:e.positionAt(n)},i):a.TextEdit.del({start:e.positionAt(t),end:e.positionAt(n)})}formatOnType(e,t,n,a){const i=r.DockerfileParser.parse(e.getText());if(i.getEscapeCharacter()===n){for(let e of i.getComments())if(e.getRange().start.line===t.line)return[];if(i.getDirective()&&0===t.line)return[];const n=e.getText();e:for(let a=e.offsetAt(t);a<n.length;a++)switch(n.charAt(a)){case" ":case"\t":break;case"\r":case"\n":break e;default:return[]}const r=[t.line+1],s=[];return s[r[0]]=!0,this.formatLines(e,e.getText(),r,s,a)}return[]}formatRange(e,t,n){const a=[];for(let e=t.start.line;e<=t.end.line;e++)a.push(e);return this.format(e,a,n)}formatDocument(e,t){const n=[];for(let t=0;t<e.lineCount;t++)n.push(t);return this.format(e,n,t)}format(e,t,n){let a=e.getText(),i=r.DockerfileParser.parse(a);const s=[];for(let t=0;t<e.lineCount;t++)s[t]=!1;for(let e of i.getInstructions()){let t=e.getRange();s[t.start.line]=!1;for(let e=t.start.line+1;e<=t.end.line;e++)s[e]=!0}return this.formatLines(e,a,t,s,n)}formatLines(e,t,n,r,i){const s=this.getIndentation(i),o=[];e:for(let i of n){let n=e.offsetAt(a.Position.create(i,0));for(let c=n;c<t.length;c++)switch(t.charAt(c)){case" ":case"\t":break;case"\r":case"\n":if(c!==n){let t=a.TextEdit.del({start:e.positionAt(n),end:e.positionAt(c)});o.push(t)}continue e;default:if(c!==n||r[i]){let t=this.createFormattingEdit(e,n,c,r[i],s);o.push(t)}continue e}if(n<t.length){let r=a.TextEdit.del({start:e.positionAt(n),end:e.positionAt(t.length)});o.push(r)}}return o}}},2465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(2466),i=n(244),s=n(119),o=n(178);t.Dockerfile=class Dockerfile extends r.ImageTemplate{constructor(e){super(),this.initialInstructions=new r.ImageTemplate,this.buildStages=[],this.directive=null,this.foundFrom=!1,this.document=e}getEscapeCharacter(){if(null!==this.directive&&this.directive.getDirective()===o.Directive.escape){let e=this.directive.getValue();if("\\"===e||"`"===e)return e}return"\\"}getInitialARGs(){return this.initialInstructions.getARGs()}getContainingImage(e){let t=a.Range.create(a.Position.create(0,0),this.document.positionAt(this.document.getText().length));if(!s.Util.isInsideRange(e,t))return null;for(let t of this.buildStages)if(t.contains(e))return t;let n=this.initialInstructions.getInstructions();if(n.length>0&&(this.initialInstructions.contains(e)||n[n.length-1].getRange().end.line>=e.line))return this.initialInstructions;if(this.buildStages.length>0){if(this.buildStages[0].getInstructions()[0].getRange().start.line>e.line&&this.initialInstructions.getInstructions().length>0)return this.buildStages[0];let t=this.buildStages[this.buildStages.length-1].getInstructions();if(t[t.length-1].getRange().end.line<e.line)return this;for(let t=0;t<this.buildStages.length-1;t++){let n=this.buildStages[t].getInstructions(),r=this.buildStages[t+1].getInstructions(),i=a.Range.create(n[n.length-1].getRange().end,r[0].getRange().start);if(s.Util.isInsideRange(e,i))return this.buildStages[t+1]}}return this}addInstruction(e){e.getKeyword()===o.Keyword.FROM?(this.currentBuildStage=new r.ImageTemplate,this.buildStages.push(this.currentBuildStage),this.foundFrom=!0):this.foundFrom||this.initialInstructions.addInstruction(e),this.foundFrom&&this.currentBuildStage.addInstruction(e),super.addInstruction(e)}setDirective(e){this.directive=e}getDirective(){return this.directive}resolveVariable(e,t){for(let n of this.getFROMs()){let a=n.getRange();if(a.start.line<=t&&t<=a.end.line){let n=new r.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}}let n=this.getContainingImage(a.Position.create(t,0)).resolveVariable(e,t);if(null===n){let n=new r.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}return n}getAvailableVariables(e){if(this.getInstructionAt(e)instanceof i.From){let e=[];for(let t of this.getInitialARGs()){let n=t.getProperty();n&&e.push(n.getName())}return e}let t=this.getContainingImage(a.Position.create(e,0));return t?t.getAvailableVariables(e):[]}}},2466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(362),i=n(364),s=n(365),o=n(366),c=n(367),u=n(244),l=n(368),g=n(369),d=n(119);t.ImageTemplate=class ImageTemplate{constructor(){this.comments=[],this.instructions=[]}addComment(e){this.comments.push(e)}getComments(){return this.comments}addInstruction(e){this.instructions.push(e)}getInstructions(){return this.instructions}getInstructionAt(e){for(let t of this.instructions)if(d.Util.isInsideRange(a.Position.create(e,0),t.getRange()))return t;return null}getARGs(){let e=[];for(let t of this.instructions)t instanceof r.Arg&&e.push(t);return e}getCMDs(){let e=[];for(let t of this.instructions)t instanceof i.Cmd&&e.push(t);return e}getCOPYs(){let e=[];for(let t of this.instructions)t instanceof s.Copy&&e.push(t);return e}getENTRYPOINTs(){let e=[];for(let t of this.instructions)t instanceof c.Entrypoint&&e.push(t);return e}getENVs(){let e=[];for(let t of this.instructions)t instanceof o.Env&&e.push(t);return e}getFROMs(){let e=[];for(let t of this.instructions)t instanceof u.From&&e.push(t);return e}getHEALTHCHECKs(){let e=[];for(let t of this.instructions)t instanceof l.Healthcheck&&e.push(t);return e}getOnbuildTriggers(){let e=[];for(let t of this.instructions)if(t instanceof g.Onbuild){let n=t.getTriggerInstruction();n&&e.push(n)}return e}getAvailableVariables(e){const t=[];for(const n of this.getARGs())if(n.isBefore(e)){const e=n.getProperty();if(e){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}}for(const n of this.getENVs())if(n.isBefore(e))for(const e of n.getProperties()){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}return t}resolveVariable(e,t){let n=this.getENVs();for(let a=n.length-1;a>=0;a--)if(n[a].isBefore(t))for(let t of n[a].getProperties())if(t.getName()===e)return t.getValue();let a=this.getARGs();for(let n=a.length-1;n>=0;n--)if(a[n].isBefore(t)){let t=a[n].getProperty();if(t&&t.getName()===e)return t.getValue()}}contains(e){const t=this.instructions[0].getRange(),n=this.instructions[this.instructions.length-1].getRange();return d.Util.isInsideRange(e,a.Range.create(t.start,n.end))}}},2467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(178),i=n(812);t.KEYWORDS=["ADD","ARG","CMD","COPY","ENTRYPOINT","ENV","EXPOSE","FROM","HEALTHCHECK","LABEL","MAINTAINER","ONBUILD","RUN","SHELL","STOPSIGNAL","USER","VOLUME","WORKDIR"];class Validator{constructor(e){this.settings={deprecatedMaintainer:i.ValidationSeverity.WARNING,directiveCasing:i.ValidationSeverity.WARNING,emptyContinuationLine:i.ValidationSeverity.WARNING,instructionCasing:i.ValidationSeverity.WARNING,instructionCmdMultiple:i.ValidationSeverity.WARNING,instructionEntrypointMultiple:i.ValidationSeverity.WARNING,instructionHealthcheckMultiple:i.ValidationSeverity.WARNING,instructionJSONInSingleQuotes:i.ValidationSeverity.WARNING,instructionWorkdirRelative:i.ValidationSeverity.WARNING},e&&(this.settings=e)}parseDirective(e,t){let n=e.getDirective();if(null===n)return;let a=n.getDirective(),i=n.getValue();if(a===r.Directive.escape){if("\\"!==i&&"`"!==i&&""!==i){let e=n.getValueRange();t.push(Validator.createInvalidEscapeDirective(e.start,e.end,i))}if(n.getName()!==r.Directive.escape){let e=n.getNameRange(),a=this.createLowercaseDirective(e.start,e.end);a&&t.push(a)}}}checkArguments(e,t,n,a,i){let s=e instanceof r.PropertyInstruction?e.getPropertyArguments():e.getArguments();if(0===s.length){let n=e.getInstructionRange();t.push(Validator.createMissingArgument(n.start,n.end))}else if(-1===n[0])for(let e=0;e<s.length;e++){let n=a(e,s[e].getValue(),s[e].getRange());if(n){let a=s[e].getRange();t.push(n(a.start,a.end,s[e].getValue()))}}else{for(let e=0;e<n.length;e++)if(n[e]===s.length){for(let e=0;e<s.length;e++){let n=s[e].getRange(),r=a(e,s[e].getValue(),n);r instanceof Function?t.push(r(n.start,n.end,s[e].getValue())):null!==r&&t.push(r)}return}let e=s[s.length-1].getRange();i?t.push(i(e.start,e.end)):t.push(Validator.createExtraArgument(e.start,e.end))}}checkVariables(e,t){for(let n of e.getVariables()){let e=n.getModifier();null!==e&&(""===e?t.push(Validator.createVariableUnsupportedModifier(n.getRange(),n.toString(),e)):"+"!==e&&"-"!==e&&t.push(Validator.createVariableUnsupportedModifier(n.getModifierRange(),n.toString(),e)))}}checkProperty(e,t,n,a,r,i,s){let o=a.getName();if(""===o){let e=a.getRange();s.push(Validator.createSyntaxMissingNames(e.start,e.end,n))}else if(-1!==o.indexOf("=")){let t=a.getNameRange(),n=e.getText(t),r=n.indexOf("=");return void("'"===n.charAt(0)?s.push(Validator.createSyntaxMissingSingleQuote(t.start,e.positionAt(e.offsetAt(t.start)+r),n.substring(0,n.indexOf("=")))):'"'===n.charAt(0)&&s.push(Validator.createSyntaxMissingDoubleQuote(t.start,e.positionAt(e.offsetAt(t.start)+r),n.substring(0,n.indexOf("=")))))}let c=a.getValue();if(null===c){if(!i){let e=a.getNameRange();r?s.push(Validator.createENVRequiresTwoArguments(e.start,e.end)):s.push(Validator.createSyntaxMissingEquals(e.start,e.end,o))}}else if('"'===c.charAt(0)){let e=!1;for(let n=1;n<c.length;n++)switch(c.charAt(n)){case t:n++;break;case'"':n===c.length-1&&(e=!0)}if(!e){let e=a.getValueRange();s.push(Validator.createSyntaxMissingDoubleQuote(e.start,e.end,a.getUnescapedValue()))}}else if("'"===c.charAt(0)&&"'"!==c.charAt(c.length-1)){let e=a.getValueRange();s.push(Validator.createSyntaxMissingSingleQuote(e.start,e.end,c))}}validate(e){this.document=e;let t=[],n=r.DockerfileParser.parse(e.getText());this.parseDirective(n,t);let a=n.getInstructions();0!==a.length&&n.getARGs().length!==a.length||t.push(Validator.createNoSourceImage(e.positionAt(0),e.positionAt(0)));let i=[],s=[],o=[],c=[];for(let e of a)e instanceof r.Cmd?i.push(e):e instanceof r.Entrypoint?s.push(e):e instanceof r.Healthcheck?o.push(e):e instanceof r.From&&(i.length>1&&(c=c.concat(i)),s.length>1&&(c=c.concat(s)),o.length>1&&(c=c.concat(o)),i=[],s=[],o=[]);i.length>1&&(c=c.concat(i)),s.length>1&&(c=c.concat(s)),o.length>1&&(c=c.concat(o));for(let e of c)if(e instanceof r.Cmd){let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionCmdMultiple,"CMD");n&&t.push(n)}else if(e instanceof r.Entrypoint){let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionEntrypointMultiple,"ENTRYPOINT");n&&t.push(n)}else{let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionHealthcheckMultiple,"HEALTHCHECK");n&&t.push(n)}const u={},l=n.getFROMs();for(let e of l){let t=e.getBuildStage();t&&(u[t=t.toLowerCase()]||(u[t]=[]),u[t].push(e.getBuildStageRange()))}for(let e in u)if(u[e].length>1)for(let n of u[e])t.push(Validator.createDuplicateBuildStageName(n,e));let g=n.getEscapeCharacter(),d=!1;for(let a of n.getInstructions()){let n=a.getKeyword();if("FROM"===n)d=!0;else if(!d&&"ARG"!==n){let e=a.getInstructionRange();t.push(Validator.createNoSourceImage(e.start,e.end)),d=!0}this.validateInstruction(e,g,a,n,!1,t),this.checkVariables(a,t)}for(let a of n.getOnbuildTriggers())this.validateInstruction(e,g,a,a.getKeyword(),!0,t);return t}validateInstruction(e,n,r,i,s,o){if(-1===t.KEYWORDS.indexOf(i)){let e=r.getInstructionRange();o.push(Validator.createUnknownInstruction(e.start,e.end,i))}else{if(i!==r.getInstruction()){let e=r.getInstructionRange(),t=this.createUppercaseInstruction(e.start,e.end);t&&o.push(t)}if("MAINTAINER"===i){let e=r.getInstructionRange(),t=this.createMaintainerDeprecated(e.start,e.end);t&&o.push(t)}const t=r.getRange();if(t.start.line!==t.end.line&&!s){const n=e.getText(),r=t.end.line;let i=-1;for(let s=t.start.line;s<=r;s++){if(0===n.substring(e.offsetAt(a.Position.create(s,0)),e.offsetAt(a.Position.create(s+1,0))).trim().length){if(-1===i){i=s;continue}}else if(-1!==i){const e=Validator.createEmptyContinuationLine(a.Position.create(i,0),a.Position.create(s,0),this.settings.emptyContinuationLine);e&&o.push(e),i=-1}}if(-1!==i){const e=Validator.createEmptyContinuationLine(a.Position.create(i,0),a.Position.create(r+1,0),this.settings.emptyContinuationLine);e&&o.push(e),i=-1}}switch(i){case"CMD":this.checkJSONQuotes(r,o);break;case"ENTRYPOINT":case"RUN":case"VOLUME":this.checkArguments(r,o,[-1],function(){return null}),this.checkJSONQuotes(r,o);break;case"ARG":this.checkArguments(r,o,[-1],function(e){return e>0?Validator.createARGRequiresOneArgument:null},Validator.createARGRequiresOneArgument);let t=r.getProperty();t&&this.checkProperty(e,n,i,t,!0,!0,o);break;case"ENV":case"LABEL":this.checkArguments(r,o,[-1],function(){return null});let a=r.getProperties();if(1===a.length)this.checkProperty(e,n,i,a[0],!0,!1,o);else if(0!==a.length)for(let t of a)this.checkProperty(e,n,i,t,!1,!1,o);break;case"FROM":this.checkArguments(r,o,[1,3],function(t,n,a){switch(t){case 0:for(let e of r.getVariables())if(Validator.rangeContains(a,e.getRange()))return null;let i=r,s=i.getImageDigestRange();if(null===s){let t=i.getImageTagRange();if(null===t)return null;let n=e.getText(t);return""===n?Validator.createInvalidReferenceFormat(a):new RegExp(/^[\w][\w.-]{0,127}$/).test(n)?null:Validator.createInvalidReferenceFormat(i.getImageTagRange())}let o=e.getText(s),c=o.indexOf(":");if(-1===c)return""===o?Validator.createInvalidReferenceFormat(a):Validator.createInvalidReferenceFormat(i.getImageDigestRange());let u=new RegExp(/[A-Fa-f0-9_+.-]+/),l=o.substring(0,c);if(!u.test(l))return Validator.createInvalidReferenceFormat(i.getImageDigestRange());let g=o.substring(c+1);return new RegExp(/[A-Fa-f0-9]+/).test(g)?null:Validator.createInvalidReferenceFormat(i.getImageDigestRange());case 1:return"AS"===n.toUpperCase()?null:Validator.createInvalidAs;case 2:return n=n.toLowerCase(),new RegExp(/^[a-z]([a-z0-9_\-.]*)*$/).test(n)?null:Validator.createInvalidBuildStageName(a,n);default:return null}},Validator.createRequiresOneOrThreeArguments);break;case"HEALTHCHECK":let s=r.getArguments();const c=r.getFlags();if(0===s.length)o.push(Validator.createHEALTHCHECKRequiresAtLeastOneArgument(r.getInstructionRange()));else{const e=s[0].getValue().toUpperCase();if("NONE"===e){if(s.length>1){const e=s[1].getRange().start,t=s[s.length-1].getRange().end;o.push(Validator.createHealthcheckNoneUnnecessaryArgument(e,t))}break}if("CMD"===e){if(1===s.length){const e=s[0].getRange();o.push(Validator.createHealthcheckCmdArgumentMissing(e.start,e.end))}}else o.push(Validator.createHealthcheckTypeUnknown(s[0].getRange(),e))}const u=["interval","retries","start-period","timeout"];for(const e of c){const t=e.getName();if(-1===u.indexOf(t)){const n=e.getRange();o.push(Validator.createUnknownHealthcheckFlag(n.start,""===t?n.end:e.getNameRange().end,e.getName()))}else if("retries"===t){const t=e.getValue();if(t){const n=e.getValueRange(),a=parseInt(t);isNaN(a)||-1!==t.indexOf(".")?o.push(Validator.createInvalidSyntax(n.start,n.end,t)):a<1&&o.push(Validator.createFlagAtLeastOne(n.start,n.end,"--retries",a.toString()))}}}this.checkFlagValue(c,u,o),this.checkFlagDuration(c,["interval","start-period","timeout"],o),this.checkDuplicateFlags(c,u,o);break;case"ONBUILD":this.checkArguments(r,o,[-1],function(){return null});let l=r,g=l.getTrigger();switch(g){case"FROM":case"MAINTAINER":o.push(Validator.createOnbuildTriggerDisallowed(l.getTriggerRange(),g));break;case"ONBUILD":o.push(Validator.createOnbuildChainingDisallowed(l.getTriggerRange()))}break;case"SHELL":this.checkArguments(r,o,[-1],function(){return null}),this.checkJSON(e,r,o);break;case"STOPSIGNAL":this.checkArguments(r,o,[1],function(e,t){if(0===t.indexOf("SIG")||-1!=t.indexOf("$"))return null;for(var n=0;n<t.length;n++)if("0">t.charAt(n)||"9"<t.charAt(n))return Validator.createInvalidStopSignal;return null});let d=r.getExpandedArguments();if(1===d.length){let e=d[0].getValue(),t=r.getVariables();if(0===t.length){if(-1!==e.indexOf("$")){let t=d[0].getRange();o.push(Validator.createInvalidStopSignal(t.start,t.end,e))}}else for(let n of t){let t=n.getRange(),a=this.document.getText().substring(this.document.offsetAt(t.start),this.document.offsetAt(t.end));if(e.includes(a)&&!n.isDefined()){let e=d[0].getRange();o.push(Validator.createInvalidStopSignal(e.start,e.end,""));break}}}break;case"EXPOSE":let h=r.getExpandedArguments();if(0===h.length){let e=r.getInstructionRange();o.push(Validator.createMissingArgument(e.start,e.end))}else{const e=/^([0-9])+(-[0-9]+)?(:([0-9])+(-[0-9]*)?)?(\/(\w*))?(\/\w*)*$/;e:for(let t=0;t<h.length;t++){const n=h[t].getValue(),a=e.exec(n);if(a){if(a[7]){const e=a[7].toLowerCase();if(""!==e&&"tcp"!==e&&"udp"!==e&&"sctp"!==e){const n=h[t].getRange(),r=this.document.offsetAt(n.start),i=this.document.getText().substring(r,this.document.offsetAt(n.end)),s=r+i.indexOf(a[7].substring(0,1)),c=1===e.length?r+s+1:r+i.length;o.push(Validator.createInvalidProto(this.document.positionAt(s),this.document.positionAt(c),a[7]))}}}else{let e=r.getVariables();for(let t of e){let e=t.getRange(),a=this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end));if(n.includes(a))continue e}o.push(Validator.createInvalidPort(h[t].getRange(),n))}}}break;case"ADD":const m=r,f=r.getArguments();if(1===f.length)if(m.getClosingBracket()){const e=m.getJSONStrings();if(0===e.length)o.push(Validator.createADDRequiresAtLeastTwoArguments(r.getArgumentsRange()));else if(1===e.length)o.push(Validator.createADDRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){const t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&o.push(Validator.createADDDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else o.push(Validator.createADDRequiresAtLeastTwoArguments(f[0].getRange()));else if(0===f.length)o.push(Validator.createADDRequiresAtLeastTwoArguments(r.getInstructionRange()));else if(2===f.length){if(m.getClosingBracket()){const e=m.getJSONStrings();if(0===e.length)o.push(Validator.createADDRequiresAtLeastTwoArguments(r.getArgumentsRange()));else if(1===e.length)o.push(Validator.createADDRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){const t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&o.push(Validator.createADDDestinationNotDirectory(e[e.length-1].getJSONRange()))}}}else if(m.getClosingBracket()){const e=m.getJSONStrings();if(e.length>2){const t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&o.push(Validator.createADDDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else{const e=f[f.length-1].getValue(),t=e.charAt(e.length-1);"\\"!==t&&"/"!==t&&o.push(Validator.createADDDestinationNotDirectory(f[f.length-1].getRange()))}const p=m.getFlags();for(let e of p){const t=e.getName(),n=e.getRange();if(""===t)o.push(Validator.createUnknownAddFlag(n.start,n.end,t));else if("chown"!==t){let a=e.getNameRange();o.push(Validator.createUnknownAddFlag(n.start,a.end,t))}}this.checkFlagValue(p,["chown"],o),this.checkDuplicateFlags(p,["chown"],o),this.checkJSONQuotes(r,o);break;case"COPY":let A=r,_=r.getArguments(),R=A.getFlags();if(R.length>0){for(let e of R){const t=e.getName(),n=e.getRange();if(""===t)o.push(Validator.createUnknownCopyFlag(n.start,n.end,t));else if("from"!==t&&"chown"!==t){let a=e.getNameRange();o.push(Validator.createUnknownCopyFlag(n.start,a.end,t))}}let e=A.getFromFlag();if(e){let t=e.getValue();if(null!==t){if(!new RegExp(/^[a-zA-Z0-9].*$/).test(t)){let n=""===t?e.getRange():e.getValueRange();o.push(Validator.createFlagInvalidFrom(n.start,n.end,t))}}}}if(1===_.length)if(A.getClosingBracket()){const e=A.getJSONStrings();if(0===e.length)o.push(Validator.createCOPYRequiresAtLeastTwoArguments(r.getArgumentsRange()));else if(1===e.length)o.push(Validator.createCOPYRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){let t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&o.push(Validator.createCOPYDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else o.push(Validator.createCOPYRequiresAtLeastTwoArguments(_[0].getRange()));else if(0===_.length)o.push(Validator.createCOPYRequiresAtLeastTwoArguments(r.getInstructionRange()));else if(2===_.length){if(A.getClosingBracket()){const e=A.getJSONStrings();if(0===e.length)o.push(Validator.createCOPYRequiresAtLeastTwoArguments(r.getArgumentsRange()));else if(1===e.length)o.push(Validator.createCOPYRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){let t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&o.push(Validator.createCOPYDestinationNotDirectory(e[e.length-1].getJSONRange()))}}}else if(A.getClosingBracket()){let e=A.getJSONStrings();if(e.length>2){let t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&o.push(Validator.createCOPYDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else{let e=_[_.length-1].getValue(),t=e.charAt(e.length-1);"\\"!==t&&"/"!==t&&o.push(Validator.createCOPYDestinationNotDirectory(_[_.length-1].getRange()))}this.checkFlagValue(R,["chown","from"],o),this.checkDuplicateFlags(R,["chown","from"],o),this.checkJSONQuotes(r,o);break;case"WORKDIR":this.checkArguments(r,o,[-1],function(){return null});let I=r.getArgumentsContent();if(I){let e=new RegExp(/^(\$|([a-zA-Z](\$|:(\$|\\|\/)))).*$/);if(!I.startsWith("/")&&!e.test(I)){let e=this.createWORKDIRNotAbsolute(r.getArgumentsRange());e&&o.push(e)}}break;default:this.checkArguments(r,o,[-1],function(){return null})}}}checkFlagValue(e,t,n){for(let a of e){let e=a.getName();if(null===a.getValue()&&-1!==t.indexOf(e)){let t=a.getNameRange();n.push(Validator.createFlagMissingValue(t.start,t.end,e))}}}checkFlagDuration(e,t,n){e:for(let a of e){let e=a.getName();if(-1!==t.indexOf(e)){let t=a.getValue();if(null!==t&&0!==t.length){switch(t.charAt(0)){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":case"-":break;default:let e=a.getValueRange();n.push(Validator.createFlagInvalidDuration(e.start,e.end,t));continue e}let r=!1,i=0,s=0,o=!1,c=!1,u=0;t:for(let l=0;l<t.length;l++)switch(r=!1,t.charAt(l)){case"-":if(o){let e=a.getValueRange();n.push(Validator.createFlagUnknownUnit(e,t.charAt(l),t));continue e}if(c){let e=a.getValueRange();n.push(Validator.createFlagInvalidDuration(e.start,e.end,t));continue e}c=!0;continue;case".":u++;continue;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=!0;continue;default:if(u>1){let e=a.getValueRange();n.push(Validator.createFlagMissingDuration(e.start,e.end,t));continue e}u=0;let g=parseFloat(t.substring(i,l));for(let o=l+1;o<t.length;o++)if(Validator.isNumberRelated(t.charAt(o))){let c=t.substring(l,o);if(g<0||"-"===t.charAt(i)&&0===g){let t=a.getNameRange();n.push(Validator.createFlagLessThan1ms(t.start,t.end,e));continue e}switch(c){case"h":s+=1e3*g*60*60,i=l=o-1,r=!0;continue t;case"m":s+=1e3*g*60,i=l=o-1,r=!0;continue t;case"s":s+=1e3*g,i=l=o-1,r=!0;continue t;case"ms":s+=g,i=l=o-1,r=!0;continue t;case"us":case"µs":s+=g/1e3,i=l=o-1,r=!0;continue t;case"ns":s+=g/1e6,i=l=o-1,r=!0;continue t;default:let e=a.getValueRange();n.push(Validator.createFlagUnknownUnit(e,c,t));continue e}}if(g<0||"-"===t.charAt(i)&&0===g){let t=a.getNameRange();n.push(Validator.createFlagLessThan1ms(t.start,t.end,e));continue e}let d=t.substring(l,t.length);switch(d){case"h":s+=1e3*g*60*60,r=!0;break t;case"m":s+=1e3*g*60,r=!0;break t;case"s":s+=1e3*g,r=!0;break t;case"ms":s+=g,r=!0;break t;case"us":case"µs":s+=g/1e3,r=!0;break t;case"ns":s+=g/1e6,r=!0;break t;default:let e=a.getValueRange();n.push(Validator.createFlagUnknownUnit(e,d,t))}continue e}if(r){if(s<1){let t=a.getNameRange();n.push(Validator.createFlagLessThan1ms(t.start,t.end,e))}}else{let e=a.getValueRange();n.push(Validator.createFlagMissingDuration(e.start,e.end,t))}}}}}static isNumberRelated(e){switch(e){case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return!0}return!1}checkDuplicateFlags(e,t,n){let a=e.map(function(e){return e.getName()});for(let r of t){let t=a.indexOf(r),i=a.lastIndexOf(r);if(t!==i){let r=e[t].getNameRange();n.push(Validator.createFlagDuplicate(r.start,r.end,a[t])),r=e[i].getNameRange(),n.push(Validator.createFlagDuplicate(r.start,r.end,a[t]))}}}checkJSON(e,t,n){if(null===t.getArgumentsContent())return;let a=t.getArgumentsRange(),r=t.getArguments();if(1===r.length&&"[]"===r[0].getValue()||2===r.length&&"["===r[0].getValue()&&"]"===r[1].getValue())return void n.push(Validator.createShellRequiresOne(a));const i=t.getClosingBracket();if(i){let r=e.getText();'"'!==(r=(r=r.substring(e.offsetAt(t.getOpeningBracket().getRange().end),e.offsetAt(i.getRange().start))).trim()).charAt(r.length-1)&&n.push(Validator.createShellJsonForm(a))}else n.push(Validator.createShellJsonForm(a))}checkJSONQuotes(e,t){let n=e.getArgumentsContent();if(null===n)return;let a=e.getArgumentsRange(),r=e.getArguments();if(1===r.length&&"[]"===r[0].getValue()||2===r.length&&"["===r[0].getValue()&&"]"===r[1].getValue())return;let i=!1,s=null,o=!1;e:for(let e=0;e<n.length;e++)switch(n.charAt(e)){case"[":null===s&&(s="[",i=!0);break;case"'":if("["===s||","===s){o=!0,s="'";continue}if("'"!==s)break e;if(!o)break e;o=!1;break;case",":if(!i)break e;if(!o){if("'"!==s)break e;s=","}break;case"]":if(!o){if("'"===s||","===s){s=null;const e=Validator.createJSONInSingleQuotes(a,this.settings.instructionJSONInSingleQuotes);e&&t.push(e)}break e}break;case" ":case"\t":break;default:if(!o)break e}}static formatMessage(e,...t){for(let n=0;n<t.length;n++)e=e.replace("${"+n+"}",t[n]);return e}static getDiagnosticMessage_DirectiveCasing(){return Validator.dockerProblems.directiveCasing}static getDiagnosticMessage_DirectiveEscapeInvalid(e){return Validator.formatMessage(Validator.dockerProblems.directiveEscapeInvalid,e)}static getDiagnosticMessage_NoSourceImage(){return Validator.dockerProblems.noSourceImage}static getDiagnosticMessage_EmptyContinuationLine(){return Validator.dockerProblems.emptyContinuationLine}static getDiagnosticMessage_DuplicateBuildStageName(e){return Validator.formatMessage(Validator.dockerProblems.duplicateBuildStageName,e)}static getDiagnosticMessage_InvalidBuildStageName(e){return Validator.formatMessage(Validator.dockerProblems.invalidBuildStageName,e)}static getDiagnosticMessage_FlagAtLeastOne(e,t){return Validator.formatMessage(Validator.dockerProblems.flagAtLeastOne,e,t)}static getDiagnosticMessage_FlagDuplicate(e){return Validator.formatMessage(Validator.dockerProblems.flagDuplicate,e)}static getDiagnosticMessage_FlagInvalidDuration(e){return Validator.formatMessage(Validator.dockerProblems.flagInvalidDuration,e)}static getDiagnosticMessage_FlagLessThan1ms(e){return Validator.formatMessage(Validator.dockerProblems.flagLessThan1ms,e)}static getDiagnosticMessage_FlagMissingDuration(e){return Validator.formatMessage(Validator.dockerProblems.flagMissingDuration,e)}static getDiagnosticMessage_FlagInvalidFromValue(e){return Validator.formatMessage(Validator.dockerProblems.flagInvalidFrom,e)}static getDiagnosticMessage_FlagMissingValue(e){return Validator.formatMessage(Validator.dockerProblems.flagMissingValue,e)}static getDiagnosticMessage_FlagUnknown(e){return Validator.formatMessage(Validator.dockerProblems.flagUnknown,e)}static getDiagnosticMessage_FlagUnknownUnit(e,t){return Validator.formatMessage(Validator.dockerProblems.flagUnknownUnit,e,t)}static getDiagnosticMessage_InvalidAs(){return Validator.dockerProblems.invalidAs}static getDiagnosticMessage_InvalidPort(e){return Validator.formatMessage(Validator.dockerProblems.invalidPort,e)}static getDiagnosticMessage_InvalidProto(e){return Validator.formatMessage(Validator.dockerProblems.invalidProtocol,e)}static getDiagnosticMessage_InvalidReferenceFormat(){return Validator.dockerProblems.invalidReferenceFormat}static getDiagnosticMessage_InvalidSignal(e){return Validator.formatMessage(Validator.dockerProblems.invalidStopSignal,e)}static getDiagnosticMessage_InvalidSyntax(e){return Validator.formatMessage(Validator.dockerProblems.invalidSyntax,e)}static getDiagnosticMessage_InstructionExtraArgument(){return Validator.dockerProblems.instructionExtraArgument}static getDiagnosticMessage_InstructionMissingArgument(){return Validator.dockerProblems.instructionMissingArgument}static getDiagnosticMessage_ADDDestinationNotDirectory(){return Validator.formatMessage(Validator.dockerProblems.invalidDestination,"ADD")}static getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresAtLeastTwoArguments,"ADD")}static getDiagnosticMessage_ARGRequiresOneArgument(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresOneArgument,"ARG")}static getDiagnosticMessage_COPYDestinationNotDirectory(){return Validator.formatMessage(Validator.dockerProblems.invalidDestination,"COPY")}static getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresAtLeastTwoArguments,"COPY")}static getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresAtLeastOneArgument,"HEALTHCHECK")}static getDiagnosticMessage_ENVRequiresTwoArguments(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresTwoArguments,"ENV")}static getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(){return Validator.dockerProblems.fromRequiresOneOrThreeArguments}static getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(){return Validator.formatMessage(Validator.dockerProblems.instructionUnnecessaryArgument,"HEALTHCHECK NONE")}static getDiagnosticMessage_InstructionMultiple(e){return Validator.formatMessage(Validator.dockerProblems.instructionMultiple,e)}static getDiagnosticMessage_InstructionUnknown(e){return Validator.formatMessage(Validator.dockerProblems.instructionUnknown,e)}static getDiagnosticMessage_SyntaxMissingEquals(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingEquals,e)}static getDiagnosticMessage_SyntaxMissingNames(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingNames,e)}static getDiagnosticMessage_SyntaxMissingSingleQuote(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingSingleQuote,e)}static getDiagnosticMessage_SyntaxMissingDoubleQuote(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingDoubleQuote,e)}static getDiagnosticMessage_InstructionCasing(){return Validator.dockerProblems.instructionCasing}static getDiagnosticMessage_InstructionJSONInSingleQuotes(){return Validator.dockerProblems.instructionJSONInSingleQuotes}static getDiagnosticMessage_OnbuildChainingDisallowed(){return Validator.dockerProblems.onbuildChainingDisallowed}static getDiagnosticMessage_OnbuildTriggerDisallowed(e){return Validator.formatMessage(Validator.dockerProblems.onbuildTriggerDisallowed,e)}static getDiagnosticMessage_VariableModifierUnsupported(e,t){return Validator.formatMessage(Validator.dockerProblems.variableModifierUnsupported,e,t)}static getDiagnosticMessage_ShellJsonForm(){return Validator.dockerProblems.shellJsonForm}static getDiagnosticMessage_ShellRequiresOne(){return Validator.dockerProblems.shellRequiresOne}static getDiagnosticMessage_DeprecatedMaintainer(){return Validator.dockerProblems.deprecatedMaintainer}static getDiagnosticMessage_HealthcheckCmdArgumentMissing(){return Validator.dockerProblems.healthcheckCmdArgumentMissing}static getDiagnosticMessage_HealthcheckTypeUnknown(e){return Validator.formatMessage(Validator.dockerProblems.healthcheckTypeUnknown,e)}static getDiagnosticMessage_WORKDIRPathNotAbsolute(){return Validator.formatMessage(Validator.dockerProblems.workdirPathNotAbsolute)}static createInvalidEscapeDirective(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_DirectiveEscapeInvalid(n),i.ValidationCode.INVALID_ESCAPE_DIRECTIVE)}static createDuplicateBuildStageName(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_DuplicateBuildStageName(t),i.ValidationCode.DUPLICATE_BUILD_STAGE_NAME)}static createInvalidBuildStageName(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InvalidBuildStageName(t),i.ValidationCode.INVALID_BUILD_STAGE_NAME)}static createFlagAtLeastOne(e,t,n,a){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagAtLeastOne(n,a),i.ValidationCode.FLAG_AT_LEAST_ONE)}static createFlagDuplicate(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagDuplicate(n),i.ValidationCode.FLAG_DUPLICATE)}static createFlagInvalidDuration(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagInvalidDuration(n),i.ValidationCode.FLAG_INVALID_DURATION)}static createFlagLessThan1ms(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagLessThan1ms(n),i.ValidationCode.FLAG_LESS_THAN_1MS)}static createFlagMissingDuration(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagMissingDuration(n),i.ValidationCode.FLAG_MISSING_DURATION)}static createFlagInvalidFrom(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagInvalidFromValue(n),i.ValidationCode.FLAG_INVALID_FROM_VALUE)}static createFlagMissingValue(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagMissingValue(n),i.ValidationCode.FLAG_MISSING_VALUE)}static createUnknownAddFlag(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagUnknown(n),i.ValidationCode.UNKNOWN_ADD_FLAG)}static createUnknownCopyFlag(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagUnknown(n),i.ValidationCode.UNKNOWN_COPY_FLAG)}static createUnknownHealthcheckFlag(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagUnknown(n),i.ValidationCode.UNKNOWN_HEALTHCHECK_FLAG)}static createFlagUnknownUnit(e,t,n){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_FlagUnknownUnit(t,n),i.ValidationCode.FLAG_UNKNOWN_UNIT)}static createInvalidAs(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidAs(),i.ValidationCode.INVALID_AS)}static createInvalidPort(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InvalidPort(t),i.ValidationCode.INVALID_PORT)}static createInvalidProto(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidProto(n),i.ValidationCode.INVALID_PROTO)}static createInvalidReferenceFormat(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InvalidReferenceFormat(),i.ValidationCode.INVALID_REFERENCE_FORMAT)}static createInvalidStopSignal(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidSignal(n),i.ValidationCode.INVALID_SIGNAL)}static createInvalidSyntax(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidSyntax(n),i.ValidationCode.INVALID_SYNTAX)}static createMissingArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionMissingArgument(),i.ValidationCode.ARGUMENT_MISSING)}static createExtraArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionExtraArgument(),i.ValidationCode.ARGUMENT_EXTRA)}static createHealthcheckNoneUnnecessaryArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(),i.ValidationCode.ARGUMENT_UNNECESSARY)}static createARGRequiresOneArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_ARGRequiresOneArgument(),i.ValidationCode.ARGUMENT_REQUIRES_ONE)}static createADDDestinationNotDirectory(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ADDDestinationNotDirectory(),i.ValidationCode.INVALID_DESTINATION)}static createADDRequiresAtLeastTwoArguments(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(),i.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createCOPYDestinationNotDirectory(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_COPYDestinationNotDirectory(),i.ValidationCode.INVALID_DESTINATION)}static createCOPYRequiresAtLeastTwoArguments(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(),i.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createENVRequiresTwoArguments(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_ENVRequiresTwoArguments(),i.ValidationCode.ARGUMENT_REQUIRES_TWO)}static createHEALTHCHECKRequiresAtLeastOneArgument(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(),i.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_ONE)}static createHealthcheckCmdArgumentMissing(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_HealthcheckCmdArgumentMissing(),i.ValidationCode.HEALTHCHECK_CMD_ARGUMENT_MISSING)}static createHealthcheckTypeUnknown(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_HealthcheckTypeUnknown(t),i.ValidationCode.UNKNOWN_TYPE)}static createOnbuildChainingDisallowed(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_OnbuildChainingDisallowed(),i.ValidationCode.ONBUILD_CHAINING_DISALLOWED)}static createOnbuildTriggerDisallowed(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_OnbuildTriggerDisallowed(t),i.ValidationCode.ONBUILD_TRIGGER_DISALLOWED)}static createShellJsonForm(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ShellJsonForm(),i.ValidationCode.SHELL_JSON_FORM)}static createShellRequiresOne(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ShellRequiresOne(),i.ValidationCode.SHELL_REQUIRES_ONE)}static createRequiresOneOrThreeArguments(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(),i.ValidationCode.ARGUMENT_REQUIRES_ONE_OR_THREE)}static createNoSourceImage(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_NoSourceImage(),i.ValidationCode.NO_SOURCE_IMAGE)}static createSyntaxMissingEquals(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingEquals(n),i.ValidationCode.SYNTAX_MISSING_EQUALS)}static createSyntaxMissingSingleQuote(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingSingleQuote(n),i.ValidationCode.SYNTAX_MISSING_SINGLE_QUOTE)}static createSyntaxMissingDoubleQuote(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingDoubleQuote(n),i.ValidationCode.SYNTAX_MISSING_DOUBLE_QUOTE)}static createSyntaxMissingNames(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingNames(n),i.ValidationCode.SYNTAX_MISSING_NAMES)}static createVariableUnsupportedModifier(e,t,n){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_VariableModifierUnsupported(t,n),i.ValidationCode.UNSUPPORTED_MODIFIER)}static createUnknownInstruction(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionUnknown(n),i.ValidationCode.UNKNOWN_INSTRUCTION)}static createError(e,t,n,r){return Validator.createDiagnostic(a.DiagnosticSeverity.Error,e,t,n,r)}static createJSONInSingleQuotes(e,t){return t===i.ValidationSeverity.ERROR?Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InstructionJSONInSingleQuotes(),i.ValidationCode.JSON_IN_SINGLE_QUOTES):t===i.ValidationSeverity.WARNING?Validator.createWarning(e.start,e.end,Validator.getDiagnosticMessage_InstructionJSONInSingleQuotes(),i.ValidationCode.JSON_IN_SINGLE_QUOTES):null}static createEmptyContinuationLine(e,t,n){return n===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_EmptyContinuationLine(),i.ValidationCode.EMPTY_CONTINUATION_LINE):n===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_EmptyContinuationLine(),i.ValidationCode.EMPTY_CONTINUATION_LINE):null}createMultipleInstructions(e,t,n){return t===i.ValidationSeverity.ERROR?Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InstructionMultiple(n),i.ValidationCode.MULTIPLE_INSTRUCTIONS):t===i.ValidationSeverity.WARNING?Validator.createWarning(e.start,e.end,Validator.getDiagnosticMessage_InstructionMultiple(n),i.ValidationCode.MULTIPLE_INSTRUCTIONS):null}createLowercaseDirective(e,t){return this.settings.directiveCasing===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_DirectiveCasing(),i.ValidationCode.CASING_DIRECTIVE):this.settings.directiveCasing===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_DirectiveCasing(),i.ValidationCode.CASING_DIRECTIVE):null}createUppercaseInstruction(e,t){return this.settings.instructionCasing===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionCasing(),i.ValidationCode.CASING_INSTRUCTION):this.settings.instructionCasing===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_InstructionCasing(),i.ValidationCode.CASING_INSTRUCTION):null}createMaintainerDeprecated(e,t){return this.settings.deprecatedMaintainer===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_DeprecatedMaintainer(),i.ValidationCode.DEPRECATED_MAINTAINER):this.settings.deprecatedMaintainer===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_DeprecatedMaintainer(),i.ValidationCode.DEPRECATED_MAINTAINER):null}createWORKDIRNotAbsolute(e){return this.settings.instructionWorkdirRelative===i.ValidationSeverity.ERROR?Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_WORKDIRPathNotAbsolute(),i.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):this.settings.instructionWorkdirRelative===i.ValidationSeverity.WARNING?Validator.createWarning(e.start,e.end,Validator.getDiagnosticMessage_WORKDIRPathNotAbsolute(),i.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):null}static createWarning(e,t,n,r){return Validator.createDiagnostic(a.DiagnosticSeverity.Warning,e,t,n,r)}static createDiagnostic(e,t,n,a,r){return{range:{start:t,end:n},message:a,severity:e,code:r,source:"dockerfile-utils"}}static rangeContains(e,t){if(e.start.line===t.start.line){if(e.end.line===t.end.line)return e.start.character<=t.start.character&&e.end.character>=t.end.character}else{if(e.end.line===t.end.line)return e.start.line<t.start.line&&e.end.character>=t.end.character;if(e.start.line<t.start.line)return e.end.line===t.end.line?e.end.character>=t.end.character:e.end.line>t.end.line}return!1}}Validator.dockerProblems={directiveCasing:"Parser directives should be written in lowercase letters",directiveEscapeInvalid:"invalid ESCAPE '${0}'. Must be ` or \\",noSourceImage:"No source image provided with `FROM`",emptyContinuationLine:"Empty continuation line",fromRequiresOneOrThreeArguments:"FROM requires either one or three arguments",invalidAs:"Second argument should be AS",invalidPort:"Invalid containerPort: ${0}",invalidProtocol:"Invalid proto: ${0}",invalidReferenceFormat:"invalid reference format",invalidStopSignal:"Invalid signal: ${0}",invalidSyntax:'parsing "${0}": invalid syntax',invalidDestination:"When using ${0} with more than one source file, the destination must be a directory and end with a / or a \\",syntaxMissingEquals:'Syntax error - can\'t find = in "${0}". Must be of the form: name=value',syntaxMissingNames:"${0} names can not be blank",syntaxMissingSingleQuote:'failed to process "${0}": unexpected end of statement while looking for matching single-quote',syntaxMissingDoubleQuote:'failed to process "${0}": unexpected end of statement while looking for matching double-quote',duplicateBuildStageName:"duplicate name ${0}",invalidBuildStageName:'invalid name for build stage: "${0}", name can\'t start with a number or contain symbols',flagAtLeastOne:"${0} must be at least 1 (not ${1})",flagDuplicate:"Duplicate flag specified: ${0}",flagInvalidDuration:"time: invalid duration ${0}",flagInvalidFrom:"invalid from flag value ${0}: invalid reference format",flagLessThan1ms:'Interval "${0}" cannot be less than 1ms',flagMissingDuration:"time: missing unit in duration ${0}",flagMissingValue:"Missing a value on flag: ${0}",flagUnknown:"Unknown flag: ${0}",flagUnknownUnit:"time: unknown unit ${0} in duration ${1}",instructionExtraArgument:"Instruction has an extra argument",instructionMissingArgument:"Instruction has no arguments",instructionMultiple:"There can only be one ${0} instruction in a Dockerfile",instructionRequiresOneArgument:"${0} requires exactly one argument",instructionRequiresAtLeastOneArgument:"${0} requires at least one argument",instructionRequiresAtLeastTwoArguments:"${0} requires at least two arguments",instructionRequiresTwoArguments:"${0} must have two arguments",instructionUnnecessaryArgument:"${0} takes no arguments",instructionUnknown:"Unknown instruction: ${0}",instructionCasing:"Instructions should be written in uppercase letters",instructionJSONInSingleQuotes:"Instruction written as a JSON array but is using single quotes instead of double quotes",variableModifierUnsupported:'failed to process "${0}": unsupported modifier (${1}) in substitution',onbuildChainingDisallowed:"Chaining ONBUILD via `ONBUILD ONBUILD` isn't allowed",onbuildTriggerDisallowed:"${0} isn't allowed as an ONBUILD trigger",shellJsonForm:"SHELL requires the arguments to be in JSON form",shellRequiresOne:"SHELL requires at least one argument",deprecatedMaintainer:"MAINTAINER has been deprecated",healthcheckCmdArgumentMissing:"Missing command after HEALTHCHECK CMD",healthcheckTypeUnknown:'Unknown type"${0}" in HEALTHCHECK (try CMD)',workdirPathNotAbsolute:"WORKDIR paths should be absolute"},t.Validator=Validator},2468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(370),i=n(2473),s=n(2474),o=n(2475),c=n(2476),u=n(840),l=n(841),g=n(2477),d=n(2478),h=n(2479),m=n(380),f=n(2480),p=n(2481),A=n(842),_=n(2482),R=n(2483),I=function(){function e(){this.markdownDocumentation=new A.MarkdownDocumentation,this.plainTextDocumentation=new m.PlainTextDocumentation,this.snippetSupport=!1,this.deprecatedSupport=!1,this.foldingRangeLineFoldingOnly=!1,this.foldingRangeLimit=Number.MAX_VALUE}return e.prototype.setLogger=function(e){this.logger=e},e.prototype.setCapabilities=function(e){this.completionDocumentationFormat=e&&e.completion&&e.completion.completionItem&&e.completion.completionItem.documentationFormat,this.hoverContentFormat=e&&e.hover&&e.hover.contentFormat,this.snippetSupport=e&&e.completion&&e.completion.completionItem&&e.completion.completionItem.snippetSupport,this.deprecatedSupport=e&&e.completion&&e.completion.completionItem&&e.completion.completionItem.deprecatedSupport,this.foldingRangeLineFoldingOnly=e&&e.foldingRange&&e.foldingRange.lineFoldingOnly,this.foldingRangeLimit=e&&e.foldingRange&&e.foldingRange.rangeLimit},e.prototype.computeCodeActions=function(e,t,n){return(new o.DockerCommands).analyzeDiagnostics(n.diagnostics,e.uri)},e.prototype.computeLinks=function(e){return(new h.DockerLinks).getLinks(e)},e.prototype.resolveLink=function(e){return(new h.DockerLinks).resolveLink(e)},e.prototype.computeCommandEdits=function(e,t,n){return(new o.DockerCommands).computeCommandEdits(e,t,n)},e.prototype.computeCompletionItems=function(e,t){var n=a.TextDocument.create("","",0,e);return new i.DockerAssist(n,new s.DockerRegistryClient(this.logger),this.snippetSupport,this.deprecatedSupport).computeProposals(t)},e.prototype.resolveCompletionItem=function(e){return e.documentation?e:(new R.DockerCompletion).resolveCompletionItem(e,this.completionDocumentationFormat)},e.prototype.computeDefinition=function(e,t,n){return(new u.DockerDefinition).computeDefinition(e,t,n)},e.prototype.computeFoldingRanges=function(e){return(new c.DockerFolding).computeFoldingRanges(e,this.foldingRangeLineFoldingOnly,this.foldingRangeLimit)},e.prototype.computeHighlightRanges=function(e,t){return(new l.DockerHighlight).computeHighlightRanges(e,t)},e.prototype.computeHover=function(e,t){return new p.DockerHover(this.markdownDocumentation,this.plainTextDocumentation).onHover(e,t,this.hoverContentFormat)},e.prototype.computeSymbols=function(e,t){return(new g.DockerSymbols).parseSymbolInformation(e,t)},e.prototype.computeSignatureHelp=function(e,t){return(new d.DockerSignatures).computeSignatures(e,t)},e.prototype.computeRename=function(e,t,n,a){return(new f.DockerRename).rename(e,t,n,a)},e.prototype.prepareRename=function(e,t){return(new f.DockerRename).prepareRename(e,t)},e.prototype.validate=function(e,t){return r.validate(e,t)},e.prototype.format=function(e,t){return r.format(e,t)},e.prototype.formatRange=function(e,t,n){return(new _.DockerFormatter).formatRange(e,t,n)},e.prototype.formatOnType=function(e,t,n,a){return(new _.DockerFormatter).formatOnType(e,t,n,a)},e}();t.LanguageService=I},2469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(50);t.DockerFormatter=class DockerFormatter{getIndentation(e){let t="\t";if(e&&e.insertSpaces){t="";for(let n=0;n<e.tabSize;n++)t+=" "}return t}createFormattingEdit(e,t,n,r,i){return r?a.TextEdit.replace({start:e.positionAt(t),end:e.positionAt(n)},i):a.TextEdit.del({start:e.positionAt(t),end:e.positionAt(n)})}formatOnType(e,t,n,a){const i=r.DockerfileParser.parse(e.getText());if(i.getEscapeCharacter()===n){for(let e of i.getComments())if(e.getRange().start.line===t.line)return[];if(i.getDirective()&&0===t.line)return[];const n=e.getText();e:for(let a=e.offsetAt(t);a<n.length;a++)switch(n.charAt(a)){case" ":case"\t":break;case"\r":case"\n":break e;default:return[]}const r=[t.line+1],s=[];return s[r[0]]=!0,this.formatLines(e,e.getText(),r,s,a)}return[]}formatRange(e,t,n){const a=[];for(let e=t.start.line;e<=t.end.line;e++)a.push(e);return this.format(e,a,n)}formatDocument(e,t){const n=[];for(let t=0;t<e.lineCount;t++)n.push(t);return this.format(e,n,t)}format(e,t,n){let a=e.getText(),i=r.DockerfileParser.parse(a);const s=[];for(let t=0;t<e.lineCount;t++)s[t]=!1;for(let e of i.getInstructions()){let t=e.getRange();s[t.start.line]=!1;for(let e=t.start.line+1;e<=t.end.line;e++)s[e]=!0}return this.formatLines(e,a,t,s,n)}formatLines(e,t,n,r,i){const s=this.getIndentation(i),o=[];e:for(let i of n){let n=e.offsetAt(a.Position.create(i,0));for(let c=n;c<t.length;c++)switch(t.charAt(c)){case" ":case"\t":break;case"\r":case"\n":if(c!==n){let t=a.TextEdit.del({start:e.positionAt(n),end:e.positionAt(c)});o.push(t)}continue e;default:if(c!==n||r[i]){let t=this.createFormattingEdit(e,n,c,r[i],s);o.push(t)}continue e}if(n<t.length){let r=a.TextEdit.del({start:e.positionAt(n),end:e.positionAt(t.length)});o.push(r)}}return o}}},247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(86);t.From=class From extends r.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getImage(){return this.getRangeContent(this.getImageRange())}getImageName(){return this.getRangeContent(this.getImageNameRange())}getImageNameRange(){let e=this.getImageRange();if(e){let t=this.getRegistryRange();t&&(e.start=this.document.positionAt(this.document.offsetAt(t.end)+1));let n=this.getImageTagRange(),a=this.getImageDigestRange();return null===n?null!==a&&(e.end=this.document.positionAt(this.document.offsetAt(a.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(n.start)-1),e}return null}getImageRange(){let e=this.getArguments();return 0!==e.length?e[0].getRange():null}getImageTag(){return this.getRangeContent(this.getImageTagRange())}getImageTagRange(){const e=this.getImageRange();if(e&&null===this.getImageDigestRange()){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,":");if(n>t.indexOf("/"))return a.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}getImageDigest(){return this.getRangeContent(this.getImageDigestRange())}getImageDigestRange(){let e=this.getImageRange();if(e){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,"@");if(-1!==n)return a.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}indexOf(e,t,n){let a=t.indexOf(n);const r=this.getVariables();for(let i=0;i<r.length;i++){const s=e+a,o=r[i].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){const r=this.document.offsetAt(o.end)-e,s=t.substring(r).indexOf(n);if(-1===s)return-1;a=s+r,i=-1}}return a}lastIndexOf(e,t,n){let a=t.lastIndexOf(n);const r=this.getVariables();for(let i=0;i<r.length;i++){const s=e+a,o=r[i].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){if(-1===(a=t.substring(0,a).lastIndexOf(n)))return-1;i=-1}}return a}getRegistry(){return this.getRangeContent(this.getRegistryRange())}getRegistryRange(){const e=this.getImageRange();if(e){const t=this.getImageTagRange(),n=this.getImageDigestRange();null===t?null!==n&&(e.end=this.document.positionAt(this.document.offsetAt(n.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(t.start)-1);const r=this.getRangeContent(e),i=this.indexOf(this.document.offsetAt(e.start),r,":"),s=this.indexOf(this.document.offsetAt(e.start),r,"/"),o=this.lastIndexOf(this.document.offsetAt(e.start),r,"/");if(-1!==s&&s!==o||-1!==i){const t=this.document.offsetAt(e.start);return a.Range.create(e.start,this.document.positionAt(t+s))}}return null}getBuildStage(){let e=this.getBuildStageRange();return null===e?null:this.getRangeContent(e)}getBuildStageRange(){let e=this.getArguments();return 3===e.length&&"AS"===e[1].getValue().toUpperCase()?e[2].getRange():null}}},2470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(2471),i=n(247),s=n(120),o=n(50);t.Dockerfile=class Dockerfile extends r.ImageTemplate{constructor(e){super(),this.initialInstructions=new r.ImageTemplate,this.buildStages=[],this.directive=null,this.foundFrom=!1,this.document=e}getEscapeCharacter(){if(null!==this.directive&&this.directive.getDirective()===o.Directive.escape){let e=this.directive.getValue();if("\\"===e||"`"===e)return e}return"\\"}getInitialARGs(){return this.initialInstructions.getARGs()}getContainingImage(e){let t=a.Range.create(a.Position.create(0,0),this.document.positionAt(this.document.getText().length));if(!s.Util.isInsideRange(e,t))return null;if((this.initialInstructions.getComments().length>0||this.initialInstructions.getInstructions().length>0)&&s.Util.isInsideRange(e,this.initialInstructions.getRange()))return this.initialInstructions;for(const t of this.buildStages)if(s.Util.isInsideRange(e,t.getRange()))return t;return this}addInstruction(e){e.getKeyword()===o.Keyword.FROM?(this.currentBuildStage=new r.ImageTemplate,this.buildStages.push(this.currentBuildStage),this.foundFrom=!0):this.foundFrom||this.initialInstructions.addInstruction(e),this.foundFrom&&this.currentBuildStage.addInstruction(e),super.addInstruction(e)}setDirective(e){this.directive=e}getDirective(){return this.directive}resolveVariable(e,t){for(let n of this.getFROMs()){let a=n.getRange();if(a.start.line<=t&&t<=a.end.line){let n=new r.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}}let n=this.getContainingImage(a.Position.create(t,0));if(null===n)return;let i=n.resolveVariable(e,t);if(null===i){let n=new r.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}return i}getAvailableVariables(e){if(this.getInstructionAt(e)instanceof i.From){let e=[];for(let t of this.getInitialARGs()){let n=t.getProperty();n&&e.push(n.getName())}return e}let t=this.getContainingImage(a.Position.create(e,0));return t?t.getAvailableVariables(e):[]}organizeComments(){const e=this.getComments();for(let t=0;t<e.length;t++)if(s.Util.isInsideRange(e[t].getRange().end,this.initialInstructions.getRange()))this.initialInstructions.addComment(e[t]);else for(const n of this.buildStages)s.Util.isInsideRange(e[t].getRange().start,n.getRange())&&n.addComment(e[t])}getRange(){const e=this.getComments(),t=this.getInstructions();let n=null;if(0===e.length)t.length>0&&(n=a.Range.create(t[0].getRange().start,t[t.length-1].getRange().end));else if(0===t.length)n=a.Range.create(e[0].getRange().start,e[e.length-1].getRange().end);else{const r=e[0].getRange().start,i=e[e.length-1].getRange().end,s=t[0].getRange().start,o=t[t.length-1].getRange().end;r.line<s.line?(i.line<o.line&&(n=a.Range.create(r,o)),n=a.Range.create(r,i)):n=i.line<o.line?a.Range.create(s,o):a.Range.create(s,i)}return null===n?null===this.directive?null:this.directive.getRange():null===this.directive?n:a.Range.create(this.directive.getRange().start,n.end)}}},2471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(372),i=n(374),s=n(375),o=n(376),c=n(377),u=n(247),l=n(378),g=n(379),d=n(120);t.ImageTemplate=class ImageTemplate{constructor(){this.comments=[],this.instructions=[]}addComment(e){this.comments.push(e)}getComments(){return this.comments}addInstruction(e){this.instructions.push(e)}getInstructions(){return this.instructions}getInstructionAt(e){for(let t of this.instructions)if(d.Util.isInsideRange(a.Position.create(e,0),t.getRange()))return t;return null}getARGs(){let e=[];for(let t of this.instructions)t instanceof r.Arg&&e.push(t);return e}getCMDs(){let e=[];for(let t of this.instructions)t instanceof i.Cmd&&e.push(t);return e}getCOPYs(){let e=[];for(let t of this.instructions)t instanceof s.Copy&&e.push(t);return e}getENTRYPOINTs(){let e=[];for(let t of this.instructions)t instanceof c.Entrypoint&&e.push(t);return e}getENVs(){let e=[];for(let t of this.instructions)t instanceof o.Env&&e.push(t);return e}getFROMs(){let e=[];for(let t of this.instructions)t instanceof u.From&&e.push(t);return e}getHEALTHCHECKs(){let e=[];for(let t of this.instructions)t instanceof l.Healthcheck&&e.push(t);return e}getOnbuildTriggers(){let e=[];for(let t of this.instructions)if(t instanceof g.Onbuild){let n=t.getTriggerInstruction();n&&e.push(n)}return e}getAvailableVariables(e){const t=[];for(const n of this.getARGs())if(n.isBefore(e)){const e=n.getProperty();if(e){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}}for(const n of this.getENVs())if(n.isBefore(e))for(const e of n.getProperties()){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}return t}resolveVariable(e,t){let n=this.getENVs();for(let a=n.length-1;a>=0;a--)if(n[a].isBefore(t))for(let t of n[a].getProperties())if(t.getName()===e)return t.getValue();let a=this.getARGs();for(let n=a.length-1;n>=0;n--)if(a[n].isBefore(t)){let t=a[n].getProperty();if(t&&t.getName()===e)return t.getValue()}}getRange(){const e=this.getInstructions();if(0===e.length)return a.Range.create(0,0,0,0);const t=e[0].getRange().start,n=e[e.length-1].getRange().end;return a.Range.create(t,n)}contains(e){const t=this.getRange();return null!==t&&d.Util.isInsideRange(e,t)}}},2472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(50),i=n(370);t.KEYWORDS=["ADD","ARG","CMD","COPY","ENTRYPOINT","ENV","EXPOSE","FROM","HEALTHCHECK","LABEL","MAINTAINER","ONBUILD","RUN","SHELL","STOPSIGNAL","USER","VOLUME","WORKDIR"];class Validator{constructor(e){this.settings={deprecatedMaintainer:i.ValidationSeverity.WARNING,directiveCasing:i.ValidationSeverity.WARNING,emptyContinuationLine:i.ValidationSeverity.WARNING,instructionCasing:i.ValidationSeverity.WARNING,instructionCmdMultiple:i.ValidationSeverity.WARNING,instructionEntrypointMultiple:i.ValidationSeverity.WARNING,instructionHealthcheckMultiple:i.ValidationSeverity.WARNING,instructionJSONInSingleQuotes:i.ValidationSeverity.WARNING,instructionWorkdirRelative:i.ValidationSeverity.WARNING},e&&(this.settings=e)}parseDirective(e,t){let n=e.getDirective();if(null===n)return;let a=n.getDirective(),i=n.getValue();if(a===r.Directive.escape){if("\\"!==i&&"`"!==i&&""!==i){let e=n.getValueRange();t.push(Validator.createInvalidEscapeDirective(e.start,e.end,i))}if(n.getName()!==r.Directive.escape){let e=n.getNameRange(),a=this.createLowercaseDirective(e.start,e.end);a&&t.push(a)}}}checkArguments(e,t,n,a,i){let s=e instanceof r.PropertyInstruction?e.getPropertyArguments():e.getArguments();if(0===s.length){let n=e.getInstructionRange();t.push(Validator.createMissingArgument(n.start,n.end))}else if(-1===n[0])for(let e=0;e<s.length;e++){let n=a(e,s[e].getValue(),s[e].getRange());if(n){let a=s[e].getRange();t.push(n(a.start,a.end,s[e].getValue()))}}else{for(let e=0;e<n.length;e++)if(n[e]===s.length){for(let e=0;e<s.length;e++){let n=s[e].getRange(),r=a(e,s[e].getValue(),n);r instanceof Function?t.push(r(n.start,n.end,s[e].getValue())):null!==r&&t.push(r)}return}let e=s[s.length-1].getRange();i?t.push(i(e.start,e.end)):t.push(Validator.createExtraArgument(e.start,e.end))}}checkVariables(e,t){for(let n of e.getVariables()){let a=n.getModifier();if(null!==a){if(e.getKeyword()===r.Keyword.RUN)continue;""===a?t.push(Validator.createVariableUnsupportedModifier(n.getRange(),n.toString(),a)):"+"!==a&&"-"!==a&&t.push(Validator.createVariableUnsupportedModifier(n.getModifierRange(),n.toString(),a))}}}checkProperty(e,t,n,a,r,i,s){let o=a.getName();if(""===o){let e=a.getRange();s.push(Validator.createSyntaxMissingNames(e.start,e.end,n))}else if(-1!==o.indexOf("=")){let t=a.getNameRange(),n=e.getText(t),r=n.indexOf("=");return void("'"===n.charAt(0)?s.push(Validator.createSyntaxMissingSingleQuote(t.start,e.positionAt(e.offsetAt(t.start)+r),n.substring(0,n.indexOf("=")))):'"'===n.charAt(0)&&s.push(Validator.createSyntaxMissingDoubleQuote(t.start,e.positionAt(e.offsetAt(t.start)+r),n.substring(0,n.indexOf("=")))))}let c=a.getValue();if(null===c){if(!i){let e=a.getNameRange();r?s.push(Validator.createENVRequiresTwoArguments(e.start,e.end)):s.push(Validator.createSyntaxMissingEquals(e.start,e.end,o))}}else if('"'===c.charAt(0)){let e=!1;for(let n=1;n<c.length;n++)switch(c.charAt(n)){case t:n++;break;case'"':n===c.length-1&&(e=!0)}if(!e){let e=a.getValueRange();s.push(Validator.createSyntaxMissingDoubleQuote(e.start,e.end,a.getUnescapedValue()))}}else if("'"===c.charAt(0)&&"'"!==c.charAt(c.length-1)){let e=a.getValueRange();s.push(Validator.createSyntaxMissingSingleQuote(e.start,e.end,c))}}validate(e){this.document=e;let t=[],n=r.DockerfileParser.parse(e.getText());this.parseDirective(n,t);let a=n.getInstructions();0!==a.length&&n.getARGs().length!==a.length||t.push(Validator.createNoSourceImage(e.positionAt(0),e.positionAt(0)));let i=[],s=[],o=[],c=[];for(let e of a)e instanceof r.Cmd?i.push(e):e instanceof r.Entrypoint?s.push(e):e instanceof r.Healthcheck?o.push(e):e instanceof r.From&&(i.length>1&&(c=c.concat(i)),s.length>1&&(c=c.concat(s)),o.length>1&&(c=c.concat(o)),i=[],s=[],o=[]);i.length>1&&(c=c.concat(i)),s.length>1&&(c=c.concat(s)),o.length>1&&(c=c.concat(o));for(let e of c)if(e instanceof r.Cmd){let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionCmdMultiple,"CMD");n&&t.push(n)}else if(e instanceof r.Entrypoint){let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionEntrypointMultiple,"ENTRYPOINT");n&&t.push(n)}else{let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionHealthcheckMultiple,"HEALTHCHECK");n&&t.push(n)}const u={},l=n.getFROMs();for(let e of l){let t=e.getBuildStage();t&&(u[t=t.toLowerCase()]||(u[t]=[]),u[t].push(e.getBuildStageRange()))}for(let e in u)if(u[e].length>1)for(let n of u[e])t.push(Validator.createDuplicateBuildStageName(n,e));let g=n.getEscapeCharacter(),d=!1;for(let a of n.getInstructions()){let n=a.getKeyword();if("FROM"===n)d=!0;else if(!d&&"ARG"!==n){let e=a.getInstructionRange();t.push(Validator.createNoSourceImage(e.start,e.end)),d=!0}this.validateInstruction(e,g,a,n,!1,t),this.checkVariables(a,t)}for(let a of n.getOnbuildTriggers())this.validateInstruction(e,g,a,a.getKeyword(),!0,t);return t}validateInstruction(e,n,r,i,s,o){if(-1===t.KEYWORDS.indexOf(i)){let e=r.getInstructionRange();o.push(Validator.createUnknownInstruction(e.start,e.end,i))}else{if(i!==r.getInstruction()){let e=r.getInstructionRange(),t=this.createUppercaseInstruction(e.start,e.end);t&&o.push(t)}if("MAINTAINER"===i){let e=r.getInstructionRange(),t=this.createMaintainerDeprecated(e.start,e.end);t&&o.push(t)}const t=r.getRange();if(t.start.line!==t.end.line&&!s){const n=e.getText(),r=t.end.line;let i=-1;for(let s=t.start.line;s<=r;s++){if(0===n.substring(e.offsetAt(a.Position.create(s,0)),e.offsetAt(a.Position.create(s+1,0))).trim().length){if(-1===i){i=s;continue}}else if(-1!==i){const e=Validator.createEmptyContinuationLine(a.Position.create(i,0),a.Position.create(s,0),this.settings.emptyContinuationLine);e&&o.push(e),i=-1}}if(-1!==i){const e=Validator.createEmptyContinuationLine(a.Position.create(i,0),a.Position.create(r+1,0),this.settings.emptyContinuationLine);e&&o.push(e),i=-1}}switch(i){case"CMD":this.checkJSONQuotes(r,o);break;case"ENTRYPOINT":case"RUN":case"VOLUME":this.checkArguments(r,o,[-1],function(){return null}),this.checkJSONQuotes(r,o);break;case"ARG":this.checkArguments(r,o,[-1],function(e){return e>0?Validator.createARGRequiresOneArgument:null},Validator.createARGRequiresOneArgument);let t=r.getProperty();t&&this.checkProperty(e,n,i,t,!0,!0,o);break;case"ENV":case"LABEL":this.checkArguments(r,o,[-1],function(){return null});let a=r.getProperties();if(1===a.length)this.checkProperty(e,n,i,a[0],!0,!1,o);else if(0!==a.length)for(let t of a)this.checkProperty(e,n,i,t,!1,!1,o);break;case"FROM":this.checkArguments(r,o,[1,3],function(t,n,a){switch(t){case 0:let i=r.getVariables();if(i.length>0){let e=i[0].getRange();return e.start.line!==a.start.line||e.start.character!==a.start.character||e.end.line!==a.end.line||e.end.character!==a.end.character||i[0].isDefined()?null:Validator.createBaseNameEmpty(e,i[0].toString())}let s=r,o=s.getImageDigestRange();if(null===o){let t=s.getImageTagRange();if(null===t)return null;let n=e.getText(t);return""===n?Validator.createInvalidReferenceFormat(a):new RegExp(/^[\w][\w.-]{0,127}$/).test(n)?null:Validator.createInvalidReferenceFormat(s.getImageTagRange())}let c=e.getText(o),u=c.indexOf(":");if(-1===u)return""===c?Validator.createInvalidReferenceFormat(a):Validator.createInvalidReferenceFormat(s.getImageDigestRange());let l=new RegExp(/[A-Fa-f0-9_+.-]+/),g=c.substring(0,u);if(!l.test(g))return Validator.createInvalidReferenceFormat(s.getImageDigestRange());let d=c.substring(u+1);return new RegExp(/[A-Fa-f0-9]+/).test(d)?null:Validator.createInvalidReferenceFormat(s.getImageDigestRange());case 1:return"AS"===n.toUpperCase()?null:Validator.createInvalidAs;case 2:return n=n.toLowerCase(),new RegExp(/^[a-z]([a-z0-9_\-.]*)*$/).test(n)?null:Validator.createInvalidBuildStageName(a,n);default:return null}},Validator.createRequiresOneOrThreeArguments);break;case"HEALTHCHECK":let s=r.getArguments();const c=r.getFlags();if(0===s.length)o.push(Validator.createHEALTHCHECKRequiresAtLeastOneArgument(r.getInstructionRange()));else{const e=s[0].getValue().toUpperCase();if("NONE"===e){if(s.length>1){const e=s[1].getRange().start,t=s[s.length-1].getRange().end;o.push(Validator.createHealthcheckNoneUnnecessaryArgument(e,t))}break}if("CMD"===e){if(1===s.length){const e=s[0].getRange();o.push(Validator.createHealthcheckCmdArgumentMissing(e.start,e.end))}}else o.push(Validator.createHealthcheckTypeUnknown(s[0].getRange(),e))}const u=["interval","retries","start-period","timeout"];for(const e of c){const t=e.getName();if(-1===u.indexOf(t)){const n=e.getRange();o.push(Validator.createUnknownHealthcheckFlag(n.start,""===t?n.end:e.getNameRange().end,e.getName()))}else if("retries"===t){const t=e.getValue();if(t){const n=e.getValueRange(),a=parseInt(t);isNaN(a)||-1!==t.indexOf(".")?o.push(Validator.createInvalidSyntax(n.start,n.end,t)):a<1&&o.push(Validator.createFlagAtLeastOne(n.start,n.end,"--retries",a.toString()))}}}this.checkFlagValue(c,u,o),this.checkFlagDuration(c,["interval","start-period","timeout"],o),this.checkDuplicateFlags(c,u,o);break;case"ONBUILD":this.checkArguments(r,o,[-1],function(){return null});let l=r,g=l.getTrigger();switch(g){case"FROM":case"MAINTAINER":o.push(Validator.createOnbuildTriggerDisallowed(l.getTriggerRange(),g));break;case"ONBUILD":o.push(Validator.createOnbuildChainingDisallowed(l.getTriggerRange()))}break;case"SHELL":this.checkArguments(r,o,[-1],function(){return null}),this.checkJSON(e,r,o);break;case"STOPSIGNAL":this.checkArguments(r,o,[1],function(e,t){if(0===t.indexOf("SIG")||-1!=t.indexOf("$"))return null;for(var n=0;n<t.length;n++)if("0">t.charAt(n)||"9"<t.charAt(n))return Validator.createInvalidStopSignal;return null});let d=r.getExpandedArguments();if(1===d.length){let e=d[0].getValue(),t=r.getVariables();if(0===t.length){if(-1!==e.indexOf("$")){let t=d[0].getRange();o.push(Validator.createInvalidStopSignal(t.start,t.end,e))}}else for(let n of t){let t=n.getRange(),a=this.document.getText().substring(this.document.offsetAt(t.start),this.document.offsetAt(t.end));if(e.includes(a)&&!n.isBuildVariable()&&!n.isDefined()){let e=d[0].getRange();o.push(Validator.createInvalidStopSignal(e.start,e.end,""));break}}}break;case"EXPOSE":r.getArguments();let h=r.getExpandedArguments();if(0===h.length){let e=r.getInstructionRange();o.push(Validator.createMissingArgument(e.start,e.end))}else{const e=/^([0-9])+(-[0-9]+)?(:([0-9])+(-[0-9]*)?)?(\/(\w*))?(\/\w*)*$/;e:for(let t=0;t<h.length;t++){let n=h[t].getValue();'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1));const a=e.exec(n);if(a){if(a[7]){const e=a[7].toLowerCase();if(""!==e&&"tcp"!==e&&"udp"!==e&&"sctp"!==e){const n=h[t].getRange(),r=this.document.offsetAt(n.start),i=this.document.getText().substring(r,this.document.offsetAt(n.end)),s=r+i.indexOf(a[7].substring(0,1)),c=1===e.length?r+s+1:r+i.length;o.push(Validator.createInvalidProto(this.document.positionAt(s),this.document.positionAt(c),a[7]))}}}else{if("$"===n.charAt(0))continue e;o.push(Validator.createInvalidPort(h[t].getRange(),n))}}}break;case"ADD":const m=r,f=m.getFlags();for(let e of f){const t=e.getName(),n=e.getRange();if(""===t)o.push(Validator.createUnknownAddFlag(n.start,n.end,t));else if("chown"!==t){let a=e.getNameRange();o.push(Validator.createUnknownAddFlag(n.start,a.end,t))}}const p=this.checkDestinationIsDirectory(m,Validator.createADDRequiresAtLeastTwoArguments,Validator.createADDDestinationNotDirectory);null!==p&&o.push(p),this.checkFlagValue(f,["chown"],o),this.checkDuplicateFlags(f,["chown"],o),this.checkJSONQuotes(r,o);break;case"COPY":let A=r,_=A.getFlags();if(_.length>0){for(let e of _){const t=e.getName(),n=e.getRange();if(""===t)o.push(Validator.createUnknownCopyFlag(n.start,n.end,t));else if("from"!==t&&"chown"!==t){let a=e.getNameRange();o.push(Validator.createUnknownCopyFlag(n.start,a.end,t))}}let e=A.getFromFlag();if(e){let t=e.getValue();if(null!==t){if(!new RegExp(/^[a-zA-Z0-9].*$/).test(t)){let n=""===t?e.getRange():e.getValueRange();o.push(Validator.createFlagInvalidFrom(n.start,n.end,t))}}}}const R=this.checkDestinationIsDirectory(A,Validator.createCOPYRequiresAtLeastTwoArguments,Validator.createCOPYDestinationNotDirectory);null!==R&&o.push(R),this.checkFlagValue(_,["chown","from"],o),this.checkDuplicateFlags(_,["chown","from"],o),this.checkJSONQuotes(r,o);break;case"WORKDIR":this.checkArguments(r,o,[-1],function(){return null});let I=r.getArgumentsContent();if(I){let e=new RegExp(/^(\$|([a-zA-Z](\$|:(\$|\\|\/)))).*$/);if(!I.startsWith("/")&&!e.test(I)){let e=this.createWORKDIRNotAbsolute(r.getArgumentsRange());e&&o.push(e)}}break;default:this.checkArguments(r,o,[-1],function(){return null})}}}checkDestinationIsDirectory(e,t,n){if(e.getClosingBracket())return this.checkJsonDestinationIsDirectory(e,t,n);const a=e.getArguments();if(1===a.length)return t(a[0].getRange());if(0===a.length)return t(e.getInstructionRange());if(a.length>2){const t=a[a.length-1],r=e.getVariables();if(0!==r.length){const e=this.document.offsetAt(t.getRange().end),n=this.document.offsetAt(r[r.length-1].getRange().end);if(e===n||e-1===n)return null}const i=t.getValue(),s=i.charAt(i.length-1);if("\\"!==s&&"/"!==s)return n(t.getRange())}return null}checkJsonDestinationIsDirectory(e,t,n){const a=e.getJSONStrings();if(0===a.length)return t(e.getArgumentsRange());if(1===a.length)return t(a[0].getJSONRange());if(a.length>2){const t=a[a.length-1],r=e.getVariables();if(0!==r.length){const e=r[r.length-1],n=this.document.offsetAt(t.getRange().end),a=this.document.offsetAt(e.getRange().end);if(n===a||n-1===a)return null}const i=t.getValue(),s=i.charAt(i.length-2);if("\\"!==s&&"/"!==s)return n(a[a.length-1].getJSONRange())}return null}checkFlagValue(e,t,n){for(let a of e){let e=a.getName();if(null===a.getValue()&&-1!==t.indexOf(e)){let t=a.getNameRange();n.push(Validator.createFlagMissingValue(t.start,t.end,e))}}}checkFlagDuration(e,t,n){e:for(let a of e){let e=a.getName();if(-1!==t.indexOf(e)){let t=a.getValue();if(null!==t&&0!==t.length){switch(t.charAt(0)){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":case"-":break;default:let e=a.getValueRange();n.push(Validator.createFlagInvalidDuration(e.start,e.end,t));continue e}let r=!1,i=0,s=0,o=!1,c=!1,u=0;t:for(let l=0;l<t.length;l++)switch(r=!1,t.charAt(l)){case"-":if(o){let e=a.getValueRange();n.push(Validator.createFlagUnknownUnit(e,t.charAt(l),t));continue e}if(c){let e=a.getValueRange();n.push(Validator.createFlagInvalidDuration(e.start,e.end,t));continue e}c=!0;continue;case".":u++;continue;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=!0;continue;default:if(u>1){let e=a.getValueRange();n.push(Validator.createFlagMissingDuration(e.start,e.end,t));continue e}u=0;let g=parseFloat(t.substring(i,l));for(let o=l+1;o<t.length;o++)if(Validator.isNumberRelated(t.charAt(o))){let c=t.substring(l,o);if(g<0||"-"===t.charAt(i)&&0===g){let t=a.getNameRange();n.push(Validator.createFlagLessThan1ms(t.start,t.end,e));continue e}switch(c){case"h":s+=1e3*g*60*60,i=l=o-1,r=!0;continue t;case"m":s+=1e3*g*60,i=l=o-1,r=!0;continue t;case"s":s+=1e3*g,i=l=o-1,r=!0;continue t;case"ms":s+=g,i=l=o-1,r=!0;continue t;case"us":case"µs":s+=g/1e3,i=l=o-1,r=!0;continue t;case"ns":s+=g/1e6,i=l=o-1,r=!0;continue t;default:let e=a.getValueRange();n.push(Validator.createFlagUnknownUnit(e,c,t));continue e}}if(g<0||"-"===t.charAt(i)&&0===g){let t=a.getNameRange();n.push(Validator.createFlagLessThan1ms(t.start,t.end,e));continue e}let d=t.substring(l,t.length);switch(d){case"h":s+=1e3*g*60*60,r=!0;break t;case"m":s+=1e3*g*60,r=!0;break t;case"s":s+=1e3*g,r=!0;break t;case"ms":s+=g,r=!0;break t;case"us":case"µs":s+=g/1e3,r=!0;break t;case"ns":s+=g/1e6,r=!0;break t;default:let e=a.getValueRange();n.push(Validator.createFlagUnknownUnit(e,d,t))}continue e}if(r){if(s<1){let t=a.getNameRange();n.push(Validator.createFlagLessThan1ms(t.start,t.end,e))}}else{let e=a.getValueRange();n.push(Validator.createFlagMissingDuration(e.start,e.end,t))}}}}}static isNumberRelated(e){switch(e){case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return!0}return!1}checkDuplicateFlags(e,t,n){let a=e.map(function(e){return e.getName()});for(let r of t){let t=a.indexOf(r),i=a.lastIndexOf(r);if(t!==i){let r=e[t].getNameRange();n.push(Validator.createFlagDuplicate(r.start,r.end,a[t])),r=e[i].getNameRange(),n.push(Validator.createFlagDuplicate(r.start,r.end,a[t]))}}}checkJSON(e,t,n){if(null===t.getArgumentsContent())return;let a=t.getArgumentsRange(),r=t.getArguments();if(1===r.length&&"[]"===r[0].getValue()||2===r.length&&"["===r[0].getValue()&&"]"===r[1].getValue())return void n.push(Validator.createShellRequiresOne(a));const i=t.getClosingBracket();if(i){let r=e.getText();'"'!==(r=(r=r.substring(e.offsetAt(t.getOpeningBracket().getRange().end),e.offsetAt(i.getRange().start))).trim()).charAt(r.length-1)&&n.push(Validator.createShellJsonForm(a))}else n.push(Validator.createShellJsonForm(a))}checkJSONQuotes(e,t){let n=e.getArgumentsContent();if(null===n)return;let a=e.getArgumentsRange(),r=e.getArguments();if(1===r.length&&"[]"===r[0].getValue()||2===r.length&&"["===r[0].getValue()&&"]"===r[1].getValue())return;let i=!1,s=null,o=!1;e:for(let e=0;e<n.length;e++)switch(n.charAt(e)){case"[":null===s&&(s="[",i=!0);break;case"'":if("["===s||","===s){o=!0,s="'";continue}if("'"!==s)break e;if(!o)break e;o=!1;break;case",":if(!i)break e;if(!o){if("'"!==s)break e;s=","}break;case"]":if(!o){if("'"===s||","===s){s=null;const e=Validator.createJSONInSingleQuotes(a,this.settings.instructionJSONInSingleQuotes);e&&t.push(e)}break e}break;case" ":case"\t":break;default:if(!o)break e}}static formatMessage(e,...t){for(let n=0;n<t.length;n++)e=e.replace("${"+n+"}",t[n]);return e}static getDiagnosticMessage_DirectiveCasing(){return Validator.dockerProblems.directiveCasing}static getDiagnosticMessage_DirectiveEscapeInvalid(e){return Validator.formatMessage(Validator.dockerProblems.directiveEscapeInvalid,e)}static getDiagnosticMessage_NoSourceImage(){return Validator.dockerProblems.noSourceImage}static getDiagnosticMessage_EmptyContinuationLine(){return Validator.dockerProblems.emptyContinuationLine}static getDiagnosticMessage_DuplicateBuildStageName(e){return Validator.formatMessage(Validator.dockerProblems.duplicateBuildStageName,e)}static getDiagnosticMessage_InvalidBuildStageName(e){return Validator.formatMessage(Validator.dockerProblems.invalidBuildStageName,e)}static getDiagnosticMessage_FlagAtLeastOne(e,t){return Validator.formatMessage(Validator.dockerProblems.flagAtLeastOne,e,t)}static getDiagnosticMessage_FlagDuplicate(e){return Validator.formatMessage(Validator.dockerProblems.flagDuplicate,e)}static getDiagnosticMessage_FlagInvalidDuration(e){return Validator.formatMessage(Validator.dockerProblems.flagInvalidDuration,e)}static getDiagnosticMessage_FlagLessThan1ms(e){return Validator.formatMessage(Validator.dockerProblems.flagLessThan1ms,e)}static getDiagnosticMessage_FlagMissingDuration(e){return Validator.formatMessage(Validator.dockerProblems.flagMissingDuration,e)}static getDiagnosticMessage_FlagInvalidFromValue(e){return Validator.formatMessage(Validator.dockerProblems.flagInvalidFrom,e)}static getDiagnosticMessage_FlagMissingValue(e){return Validator.formatMessage(Validator.dockerProblems.flagMissingValue,e)}static getDiagnosticMessage_FlagUnknown(e){return Validator.formatMessage(Validator.dockerProblems.flagUnknown,e)}static getDiagnosticMessage_FlagUnknownUnit(e,t){return Validator.formatMessage(Validator.dockerProblems.flagUnknownUnit,e,t)}static getDiagnosticMessage_BaseNameEmpty(e){return Validator.formatMessage(Validator.dockerProblems.baseNameEmpty,e)}static getDiagnosticMessage_InvalidAs(){return Validator.dockerProblems.invalidAs}static getDiagnosticMessage_InvalidPort(e){return Validator.formatMessage(Validator.dockerProblems.invalidPort,e)}static getDiagnosticMessage_InvalidProto(e){return Validator.formatMessage(Validator.dockerProblems.invalidProtocol,e)}static getDiagnosticMessage_InvalidReferenceFormat(){return Validator.dockerProblems.invalidReferenceFormat}static getDiagnosticMessage_InvalidSignal(e){return Validator.formatMessage(Validator.dockerProblems.invalidStopSignal,e)}static getDiagnosticMessage_InvalidSyntax(e){return Validator.formatMessage(Validator.dockerProblems.invalidSyntax,e)}static getDiagnosticMessage_InstructionExtraArgument(){return Validator.dockerProblems.instructionExtraArgument}static getDiagnosticMessage_InstructionMissingArgument(){return Validator.dockerProblems.instructionMissingArgument}static getDiagnosticMessage_ADDDestinationNotDirectory(){return Validator.formatMessage(Validator.dockerProblems.invalidDestination,"ADD")}static getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresAtLeastTwoArguments,"ADD")}static getDiagnosticMessage_ARGRequiresOneArgument(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresOneArgument,"ARG")}static getDiagnosticMessage_COPYDestinationNotDirectory(){return Validator.formatMessage(Validator.dockerProblems.invalidDestination,"COPY")}static getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresAtLeastTwoArguments,"COPY")}static getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresAtLeastOneArgument,"HEALTHCHECK")}static getDiagnosticMessage_ENVRequiresTwoArguments(){return Validator.formatMessage(Validator.dockerProblems.instructionRequiresTwoArguments,"ENV")}static getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(){return Validator.dockerProblems.fromRequiresOneOrThreeArguments}static getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(){return Validator.formatMessage(Validator.dockerProblems.instructionUnnecessaryArgument,"HEALTHCHECK NONE")}static getDiagnosticMessage_InstructionMultiple(e){return Validator.formatMessage(Validator.dockerProblems.instructionMultiple,e)}static getDiagnosticMessage_InstructionUnknown(e){return Validator.formatMessage(Validator.dockerProblems.instructionUnknown,e)}static getDiagnosticMessage_SyntaxMissingEquals(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingEquals,e)}static getDiagnosticMessage_SyntaxMissingNames(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingNames,e)}static getDiagnosticMessage_SyntaxMissingSingleQuote(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingSingleQuote,e)}static getDiagnosticMessage_SyntaxMissingDoubleQuote(e){return Validator.formatMessage(Validator.dockerProblems.syntaxMissingDoubleQuote,e)}static getDiagnosticMessage_InstructionCasing(){return Validator.dockerProblems.instructionCasing}static getDiagnosticMessage_InstructionJSONInSingleQuotes(){return Validator.dockerProblems.instructionJSONInSingleQuotes}static getDiagnosticMessage_OnbuildChainingDisallowed(){return Validator.dockerProblems.onbuildChainingDisallowed}static getDiagnosticMessage_OnbuildTriggerDisallowed(e){return Validator.formatMessage(Validator.dockerProblems.onbuildTriggerDisallowed,e)}static getDiagnosticMessage_VariableModifierUnsupported(e,t){return Validator.formatMessage(Validator.dockerProblems.variableModifierUnsupported,e,t)}static getDiagnosticMessage_ShellJsonForm(){return Validator.dockerProblems.shellJsonForm}static getDiagnosticMessage_ShellRequiresOne(){return Validator.dockerProblems.shellRequiresOne}static getDiagnosticMessage_DeprecatedMaintainer(){return Validator.dockerProblems.deprecatedMaintainer}static getDiagnosticMessage_HealthcheckCmdArgumentMissing(){return Validator.dockerProblems.healthcheckCmdArgumentMissing}static getDiagnosticMessage_HealthcheckTypeUnknown(e){return Validator.formatMessage(Validator.dockerProblems.healthcheckTypeUnknown,e)}static getDiagnosticMessage_WORKDIRPathNotAbsolute(){return Validator.formatMessage(Validator.dockerProblems.workdirPathNotAbsolute)}static createInvalidEscapeDirective(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_DirectiveEscapeInvalid(n),i.ValidationCode.INVALID_ESCAPE_DIRECTIVE)}static createDuplicateBuildStageName(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_DuplicateBuildStageName(t),i.ValidationCode.DUPLICATE_BUILD_STAGE_NAME)}static createInvalidBuildStageName(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InvalidBuildStageName(t),i.ValidationCode.INVALID_BUILD_STAGE_NAME)}static createFlagAtLeastOne(e,t,n,a){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagAtLeastOne(n,a),i.ValidationCode.FLAG_AT_LEAST_ONE)}static createFlagDuplicate(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagDuplicate(n),i.ValidationCode.FLAG_DUPLICATE)}static createFlagInvalidDuration(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagInvalidDuration(n),i.ValidationCode.FLAG_INVALID_DURATION)}static createFlagLessThan1ms(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagLessThan1ms(n),i.ValidationCode.FLAG_LESS_THAN_1MS)}static createFlagMissingDuration(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagMissingDuration(n),i.ValidationCode.FLAG_MISSING_DURATION)}static createFlagInvalidFrom(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagInvalidFromValue(n),i.ValidationCode.FLAG_INVALID_FROM_VALUE)}static createFlagMissingValue(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagMissingValue(n),i.ValidationCode.FLAG_MISSING_VALUE)}static createUnknownAddFlag(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagUnknown(n),i.ValidationCode.UNKNOWN_ADD_FLAG)}static createUnknownCopyFlag(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagUnknown(n),i.ValidationCode.UNKNOWN_COPY_FLAG)}static createUnknownHealthcheckFlag(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_FlagUnknown(n),i.ValidationCode.UNKNOWN_HEALTHCHECK_FLAG)}static createFlagUnknownUnit(e,t,n){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_FlagUnknownUnit(t,n),i.ValidationCode.FLAG_UNKNOWN_UNIT)}static createBaseNameEmpty(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_BaseNameEmpty(t),i.ValidationCode.BASE_NAME_EMPTY)}static createInvalidAs(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidAs(),i.ValidationCode.INVALID_AS)}static createInvalidPort(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InvalidPort(t),i.ValidationCode.INVALID_PORT)}static createInvalidProto(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidProto(n),i.ValidationCode.INVALID_PROTO)}static createInvalidReferenceFormat(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InvalidReferenceFormat(),i.ValidationCode.INVALID_REFERENCE_FORMAT)}static createInvalidStopSignal(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidSignal(n),i.ValidationCode.INVALID_SIGNAL)}static createInvalidSyntax(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InvalidSyntax(n),i.ValidationCode.INVALID_SYNTAX)}static createMissingArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionMissingArgument(),i.ValidationCode.ARGUMENT_MISSING)}static createExtraArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionExtraArgument(),i.ValidationCode.ARGUMENT_EXTRA)}static createHealthcheckNoneUnnecessaryArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(),i.ValidationCode.ARGUMENT_UNNECESSARY)}static createARGRequiresOneArgument(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_ARGRequiresOneArgument(),i.ValidationCode.ARGUMENT_REQUIRES_ONE)}static createADDDestinationNotDirectory(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ADDDestinationNotDirectory(),i.ValidationCode.INVALID_DESTINATION)}static createADDRequiresAtLeastTwoArguments(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(),i.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createCOPYDestinationNotDirectory(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_COPYDestinationNotDirectory(),i.ValidationCode.INVALID_DESTINATION)}static createCOPYRequiresAtLeastTwoArguments(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(),i.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createENVRequiresTwoArguments(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_ENVRequiresTwoArguments(),i.ValidationCode.ARGUMENT_REQUIRES_TWO)}static createHEALTHCHECKRequiresAtLeastOneArgument(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(),i.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_ONE)}static createHealthcheckCmdArgumentMissing(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_HealthcheckCmdArgumentMissing(),i.ValidationCode.HEALTHCHECK_CMD_ARGUMENT_MISSING)}static createHealthcheckTypeUnknown(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_HealthcheckTypeUnknown(t),i.ValidationCode.UNKNOWN_TYPE)}static createOnbuildChainingDisallowed(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_OnbuildChainingDisallowed(),i.ValidationCode.ONBUILD_CHAINING_DISALLOWED)}static createOnbuildTriggerDisallowed(e,t){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_OnbuildTriggerDisallowed(t),i.ValidationCode.ONBUILD_TRIGGER_DISALLOWED)}static createShellJsonForm(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ShellJsonForm(),i.ValidationCode.SHELL_JSON_FORM)}static createShellRequiresOne(e){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_ShellRequiresOne(),i.ValidationCode.SHELL_REQUIRES_ONE)}static createRequiresOneOrThreeArguments(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(),i.ValidationCode.ARGUMENT_REQUIRES_ONE_OR_THREE)}static createNoSourceImage(e,t){return Validator.createError(e,t,Validator.getDiagnosticMessage_NoSourceImage(),i.ValidationCode.NO_SOURCE_IMAGE)}static createSyntaxMissingEquals(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingEquals(n),i.ValidationCode.SYNTAX_MISSING_EQUALS)}static createSyntaxMissingSingleQuote(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingSingleQuote(n),i.ValidationCode.SYNTAX_MISSING_SINGLE_QUOTE)}static createSyntaxMissingDoubleQuote(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingDoubleQuote(n),i.ValidationCode.SYNTAX_MISSING_DOUBLE_QUOTE)}static createSyntaxMissingNames(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_SyntaxMissingNames(n),i.ValidationCode.SYNTAX_MISSING_NAMES)}static createVariableUnsupportedModifier(e,t,n){return Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_VariableModifierUnsupported(t,n),i.ValidationCode.UNSUPPORTED_MODIFIER)}static createUnknownInstruction(e,t,n){return Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionUnknown(n),i.ValidationCode.UNKNOWN_INSTRUCTION)}static createError(e,t,n,r){return Validator.createDiagnostic(a.DiagnosticSeverity.Error,e,t,n,r)}static createJSONInSingleQuotes(e,t){return t===i.ValidationSeverity.ERROR?Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InstructionJSONInSingleQuotes(),i.ValidationCode.JSON_IN_SINGLE_QUOTES):t===i.ValidationSeverity.WARNING?Validator.createWarning(e.start,e.end,Validator.getDiagnosticMessage_InstructionJSONInSingleQuotes(),i.ValidationCode.JSON_IN_SINGLE_QUOTES):null}static createEmptyContinuationLine(e,t,n){return n===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_EmptyContinuationLine(),i.ValidationCode.EMPTY_CONTINUATION_LINE):n===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_EmptyContinuationLine(),i.ValidationCode.EMPTY_CONTINUATION_LINE):null}createMultipleInstructions(e,t,n){return t===i.ValidationSeverity.ERROR?Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_InstructionMultiple(n),i.ValidationCode.MULTIPLE_INSTRUCTIONS):t===i.ValidationSeverity.WARNING?Validator.createWarning(e.start,e.end,Validator.getDiagnosticMessage_InstructionMultiple(n),i.ValidationCode.MULTIPLE_INSTRUCTIONS):null}createLowercaseDirective(e,t){return this.settings.directiveCasing===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_DirectiveCasing(),i.ValidationCode.CASING_DIRECTIVE):this.settings.directiveCasing===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_DirectiveCasing(),i.ValidationCode.CASING_DIRECTIVE):null}createUppercaseInstruction(e,t){return this.settings.instructionCasing===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_InstructionCasing(),i.ValidationCode.CASING_INSTRUCTION):this.settings.instructionCasing===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_InstructionCasing(),i.ValidationCode.CASING_INSTRUCTION):null}createMaintainerDeprecated(e,t){return this.settings.deprecatedMaintainer===i.ValidationSeverity.ERROR?Validator.createError(e,t,Validator.getDiagnosticMessage_DeprecatedMaintainer(),i.ValidationCode.DEPRECATED_MAINTAINER):this.settings.deprecatedMaintainer===i.ValidationSeverity.WARNING?Validator.createWarning(e,t,Validator.getDiagnosticMessage_DeprecatedMaintainer(),i.ValidationCode.DEPRECATED_MAINTAINER):null}createWORKDIRNotAbsolute(e){return this.settings.instructionWorkdirRelative===i.ValidationSeverity.ERROR?Validator.createError(e.start,e.end,Validator.getDiagnosticMessage_WORKDIRPathNotAbsolute(),i.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):this.settings.instructionWorkdirRelative===i.ValidationSeverity.WARNING?Validator.createWarning(e.start,e.end,Validator.getDiagnosticMessage_WORKDIRPathNotAbsolute(),i.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):null}static createWarning(e,t,n,r){return Validator.createDiagnostic(a.DiagnosticSeverity.Warning,e,t,n,r)}static createDiagnostic(e,t,n,a,r){return{range:{start:t,end:n},message:a,severity:e,code:r,source:"dockerfile-utils"}}}Validator.dockerProblems={baseNameEmpty:"base name (${0}) should not be blank",directiveCasing:"Parser directives should be written in lowercase letters",directiveEscapeInvalid:"invalid ESCAPE '${0}'. Must be ` or \\",noSourceImage:"No source image provided with `FROM`",emptyContinuationLine:"Empty continuation line",fromRequiresOneOrThreeArguments:"FROM requires either one or three arguments",invalidAs:"Second argument should be AS",invalidPort:"Invalid containerPort: ${0}",invalidProtocol:"Invalid proto: ${0}",invalidReferenceFormat:"invalid reference format",invalidStopSignal:"Invalid signal: ${0}",invalidSyntax:'parsing "${0}": invalid syntax',invalidDestination:"When using ${0} with more than one source file, the destination must be a directory and end with a / or a \\",syntaxMissingEquals:'Syntax error - can\'t find = in "${0}". Must be of the form: name=value',syntaxMissingNames:"${0} names can not be blank",syntaxMissingSingleQuote:'failed to process "${0}": unexpected end of statement while looking for matching single-quote',syntaxMissingDoubleQuote:'failed to process "${0}": unexpected end of statement while looking for matching double-quote',duplicateBuildStageName:"duplicate name ${0}",invalidBuildStageName:'invalid name for build stage: "${0}", name can\'t start with a number or contain symbols',flagAtLeastOne:"${0} must be at least 1 (not ${1})",flagDuplicate:"Duplicate flag specified: ${0}",flagInvalidDuration:"time: invalid duration ${0}",flagInvalidFrom:"invalid from flag value ${0}: invalid reference format",flagLessThan1ms:'Interval "${0}" cannot be less than 1ms',flagMissingDuration:"time: missing unit in duration ${0}",flagMissingValue:"Missing a value on flag: ${0}",flagUnknown:"Unknown flag: ${0}",flagUnknownUnit:"time: unknown unit ${0} in duration ${1}",instructionExtraArgument:"Instruction has an extra argument",instructionMissingArgument:"Instruction has no arguments",instructionMultiple:"There can only be one ${0} instruction in a Dockerfile",instructionRequiresOneArgument:"${0} requires exactly one argument",instructionRequiresAtLeastOneArgument:"${0} requires at least one argument",instructionRequiresAtLeastTwoArguments:"${0} requires at least two arguments",instructionRequiresTwoArguments:"${0} must have two arguments",instructionUnnecessaryArgument:"${0} takes no arguments",instructionUnknown:"Unknown instruction: ${0}",instructionCasing:"Instructions should be written in uppercase letters",instructionJSONInSingleQuotes:"Instruction written as a JSON array but is using single quotes instead of double quotes",variableModifierUnsupported:'failed to process "${0}": unsupported modifier (${1}) in substitution',onbuildChainingDisallowed:"Chaining ONBUILD via `ONBUILD ONBUILD` isn't allowed",onbuildTriggerDisallowed:"${0} isn't allowed as an ONBUILD trigger",shellJsonForm:"SHELL requires the arguments to be in JSON form",shellRequiresOne:"SHELL requires at least one argument",deprecatedMaintainer:"MAINTAINER has been deprecated",healthcheckCmdArgumentMissing:"Missing command after HEALTHCHECK CMD",healthcheckTypeUnknown:'Unknown type"${0}" in HEALTHCHECK (try CMD)',workdirPathNotAbsolute:"WORKDIR paths should be absolute"},t.Validator=Validator},2473:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function o(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,o)}c((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(r=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),s=n(145),o=n(50),c=function(){function e(e,t,n,a){this.document=e,this.dockerRegistryClient=t,this.snippetSupport=n,this.deprecatedSupport=a}return e.prototype.computeProposals=function(t){var n=this.document.getText(),a=this.document.offsetAt(t),r=o.DockerfileParser.parse(n),i=r.getEscapeCharacter(),c=r.getDirective();if(null!==c&&0===t.line){var u=c.getNameRange();return t.character<=u.start.character?[this.createEscape(0,a,o.Directive.escape)]:t.character<=u.end.character?[this.createEscape(t.character-u.start.character,a,o.Directive.escape)]:[]}var l=r.getComments();if(0!==l.length)if(0===t.line){var g=l[0].getRange();if(0===g.start.line&&g.start.character<t.character){if(null===(u=l[0].getContentRange())||t.character<=u.start.character)return[this.createEscape(0,a,o.Directive.escape)];var d=l[0].getContent();if(t.character<=u.end.character){var h=d.substring(0,t.character-u.start.character);if(0===o.Directive.escape.indexOf(h.toLowerCase()))return[this.createEscape(h.length,a,o.Directive.escape)]}return[]}}else for(var m=0,f=l;m<f.length;m++){if((u=(d=f[m]).getRange()).start.line===t.line&&u.start.character<t.character&&t.character<=u.end.character)return[]}var p=e.calculateTruePrefix(n,a,i);if(""!==p){var A=p.lastIndexOf("$");if(-1!==A&&"\\"!==p.charAt(A-1)){var _=p.substring(A+1).toLowerCase(),R=_.length+1,I=[];if(""===_){for(var S=0,D=r.getAvailableVariables(t.line);S<D.length;S++){var E=D[S],N=r.resolveVariable(E,t.line);I.push(this.createVariableCompletionItem(E,R,a,!0,N))}for(var C=0,b=o.DefaultVariables;C<b.length;C++){E=b[C],N=r.resolveVariable(E,t.line);I.push(this.createVariableCompletionItem(E,R,a,!0,N))}}else{var v=!1;"{"===_.charAt(0)&&(v=!0,_=_.substring(1));for(var V=r.getAvailableVariables(t.line),k=0,T=o.DefaultVariables;k<T.length;k++){E=T[k];-1===V.indexOf(E)&&V.push(E)}for(var O=0,M=V;O<M.length;O++){if(0===(E=M[O]).toLowerCase().indexOf(_)){N=r.resolveVariable(E,t.line);I.push(this.createVariableCompletionItem(E,R,a,v,N))}}}return I.sort(function(e,t){return e.label.toLowerCase()===t.label.toLowerCase()?-1*e.label.localeCompare(t.label):e.label.localeCompare(t.label)}),I}}var P="";e:for(var y=0,L=r.getInstructions();y<L.length;y++){var w=L[y];if(s.Util.isInsideRange(t,w.getInstructionRange()))break;if(s.Util.isInsideRange(t,w.getRange()))switch(w.getKeyword()){case"ADD":return this.createAddProposals(w,t,a,p);case"COPY":return this.createCopyProposals(r,w,t,a,p);case"FROM":return this.createFromProposals(w,t,p);case"HEALTHCHECK":var U=w.getSubcommand();return U&&U.isBefore(t)?[]:this.createHealthcheckProposals(a,p);case"ONBUILD":var F=w.getArguments();if(0===F.length||s.Util.isInsideRange(t,F[0].getRange())){P="ONBUILD";break e}var x=w.getTriggerInstruction();switch(x.getKeyword()){case"ADD":return this.createAddProposals(x,t,a,p);case"COPY":return this.createCopyProposals(r,x,t,a,p);case"HEALTHCHECK":var H=x.getSubcommand();return H&&H.isBefore(t)?[]:this.createHealthcheckProposals(a,p)}return[];default:return[]}}if(""===p)return 0===r.getInstructions().length?[this.createFROM(0,a,"FROM")]:this.createProposals(s.KEYWORDS,P,0,a);for(var G=[],K=p.toUpperCase(),W=0;W<s.KEYWORDS.length;W++){if(s.KEYWORDS[W]===K)return[];0===s.KEYWORDS[W].indexOf(K)&&G.push(s.KEYWORDS[W])}return 0===G.length?[]:this.createProposals(G,P,p.length,a)},e.prototype.createProposals=function(e,t,n,a){for(var r=[],i=0;i<e.length;i++)switch(e[i]){case"ARG":this.snippetSupport?(r.push(this.createARG_NameOnly(n,a)),r.push(this.createARG_DefaultValue(n,a))):r.push(this.createARG(n,a));break;case"HEALTHCHECK":r.push(this.createHEALTHCHECK_CMD(n,a)),r.push(this.createHEALTHCHECK_NONE(n,a));break;case"FROM":case"MAINTAINER":case"ONBUILD":if(t)break;default:r.push(this.createSingleProposals(e[i],n,a))}return r},e.prototype.createAddProposals=function(e,t,n,a){var r=e.getFlags(),i=e.getArguments();return 0===i.length&&0===e.getFlags().length?[this.createADD_FlagChown(0,n)]:i.length>0&&s.Util.isInsideRange(t,i[0].getRange())&&"-"===a?[this.createADD_FlagChown(a.length,n)]:r.length>0&&"--"===r[0].toString()?[this.createADD_FlagChown(a.length,n)]:i.length>0&&s.Util.isInsideRange(t,i[0].getRange())&&0==="--chown=".indexOf(a)||r.length>0&&0==="--chown=".indexOf(r[0].toString())?[this.createADD_FlagChown(a.length,n)]:[]},e.prototype.createCopyProposals=function(e,t,n,a,r){var i=t.getFromFlag();if(i&&s.Util.isInsideRange(n,i.getValueRange())){for(var o={},c=[],u=0,l=!1,g=this.document.getText().substring(this.document.offsetAt(i.getValueRange().start),a).toLowerCase(),d=0,h=e.getFROMs();d<h.length;d++){var m=h[d];if(!t.isAfter(m))break;var f=m.getImage(),p=m.getBuildStage();if(p){var A=p.toLowerCase();0!==A.indexOf(g)||o[A]||(o[A]=!0,c.push(this.createSourceImageCompletionItem(p,f,u,g.length,a))),l=!1}else o[u]||(o[u]=!0,c.push(this.createSourceImageCompletionItem(u.toString(),f,u,g.length,a)),l=!0);u++}return l&&c.length>0&&c.pop(),c}var _=t.getFlags(),R=t.getArguments();return 0===R.length&&0===t.getFlags().length?[this.createCOPY_FlagChown(0,a),this.createCOPY_FlagFrom(0,a)]:R.length>0&&s.Util.isInsideRange(n,R[0].getRange())&&"-"===r?[this.createCOPY_FlagChown(r.length,a),this.createCOPY_FlagFrom(r.length,a)]:_.length>0&&"--"===_[0].toString()?[this.createCOPY_FlagChown(r.length,a),this.createCOPY_FlagFrom(r.length,a)]:R.length>0&&s.Util.isInsideRange(n,R[0].getRange())&&0==="--chown=".indexOf(r)||_.length>0&&0==="--chown=".indexOf(_[0].toString())?[this.createCOPY_FlagChown(r.length,a)]:R.length>0&&s.Util.isInsideRange(n,R[0].getRange())&&0==="--from=".indexOf(r)||_.length>0&&0==="--from=".indexOf(_[0].toString())?[this.createCOPY_FlagFrom(r.length,a)]:[]},e.prototype.createFromProposals=function(e,t,n){var o=this;if(s.Util.isInsideRange(t,e.getImageTagRange())){var c=n.indexOf(":"),u=n.indexOf(":");n=c===u?n.substring(c+1):n.substring(c+1,u);var l=this.dockerRegistryClient;return new Promise(function(s){return a(o,void 0,void 0,function(){var a,o,c,u,g;return r(this,function(r){switch(r.label){case 0:return a=[],[4,l.getTags(e.getImageName())];case 1:for(o=r.sent(),c=0,u=o;c<u.length;c++)0===(g=u[c]).indexOf(n)&&a.push({textEdit:this.createTextEdit(n.length,this.document.offsetAt(t),g),label:g,kind:i.CompletionItemKind.Property,insertTextFormat:i.InsertTextFormat.PlainText});return s(a),[2]}})})})}return[]},e.prototype.createHealthcheckProposals=function(e,t){var n=[];t.length<3&&0==="CMD".indexOf(t.toUpperCase())&&n.push(this.createHEALTHCHECK_CMD_Subcommand(t.length,e)),t.length<4&&0==="NONE".indexOf(t.toUpperCase())&&n.push(this.createHEALTHCHECK_NONE_Subcommand(t.length,e)),0==="--interval".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagInterval(t.length,e)),0==="--retries".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagRetries(t.length,e)),0==="--start-period".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagStartPeriod(t.length,e)),0==="--timeout".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagTimeout(t.length,e));for(var a=0;a<n.length;a++)n[a].sortText=a.toString();return n},e.calculateTruePrefix=function(e,t,n){var a=e.charAt(t-1);switch(a){case"\n":for(var r="",i=t-1;i>=0;i--)if("\n"===e.charAt(i))if(e.charAt(i-1)===n)i--;else{if("\r"!==e.charAt(i-1)||e.charAt(i-2)!==n)break;i-=2}else{if(" "===e.charAt(i)||"\t"===e.charAt(i))break;r=e.charAt(i).toUpperCase()+r}if(""!==r)return r;break;case"\r":case" ":case"\t":break;default:for(var o=a,c=t-2;c>=0&&(a=e.charAt(c),!s.Util.isWhitespace(a));c--)o=a+o;return o}return""},e.prototype.createSingleProposals=function(e,t,n){switch(e){case"ADD":return this.createADD(t,n,e);case"CMD":return this.createCMD(t,n,e);case"COPY":return this.createCOPY(t,n,e);case"ENTRYPOINT":return this.createENTRYPOINT(t,n,e);case"ENV":return this.createENV(t,n,e);case"EXPOSE":return this.createEXPOSE(t,n,e);case"FROM":return this.createFROM(t,n,e);case"LABEL":return this.createLABEL(t,n,e);case"MAINTAINER":return this.createMAINTAINER(t,n,e);case"ONBUILD":return this.createONBUILD(t,n,e);case"RUN":return this.createRUN(t,n,e);case"SHELL":return this.createSHELL(t,n,e);case"STOPSIGNAL":return this.createSTOPSIGNAL(t,n,e);case"WORKDIR":return this.createWORKDIR(t,n,e);case"VOLUME":return this.createVOLUME(t,n,e);case"USER":return this.createUSER(t,n,e)}throw new Error("Unknown keyword found: "+e)},e.prototype.createADD=function(e,t,n){return this.createKeywordCompletionItem("ADD","ADD source dest",e,t,"ADD ${1:source} ${2:dest}",n)},e.prototype.createARG=function(e,t){return this.createKeywordCompletionItem("ARG","ARG",e,t,"ARG","ARG")},e.prototype.createARG_NameOnly=function(e,t){return this.createKeywordCompletionItem("ARG","ARG name",e,t,"ARG ${1:name}","ARG_NameOnly")},e.prototype.createARG_DefaultValue=function(e,t){return this.createKeywordCompletionItem("ARG","ARG name=defaultValue",e,t,"ARG ${1:name}=${2:defaultValue}","ARG_DefaultValue")},e.prototype.createCMD=function(e,t,n){return this.createKeywordCompletionItem("CMD",'CMD [ "executable" ]',e,t,'CMD [ "${1:executable}" ]',n)},e.prototype.createCOPY=function(e,t,n){return this.createKeywordCompletionItem("COPY","COPY source dest",e,t,"COPY ${1:source} ${2:dest}",n)},e.prototype.createENTRYPOINT=function(e,t,n){return this.createKeywordCompletionItem("ENTRYPOINT",'ENTRYPOINT [ "executable" ]',e,t,'ENTRYPOINT [ "${1:executable}" ]',n)},e.prototype.createENV=function(e,t,n){return this.createKeywordCompletionItem("ENV","ENV key=value",e,t,"ENV ${1:key}=${2:value}",n)},e.prototype.createEXPOSE=function(e,t,n){return this.createKeywordCompletionItem("EXPOSE","EXPOSE port",e,t,"EXPOSE ${1:port}",n)},e.prototype.createFROM=function(e,t,n){return this.createKeywordCompletionItem("FROM","FROM baseImage",e,t,"FROM ${1:baseImage}",n)},e.prototype.createHEALTHCHECK_CMD=function(e,t){return this.snippetSupport?this.createKeywordCompletionItem("HEALTHCHECK",'HEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 CMD [ "executable" ]',e,t,'HEALTHCHECK --interval=${1:30s} --timeout=${2:30s} --start-period=${3:5s} --retries=${4:3} CMD [ "${5:executable}" ]',"HEALTHCHECK_CMD"):{data:"HEALTHCHECK_CMD",textEdit:this.createTextEdit(e,t,"HEALTHCHECK CMD"),label:"HEALTHCHECK CMD",kind:i.CompletionItemKind.Keyword,insertTextFormat:i.InsertTextFormat.PlainText}},e.prototype.createHEALTHCHECK_CMD_Subcommand=function(e,t){return this.snippetSupport?this.createKeywordCompletionItem("CMD",'CMD [ "executable" ]',e,t,'CMD [ "${1:executable}" ]',"HEALTHCHECK_CMD"):{data:"HEALTHCHECK_CMD",textEdit:this.createTextEdit(e,t,"CMD"),label:"CMD",kind:i.CompletionItemKind.Keyword,insertTextFormat:i.InsertTextFormat.PlainText}},e.prototype.createADD_FlagChown=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--chown=user:group",e,t,"--chown=${1:user:group}","ADD_FlagChown"):this.createFlagCompletionItem("--chown=",e,t,"--chown=","ADD_FlagChown")},e.prototype.createCOPY_FlagChown=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--chown=user:group",e,t,"--chown=${1:user:group}","COPY_FlagChown"):this.createFlagCompletionItem("--chown=",e,t,"--chown=","COPY_FlagChown")},e.prototype.createCOPY_FlagFrom=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--from=stage",e,t,"--from=${1:stage}","COPY_FlagFrom"):this.createFlagCompletionItem("--from=",e,t,"--from=","COPY_FlagFrom")},e.prototype.createHEALTHCHECK_FlagInterval=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--interval=30s",e,t,"--interval=${1:30s}","HEALTHCHECK_FlagInterval"):this.createFlagCompletionItem("--interval=",e,t,"--interval=","HEALTHCHECK_FlagInterval")},e.prototype.createHEALTHCHECK_FlagRetries=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--retries=3",e,t,"--retries=${1:3}","HEALTHCHECK_FlagRetries"):this.createFlagCompletionItem("--retries=",e,t,"--retries=","HEALTHCHECK_FlagRetries")},e.prototype.createHEALTHCHECK_FlagStartPeriod=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--start-period=5s",e,t,"--start-period=${1:5s}","HEALTHCHECK_FlagStartPeriod"):this.createFlagCompletionItem("--start-period=",e,t,"--start-period=","HEALTHCHECK_FlagStartPeriod")},e.prototype.createHEALTHCHECK_FlagTimeout=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--timeout=30s",e,t,"--timeout=${1:30s}","HEALTHCHECK_FlagTimeout"):this.createFlagCompletionItem("--timeout=",e,t,"--timeout=","HEALTHCHECK_FlagTimeout")},e.prototype.createHEALTHCHECK_NONE=function(e,t){return this.createPlainTextCompletionItem("HEALTHCHECK NONE",e,t,"HEALTHCHECK NONE","HEALTHCHECK_NONE")},e.prototype.createHEALTHCHECK_NONE_Subcommand=function(e,t){return this.createPlainTextCompletionItem("NONE",e,t,"NONE","HEALTHCHECK_NONE")},e.prototype.createLABEL=function(e,t,n){return this.createKeywordCompletionItem("LABEL",'LABEL key="value"',e,t,'LABEL ${1:key}="${2:value}"',n)},e.prototype.createMAINTAINER=function(e,t,n){var a=this.createKeywordCompletionItem("MAINTAINER","MAINTAINER name",e,t,"MAINTAINER ${1:name}",n);return this.deprecatedSupport&&(a.deprecated=!0),a},e.prototype.createONBUILD=function(e,t,n){return this.createKeywordCompletionItem("ONBUILD","ONBUILD INSTRUCTION",e,t,"ONBUILD ${1:INSTRUCTION}",n)},e.prototype.createRUN=function(e,t,n){return this.createKeywordCompletionItem("RUN","RUN command",e,t,"RUN ${1:command}",n)},e.prototype.createSHELL=function(e,t,n){return this.createKeywordCompletionItem("SHELL",'SHELL [ "executable" ]',e,t,'SHELL [ "${1:executable}" ]',n)},e.prototype.createSTOPSIGNAL=function(e,t,n){return this.createKeywordCompletionItem("STOPSIGNAL","STOPSIGNAL signal",e,t,"STOPSIGNAL ${1:signal}",n)},e.prototype.createUSER=function(e,t,n){return this.createKeywordCompletionItem("USER","USER daemon",e,t,"USER ${1:daemon}",n)},e.prototype.createVOLUME=function(e,t,n){return this.createKeywordCompletionItem("VOLUME",'VOLUME [ "/data" ]',e,t,'VOLUME [ "${1:/data}" ]',n)},e.prototype.createWORKDIR=function(e,t,n){return this.createKeywordCompletionItem("WORKDIR","WORKDIR /the/workdir/path",e,t,"WORKDIR ${1:/the/workdir/path}",n)},e.prototype.createEscape=function(e,t,n){return this.createKeywordCompletionItem(o.Directive.escape,"escape=`",e,t,"escape=${1:`}",n)},e.prototype.createKeywordCompletionItem=function(e,t,n,a,r,s){return this.snippetSupport||(t=e,r=e),{data:s,textEdit:this.createTextEdit(n,a,r),label:t,kind:i.CompletionItemKind.Keyword,insertTextFormat:this.snippetSupport?i.InsertTextFormat.Snippet:i.InsertTextFormat.PlainText}},e.prototype.createPlainTextCompletionItem=function(e,t,n,a,r){return{data:r,textEdit:this.createTextEdit(t,n,a),label:e,kind:i.CompletionItemKind.Keyword,insertTextFormat:i.InsertTextFormat.PlainText}},e.prototype.createFlagCompletionItem=function(e,t,n,a,r){return{data:r,textEdit:this.createTextEdit(t,n,a),label:e,kind:i.CompletionItemKind.Field,insertTextFormat:this.snippetSupport?i.InsertTextFormat.Snippet:i.InsertTextFormat.PlainText}},e.prototype.createSourceImageCompletionItem=function(e,t,n,a,r){return{textEdit:this.createTextEdit(a,r,e),label:e,documentation:t,kind:i.CompletionItemKind.Reference,insertTextFormat:i.InsertTextFormat.PlainText,sortText:n.toString()}},e.prototype.createVariableCompletionItem=function(e,t,n,a,r){return e=a?"${"+e+"}":"$"+e,{textEdit:this.createTextEdit(t,n,e),label:e,kind:i.CompletionItemKind.Variable,insertTextFormat:i.InsertTextFormat.PlainText,documentation:r}},e.prototype.createTextEdit=function(e,t,n){return 0===e?i.TextEdit.insert(this.document.positionAt(t),n):i.TextEdit.replace(i.Range.create(this.document.positionAt(t-e),this.document.positionAt(t)),n)},e}();t.DockerAssist=c},2474:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(38),r=function(){function e(e){this.logger=e}return e.prototype.getTags=function(e,t){var n=this;return-1===e.indexOf("/")&&(e="library/"+e),this.requestToken(e).then(function(a){return null===a?[]:n.listTags(a.token,e).then(function(e){if(!t)return e.tags;for(var n=[],a=0,r=e.tags;a<r.length;a++){var i=r[a];0===i.indexOf(t)&&n.push(i)}return n})})},e.prototype.requestToken=function(e){var t=this;return this.performHttpsGet({hostname:"auth.docker.io",port:443,path:"/token?service=registry.docker.io&scope=repository:"+e+":pull",headers:{Accept:"application/json"}}).catch(function(e){return t.log(e),null})},e.prototype.listTags=function(e,t){var n=this;return this.performHttpsGet({hostname:"registry-1.docker.io",port:443,path:"/v2/"+t+"/tags/list",headers:{Accept:"application/json",Authorization:"Bearer "+e}}).catch(function(e){return n.log(e),{tags:[]}})},e.prototype.performHttpsGet=function(e){return new Promise(function(t,n){var r=a.get(e,function(e){if(200!==e.statusCode){var a=new Error(e.statusMessage);a.statusCode=e.statusCode,n(a)}else{var r="";e.on("data",function(e){r+=e}),e.on("end",function(){t(JSON.parse(r))})}});r.end(),r.on("error",function(e){n(e)})})},e.prototype.log=function(e){this.logger&&this.logger.log(e.toString())},e}();t.DockerRegistryClient=r},2475:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(370),i=n(826),s=function(){function e(){}return e.prototype.analyzeDiagnostics=function(e,t){for(var n=[],a=0;a<e.length;a++)switch("string"==typeof e[a].code&&(e[a].code=parseInt(e[a].code)),e[a].code){case r.ValidationCode.CASING_DIRECTIVE:n.push({title:"Convert directive to lowercase",command:i.CommandIds.LOWERCASE,arguments:[t,e[a].range]});break;case r.ValidationCode.CASING_INSTRUCTION:n.push({title:"Convert instruction to uppercase",command:i.CommandIds.UPPERCASE,arguments:[t,e[a].range]});break;case r.ValidationCode.ARGUMENT_EXTRA:n.push({title:"Remove extra argument",command:i.CommandIds.EXTRA_ARGUMENT,arguments:[t,e[a].range]});break;case r.ValidationCode.INVALID_ESCAPE_DIRECTIVE:n.push({title:"Convert to backslash",command:i.CommandIds.DIRECTIVE_TO_BACKSLASH,arguments:[t,e[a].range]}),n.push({title:"Convert to backtick",command:i.CommandIds.DIRECTIVE_TO_BACKTICK,arguments:[t,e[a].range]});break;case r.ValidationCode.INVALID_AS:n.push({title:"Convert to AS",command:i.CommandIds.CONVERT_TO_AS,arguments:[t,e[a].range]});break;case r.ValidationCode.UNKNOWN_HEALTHCHECK_FLAG:n.push({title:"Convert to --interval",command:i.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL,arguments:[t,e[a].range]}),n.push({title:"Convert to --retries",command:i.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES,arguments:[t,e[a].range]}),n.push({title:"Convert to --start-period",command:i.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD,arguments:[t,e[a].range]}),n.push({title:"Convert to --timeout",command:i.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT,arguments:[t,e[a].range]});break;case r.ValidationCode.UNKNOWN_ADD_FLAG:n.push({title:"Convert to --chown",command:i.CommandIds.FLAG_TO_CHOWN,arguments:[t,e[a].range]});break;case r.ValidationCode.UNKNOWN_COPY_FLAG:n.push({title:"Convert to --chown",command:i.CommandIds.FLAG_TO_CHOWN,arguments:[t,e[a].range]}),n.push({title:"Convert to --from",command:i.CommandIds.FLAG_TO_COPY_FROM,arguments:[t,e[a].range]});break;case r.ValidationCode.EMPTY_CONTINUATION_LINE:e[a].range.start.line+1===e[a].range.end.line?n.push({title:"Remove empty continuation line",command:i.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE,arguments:[t,e[a].range]}):n.push({title:"Remove empty continuation lines",command:i.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE,arguments:[t,e[a].range]})}return n},e.prototype.computeCommandEdits=function(e,t,n){var r=a.TextDocument.create("","",0,e),s=n[1];switch(t){case i.CommandIds.LOWERCASE:var o=r.getText().substring(r.offsetAt(s.start),r.offsetAt(s.end));return[a.TextEdit.replace(s,o.toLowerCase())];case i.CommandIds.UPPERCASE:var c=r.getText().substring(r.offsetAt(s.start),r.offsetAt(s.end));return[a.TextEdit.replace(s,c.toUpperCase())];case i.CommandIds.EXTRA_ARGUMENT:return[a.TextEdit.del(s)];case i.CommandIds.DIRECTIVE_TO_BACKSLASH:return[a.TextEdit.replace(s,"\\")];case i.CommandIds.DIRECTIVE_TO_BACKTICK:return[a.TextEdit.replace(s,"`")];case i.CommandIds.CONVERT_TO_AS:return[a.TextEdit.replace(s,"AS")];case i.CommandIds.FLAG_TO_CHOWN:return[a.TextEdit.replace(s,"--chown")];case i.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL:return[a.TextEdit.replace(s,"--interval")];case i.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES:return[a.TextEdit.replace(s,"--retries")];case i.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD:return[a.TextEdit.replace(s,"--start-period")];case i.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT:return[a.TextEdit.replace(s,"--timeout")];case i.CommandIds.FLAG_TO_COPY_FROM:return[a.TextEdit.replace(s,"--from")];case i.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE:return[a.TextEdit.del(s)]}return null},e}();t.DockerCommands=s},2476:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(50),i=function(){function e(){}return e.prototype.createFoldingRange=function(e,t,n,r,i,s){return e?{startLine:t,endLine:n,kind:s}:a.FoldingRange.create(t,n,r,i,s)},e.prototype.getLineLength=function(e,t){for(var n=e.getText(a.Range.create(t,0,t,Number.MAX_SAFE_INTEGER)),r=n.length,i=n.charAt(r-1);"\r"===i||"\n"===i;)r--,i=n.charAt(r-1);return r},e.prototype.computeFoldingRanges=function(e,t,n){if(n<1)return[];for(var i=[],s=r.DockerfileParser.parse(e),o=a.TextDocument.create("","",0,e),c=0,u=s.getInstructions();c<u.length;c++){if((A=u[c].getRange()).start.line!==A.end.line){var l=this.getLineLength(o,A.start.line),g=this.getLineLength(o,A.end.line);if(i.push(this.createFoldingRange(t,A.start.line,A.end.line,l,g)),i.length===n)return i}}var d=s.getComments();if(d.length<2)return i;for(var h=!1,m=d[0].getRange(),f=a.Position.create(m.start.line+1,m.start.character),p=1;p<d.length;p++){var A;if((A=d[p].getRange()).start.line===f.line)f=a.Position.create(A.end.line+1,A.end.character),h=!0;else{if(h&&(i.push(this.createFoldingRange(t,m.start.line,f.line-1,m.end.character,f.character,a.FoldingRangeKind.Comment)),i.length===n))return i;m=A,f=a.Position.create(m.start.line+1,m.start.character),h=!1}}return h&&i.push(this.createFoldingRange(t,m.start.line,f.line-1,m.end.character,f.character,a.FoldingRangeKind.Comment)),i},e}();t.DockerFolding=i},2477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(50),i=function(){function e(){}return e.prototype.createSymbolInformation=function(e,t,n,a,r){return r?{name:e,location:{uri:t,range:n},kind:a,deprecated:!0}:{name:e,location:{uri:t,range:n},kind:a}},e.prototype.parseSymbolInformation=function(e,t){var n=r.DockerfileParser.parse(t),i=n.getDirective(),s=[];null!==i&&s.push(this.createSymbolInformation(i.getName(),e.uri,i.getNameRange(),a.SymbolKind.Property,!1));for(var o=0,c=n.getInstructions();o<c.length;o++){var u=c[o],l=u.getKeyword();s.push(this.createSymbolInformation(u.getInstruction(),e.uri,u.getInstructionRange(),a.SymbolKind.Function,l===r.Keyword.MAINTAINER))}return s},e}();t.DockerSymbols=i},2478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(380),i=n(50),s=n(145),o=function(){function e(){this.documentation=new r.PlainTextDocumentation}return e.prototype.computeSignatures=function(e,t){var n=a.TextDocument.create("","",0,e),r=i.DockerfileParser.parse(n.getText());if(0===t.line){var o=r.getDirective();if(null!==o&&o.getDirective()===i.Directive.escape)return{signatures:[{label:"escape=`\\`",documentation:this.documentation.getDocumentation("signatureEscape"),parameters:[{label:"\\",documentation:this.documentation.getDocumentation("signatureEscape_Param")}]}],activeSignature:0,activeParameter:0}}for(var c=0,u=r.getComments();c<u.length;c++){var l=u[c];if(s.Util.isInsideRange(t,l.getRange()))return{signatures:[],activeSignature:null,activeParameter:null}}var g=this.getInstructionSignatures(n,r.getOnbuildTriggers(),t);return g||(g=this.getInstructionSignatures(n,r.getInstructions(),t))||(g={signatures:[],activeSignature:null,activeParameter:null}),g},e.prototype.getInstructionSignatures=function(e,t,n){for(var a=0,r=t;a<r.length;a++){var i=r[a];if(s.Util.isInsideRange(n,i.getRange())){if(s.Util.isInsideRange(n,i.getInstructionRange()))return null;switch(i.getKeyword()){case"ADD":var o=i,c={label:"ADD [flags] source ... dest",documentation:this.documentation.getDocumentation("signatureAdd_Signature0"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param0")},{label:"source",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param2")},{label:"dest",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param3")}]},u={label:'ADD [flags] [ "source", ..., "dest" ]',documentation:this.documentation.getDocumentation("signatureAdd_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param0")},{label:"["},{label:'"source"',documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param3")},{label:'"dest"',documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param4")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,o,n,[u],c,!0,!1,!1,!1);case"ARG":var l={signatures:[{label:"ARG name",documentation:this.documentation.getDocumentation("signatureArg_Signature0"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature0_Param")}]},{label:"ARG name=defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param0")},{label:"defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param1")}]}],activeSignature:0,activeParameter:0},g=i.getTextContent().indexOf("=");return-1!==g&&(l={signatures:[{label:"ARG name=defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param0")},{label:"defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param1")}]}],activeSignature:0,activeParameter:0},e.offsetAt(n)>e.offsetAt(i.getRange().start)+g&&(l.activeParameter=1)),l;case"CMD":var d=i,h={label:'CMD [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureCmd_Signature0"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param3")},{label:"]"}]},m={label:'CMD [ "parameter", "parameter2", ... ]',documentation:this.documentation.getDocumentation("signatureCmd_Signature1"),parameters:[{label:"["},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param1")},{label:'"parameter2"',documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param3")},{label:"]"}]},f={label:"CMD executable parameter ...",documentation:this.documentation.getDocumentation("signatureCmd_Signature2"),parameters:[{label:"executable",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param2")}]};return this.getJSONInstructionSignatureHelp(e,d,n,[h,m],f,!1,!0,!1,!0);case"COPY":var p=i,A=p.getFromFlag();if(null!==A)if(null!==(P=A.getValueRange())&&s.Util.isInsideRange(n,P))return{signatures:[{label:"--from=stage",documentation:this.documentation.getDocumentation("signatureCopyFlagFrom"),parameters:[{label:"stage",documentation:this.documentation.getDocumentation("signatureCopyFlagFrom_Param")}]}],activeSignature:0,activeParameter:0};var _={label:"COPY [flags] source ... dest",documentation:this.documentation.getDocumentation("signatureCopy_Signature0"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param0")},{label:"source",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param2")},{label:"dest",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param3")}]},R={label:'COPY [flags] [ "source", ..., "dest" ]',documentation:this.documentation.getDocumentation("signatureCopy_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param0")},{label:"["},{label:'"source"',documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param3")},{label:'"dest"',documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param4")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,p,n,[R],_,!0,!1,!1,!1);case"ENTRYPOINT":var I=i,S={label:'ENTRYPOINT [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param3")},{label:"]"}]},D={label:"ENTRYPOINT executable parameter ...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1"),parameters:[{label:"executable",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param2")}]};return this.getJSONInstructionSignatureHelp(e,I,n,[S],D,!1,!0,!1,!0);case"ENV":var E=[{label:"ENV key value",documentation:this.documentation.getDocumentation("signatureEnv_Signature0"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature0_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature0_Param1")}]},{label:"ENV key=value",documentation:this.documentation.getDocumentation("signatureEnv_Signature1"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature1_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature1_Param1")}]},{label:"ENV key=value key2=value2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param1")},{label:"key2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param2")},{label:"value2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param3")}]}];return this.getPropertySignatureHelp(e,n,E,i.getProperties());case"EXPOSE":var N={signatures:[{label:"EXPOSE port ...",documentation:this.documentation.getDocumentation("signatureExpose"),parameters:[{label:"port",documentation:this.documentation.getDocumentation("signatureExpose_Param0")},{label:"...",documentation:this.documentation.getDocumentation("signatureExpose_Param1")}]}],activeSignature:0,activeParameter:0},C=i.getArguments();return C.length>0&&e.offsetAt(n)>e.offsetAt(C[0].getRange().end)&&(N.activeParameter=1),N;case"FROM":return this.getFromSignatureHelp(n,i);case"HEALTHCHECK":for(var b={label:"HEALTHCHECK [flags] CMD ...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature0"),parameters:[{label:"CMD"}]},v={label:"HEALTHCHECK [flags] CMD ...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1_Param0")},{label:"CMD"},{label:"...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1_Param2")}]},V={label:"HEALTHCHECK NONE",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature2"),parameters:[{label:"NONE"}]},k=i,T=k.getFlags(),O=0,M=T;O<M.length;O++){var P,y=M[O];if(null!==(P=y.getValueRange())&&s.Util.isInsideRange(n,P)){switch(y.getName()){case"interval":return{signatures:[{label:"HEALTHCHECK --interval=30s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"30s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagInterval_Param")}]}],activeSignature:0,activeParameter:0};case"retries":return{signatures:[{label:"HEALTHCHECK --retries=3 ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"3",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagRetries_Param")}]}],activeSignature:0,activeParameter:0};case"start-period":return{signatures:[{label:"HEALTHCHECK --start-period=5s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"5s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagStartPeriod_Param")}]}],activeSignature:0,activeParameter:0};case"timeout":return{signatures:[{label:"HEALTHCHECK --timeout=30s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"30s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagTimeout_Param")}]}],activeSignature:0,activeParameter:0}}break}}var L=k.getArguments();if(0==T.length&&0===L.length)return{signatures:[b,V],activeSignature:0,activeParameter:0};var w=k.getSubcommand();if(null===w)return{signatures:[v],activeSignature:0,activeParameter:0};var U=w.isBefore(n),F=w.isAfter(n),x=w.getValue();return 0==="NONE".indexOf(x.toUpperCase())?U?null:{signatures:[V],activeSignature:0,activeParameter:0}:{signatures:[v],activeSignature:0,activeParameter:U?2:F?0:1};case"LABEL":var H=[{label:"LABEL key value",documentation:this.documentation.getDocumentation("signatureLabel_Signature0"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature0_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature0_Param1")}]},{label:"LABEL key=value",documentation:this.documentation.getDocumentation("signatureLabel_Signature1"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature1_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature1_Param1")}]},{label:"LABEL key=value key2=value2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param1")},{label:"key2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param2")},{label:"value2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param3")}]}];return this.getPropertySignatureHelp(e,n,H,i.getProperties());case"MAINTAINER":return{signatures:[{label:"MAINTAINER name",documentation:this.documentation.getDocumentation("signatureMaintainer"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureMaintainer_Param")}]}],activeSignature:0,activeParameter:0};case"ONBUILD":var G=i.getArguments();return G.length>0&&G[0].isBefore(n)?null:{signatures:[{label:"ONBUILD INSTRUCTION",documentation:this.documentation.getDocumentation("signatureOnbuild"),parameters:[{label:"INSTRUCTION",documentation:this.documentation.getDocumentation("signatureOnbuild_Param")}]}],activeSignature:0,activeParameter:0};case"RUN":var K=i,W={label:"RUN command parameter ...",documentation:this.documentation.getDocumentation("signatureRun_Signature0"),parameters:[{label:"command",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param2")}]},B={label:'RUN [ "command", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureRun_Signature1"),parameters:[{label:"["},{label:'"command"',documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param3")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,K,n,[B],W,!1,!1,!1,!0);case"SHELL":var q=i,Y={signatures:[{label:'SHELL [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureShell"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureShell_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureShell_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureShell_Param3")},{label:"]"}]}],activeSignature:0,activeParameter:null};return Y.activeParameter=this.getJSONSignatureActiveParameter(e,q,n,!1,!1,!0),-1===Y.activeParameter?null:Y;case"STOPSIGNAL":return{signatures:[{label:"STOPSIGNAL signal",documentation:this.documentation.getDocumentation("signatureStopsignal"),parameters:[{label:"signal",documentation:this.documentation.getDocumentation("signatureStopsignal_Param")}]}],activeSignature:0,activeParameter:0};case"USER":var $={signatures:[{label:"USER user",documentation:this.documentation.getDocumentation("signatureUser_Signature0"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature0_Param")}]},{label:"USER user:group",documentation:this.documentation.getDocumentation("signatureUser_Signature1"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param0")},{label:"group",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param1")}]},{label:"USER uid",documentation:this.documentation.getDocumentation("signatureUser_Signature2"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature2_Param")}]},{label:"USER uid:gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param0")},{label:"gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param1")}]}],activeSignature:0,activeParameter:0},J=i.getTextContent().indexOf(":");return-1!==J&&($={signatures:[{label:"USER user:group",documentation:this.documentation.getDocumentation("signatureUser_Signature1"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param0")},{label:"group",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param1")}]},{label:"USER uid:gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param0")},{label:"gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param1")}]}],activeSignature:0,activeParameter:0},e.offsetAt(n)>e.offsetAt(i.getRange().start)+J&&($.activeParameter=1)),$;case"VOLUME":var j=i,Q={label:'VOLUME [ "/vol", ... ]',documentation:this.documentation.getDocumentation("signatureVolume_Signature1"),parameters:[{label:"["},{label:'"/vol"',documentation:this.documentation.getDocumentation("signatureVolume_Signature1_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureVolume_Signature1_Param2")},{label:"]"}]},X={label:"VOLUME /vol ...",documentation:this.documentation.getDocumentation("signatureVolume_Signature0"),parameters:[{label:"/vol",documentation:this.documentation.getDocumentation("signatureVolume_Signature0_Param0")},{label:"...",documentation:this.documentation.getDocumentation("signatureVolume_Signature0_Param1")}]};return this.getJSONInstructionSignatureHelp(e,j,n,[Q],X,!1,!0,!0,!0);case"WORKDIR":return{signatures:[{label:"WORKDIR /the/workdir/path",documentation:this.documentation.getDocumentation("signatureWorkdir"),parameters:[{label:"/the/workdir/path",documentation:this.documentation.getDocumentation("signatureWorkdir_Param")}]}],activeSignature:0,activeParameter:0}}}}return null},e.prototype.getFromSignatureHelp=function(e,t){var n=[{label:"FROM baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature0"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature0_Param")}]},{label:"FROM baseImage:tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature1"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature1_Param0")},{label:"tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature1_Param1")}]},{label:"FROM baseImage@digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature2"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature2_Param0")},{label:"digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature2_Param1")}]},{label:"FROM baseImage AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3_Param0")},{label:""},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3_Param2")}]},{label:"FROM baseImage:tag AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param0")},{label:"tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param1")},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param3")}]},{label:"FROM baseImage@digest AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param0")},{label:"digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param1")},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param3")}]}],a=t.getArguments();if(a.length>=3&&a[2].isBefore(e))return null;if(0===a.length)return{signatures:n,activeSignature:0,activeParameter:0};var r=a[0].getValue(),i=-1!==r.indexOf("@"),s=!i&&-1!==r.indexOf(":"),o=a.length>1||a[0].isBefore(e);return{signatures:this.getFromSignatures(n,s,i,o),activeSignature:0,activeParameter:this.getFromActiveParameter(e,t,s,i,a)}},e.prototype.getFromSignatures=function(e,t,n,a){return n?a?[e[5]]:[e[2],e[5]]:t?a?[e[4]]:[e[1],e[4]]:a?[e[3],e[4],e[5]]:e},e.prototype.getFromActiveParameter=function(e,t,n,a,r){var i=n&&s.Util.isInsideRange(e,t.getImageTagRange()),o=a&&s.Util.isInsideRange(e,t.getImageDigestRange());if(1===r.length){if(r[0].isBefore(e))return 2}else if(2===r.length){if(r[1].isBefore(e))return 3;if(s.Util.isInsideRange(e,r[1].getRange())||r[0].isBefore(e))return 2}else{if(s.Util.isInsideRange(e,r[2].getRange())||r[1].isBefore(e))return 3;if(s.Util.isInsideRange(e,r[1].getRange())||r[0].isBefore(e))return 2}return i||o?1:0},e.prototype.getJSONInstructionSignatureHelp=function(e,t,n,a,r,i,s,o,c){var u=this.getJSONSignatureActiveParameter(e,t,n,i,o,c);return-1===u?{signatures:[r],activeSignature:0,activeParameter:u=this.getSignatureActiveParameter(t,n,i,o?1:2,c)}:0===u?s?(a.push(r),{signatures:a,activeSignature:0,activeParameter:0}):(a.unshift(r),{signatures:a,activeSignature:0,activeParameter:0}):1===u&&i?s?(a.push(r),{signatures:a,activeSignature:0,activeParameter:1}):(a.unshift(r),{signatures:a,activeSignature:0,activeParameter:1}):{signatures:a,activeSignature:0,activeParameter:u}},e.prototype.getJSONSignatureActiveParameter=function(e,t,n,a,r,i){var o=a?1:0;if(a){var c=t.getFlags();if(c.length>0){var u=c[c.length-1].getRange().end;if(s.Util.positionBefore(n,u)||s.Util.positionEquals(n,u))return 0}}var l=t.getClosingBracket();if(l){if((m=l.getRange()).end.line===n.line&&m.end.character===n.character)return r?3+o:4+o;if(l.isBefore(n))return-1}var g=t.getJSONStrings();if(!r&&g.length>1&&g[1].isBefore(n))return 2===g.length?3+o:i||s.Util.isInsideRange(n,g[g.length-1].getRange())?3+o:2+o;if(g.length>0&&g[0].isBefore(n)){if(g.length>2)return 2+o;var d=e.offsetAt(g[0].getRange().end),h=e.offsetAt(n);return-1===e.getText().substring(d,h).indexOf(",")?1+o:i?2+o:3+o}var m,f=t.getOpeningBracket();return f?(m=f.getRange()).end.line===n.line&&m.end.character===n.character||f.isBefore(n)?1+o:0+o:0===t.getArguments().length?0+o:-1},e.prototype.getSignatureActiveParameter=function(e,t,n,a,r){var i=n?1:0,o=e.getArguments();if(r)for(var c=o.length-1;c>=0;c--){if(o[c].isBefore(t))return Math.min(c+1,a)+i;if(s.Util.isInsideRange(t,o[c].getRange()))return Math.min(c,a)+i}switch(o.length){case 1:return o[0].isBefore(t)?2+i:0+i;default:return o[o.length-1].isBefore(t)||s.Util.isInsideRange(t,o[o.length-1].getRange())?2+i:o[0].isBefore(t)?1+i:0+i}},e.prototype.getPropertySignatureHelp=function(e,t,n,a){return{signatures:this.getPropertySignatures(e,t,n,a),activeSignature:0,activeParameter:this.getPropertySignatureActiveParameter(e,t,a)}},e.prototype.getPropertySignatures=function(t,n,a,r){if(0===r.length)return a;if(1!==r.length)return[a[2]];var i=r[0].getValueRange();return null===i?e.isNameBefore(r[0],n)?[a[0]]:a:-1===t.getText().substring(t.offsetAt(r[0].getNameRange().end),t.offsetAt(i.start)).indexOf("=")?[a[0]]:e.isValueBefore(r[0],n)?[a[2]]:[a[1],a[2]]},e.prototype.getPropertySignatureActiveParameter=function(t,n,a){if(0===a.length)return 0;for(var r=a.length-1;r>0;r--){if(e.isInValue(a[r],n))return 3;if(e.isNameBefore(a[r],n)||e.isInName(a[r],n))return 2}return e.isInValue(a[0],n)?1:e.isValueBefore(a[0],n)?-1===t.getText().substring(t.offsetAt(a[0].getNameRange().end),t.offsetAt(a[0].getValueRange().start)).indexOf("=")?1:2:e.isNameBefore(a[0],n)?1:0},e.isInName=function(e,t){return s.Util.isInsideRange(t,e.getNameRange())},e.isNameBefore=function(t,n){var a=t.getNameRange();return!e.isInName(t,n)&&(a.start.line<n.line||a.start.line===n.line&&a.end.character<n.character)},e.isInValue=function(e,t){var n=e.getValueRange();return!!n&&s.Util.isInsideRange(t,n)},e.isValueBefore=function(e,t){var n=e.getValueRange();return null!==n&&(n.start.line<t.line||n.start.line===t.line&&(n.start.line===n.end.line?n.end.character<t.character:n.start.character<t.character))},e}();t.DockerSignatures=o},2479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),r=function(){function e(){}return e.prototype.getLinks=function(e){for(var t=[],n=0,r=a.DockerfileParser.parse(e).getFROMs();n<r.length;n++){var i=r[n],s=i.getImageName();s&&(-1===s.indexOf("/")?t.push({range:i.getImageNameRange(),data:"_/"+s+"/"}):t.push({range:i.getImageNameRange(),data:"r/"+s+"/"}))}return t},e.prototype.resolveLink=function(e){return e.data&&(e.target="https://hub.docker.com/"+e.data),e},e}();t.DockerLinks=r},2480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(50),i=n(841),s=n(145),o=function(){function e(){}return e.prototype.prepareRename=function(e,t){for(var n=r.DockerfileParser.parse(e),a=n.getContainingImage(t),i=0,o=n.getCOPYs();i<o.length;i++){var c=o[i].getFromFlag();if(c){var u=c.getValueRange();if(s.Util.isInsideRange(t,u))return u}}for(var l=0,g=a.getFROMs();l<g.length;l++){var d=g[l];if(s.Util.isInsideRange(t,d.getBuildStageRange()))return d.getBuildStageRange()}for(var h=0,m=a.getENVs();h<m.length;h++)for(var f=0,p=m[h].getProperties();f<p.length;f++){var A=p[f];if(s.Util.isInsideRange(t,A.getNameRange()))return A.getNameRange()}for(var _=0,R=a.getARGs();_<R.length;_++){if(null!==(A=R[_].getProperty())&&s.Util.isInsideRange(t,A.getNameRange()))return A.getNameRange()}for(var I=0,S=a.getInstructions();I<S.length;I++)for(var D=0,E=S[I].getVariables();D<E.length;D++){var N=E[D];if(s.Util.isInsideRange(t,N.getNameRange()))return N.getNameRange()}return null},e.prototype.rename=function(e,t,n,r){for(var s=[],o=0,c=(new i.DockerHighlight).computeHighlightRanges(t,n);o<c.length;o++){var u=c[o];s.push(a.TextEdit.replace(u.range,r))}return s},e}();t.DockerRename=o},2481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(50),i=n(145),s=function(){function e(e,t){this.markdown=e,this.plainText=t}return e.prototype.onHover=function(e,t,n){var s=r.DockerfileParser.parse(e),o=s.getContainingImage(t);if(!o)return null;var c=this.computeHoverKey(s,t);if(c){if(n&&n.length>0){switch(n[0]){case a.MarkupKind.Markdown:var u=this.markdown.getMarkdown(c);return u?{contents:{kind:a.MarkupKind.Markdown,value:u.contents}}:null;case a.MarkupKind.PlainText:var l=this.plainText.getDocumentation(c);if(l)return{contents:{kind:a.MarkupKind.PlainText,value:l}}}return null}return this.markdown.getMarkdown(c)}for(var g=0,d=o.getInstructions();g<d.length;g++){if((_=d[g])instanceof r.Arg)if((f=_.getProperty())&&i.Util.isInsideRange(t,f.getNameRange())&&null!==f.getValue())return{contents:f.getValue()};if(_ instanceof r.Env)for(var h=0,m=_.getProperties();h<m.length;h++){var f=m[h];if(i.Util.isInsideRange(t,f.getNameRange())&&null!==f.getValue())return{contents:f.getValue()}}}for(var p=0,A=o.getInstructions();p<A.length;p++)for(var _,R=0,I=(_=A[p]).getVariables();R<I.length;R++){var S=I[R];if(i.Util.isInsideRange(t,S.getNameRange())){var D=s.resolveVariable(S.getName(),S.getNameRange().start.line);if(D||""===D)return{contents:D};if(null===D)return null}}return null},e.prototype.computeHoverKey=function(e,t){var n=e.getDirective(),a=e.getContainingImage(t);if(0===t.line&&null!==n&&n.getDirective()===r.Directive.escape){var s=n.getNameRange();if(i.Util.isInsideRange(t,s))return r.Directive.escape}for(var o=0,c=a.getInstructions();o<c.length;o++){var u=c[o],l=u.getInstructionRange();if(i.Util.isInsideRange(t,l))return u.getKeyword();if(u instanceof r.Onbuild){s=u.getTriggerRange();if(i.Util.isInsideRange(t,s))return u.getTrigger()}var g=this.getFlagsHover(t,u);if(null!==g)return g}return null},e.prototype.getFlagsHover=function(e,t){switch(t.getKeyword()){case"ADD":for(var n=0,a=t.getFlags();n<a.length;n++){var r=a[n];if(i.Util.isInsideRange(e,r.getNameRange()))switch(r.getName()){case"chown":return"ADD_FlagChown"}}break;case"COPY":for(var s=0,o=t.getFlags();s<o.length;s++){r=o[s];if(i.Util.isInsideRange(e,r.getNameRange()))switch(r.getName()){case"chown":return"COPY_FlagChown";case"from":return"COPY_FlagFrom"}}break;case"HEALTHCHECK":for(var c=0,u=t.getFlags();c<u.length;c++){r=u[c];if(i.Util.isInsideRange(e,r.getNameRange())){switch(r.getName()){case"interval":return"HEALTHCHECK_FlagInterval";case"retries":return"HEALTHCHECK_FlagRetries";case"start-period":return"HEALTHCHECK_FlagStartPeriod";case"timeout":return"HEALTHCHECK_FlagTimeout"}return null}}break;case"ONBUILD":var l=t.getTriggerInstruction();if(null!==l)return this.getFlagsHover(e,l)}return null},e}();t.DockerHover=s},2482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(50),i=function(){function e(){}return e.prototype.getIndentation=function(e){var t="\t";if(e&&e.insertSpaces){t="";for(var n=0;n<e.tabSize;n++)t+=" "}return t},e.prototype.createFormattingEdit=function(e,t,n,r,i){return r?a.TextEdit.replace({start:e.positionAt(t),end:e.positionAt(n)},i):a.TextEdit.del({start:e.positionAt(t),end:e.positionAt(n)})},e.prototype.formatOnType=function(e,t,n,i){var s=r.DockerfileParser.parse(e);if(s.getEscapeCharacter()===n){for(var o=0,c=s.getComments();o<c.length;o++){if(c[o].getRange().start.line===t.line)return[]}if(s.getDirective()&&0===t.line)return[];var u=a.TextDocument.create("","",0,e);e:for(var l=u.offsetAt(t);l<e.length;l++)switch(e.charAt(l)){case" ":case"\t":break;case"\r":case"\n":break e;default:return[]}var g=[t.line+1],d=[];return d[g[0]]=!0,this.formatLines(u,u.getText(),g,d,i)}return[]},e.prototype.formatRange=function(e,t,n){for(var a=[],r=t.start.line;r<=t.end.line;r++)a.push(r);return this.format(e,a,n)},e.prototype.format=function(e,t,n){for(var i=a.TextDocument.create("","",0,e),s=r.DockerfileParser.parse(e),o=[],c=0;c<i.lineCount;c++)o[c]=!1;for(var u=0,l=s.getInstructions();u<l.length;u++){var g=l[u].getRange();o[g.start.line]=!1;for(c=g.start.line+1;c<=g.end.line;c++)o[c]=!0}return this.formatLines(i,e,t,o,n)},e.prototype.formatLines=function(e,t,n,r,i){var s=this.getIndentation(i),o=[];e:for(var c=0,u=n;c<u.length;c++){for(var l=u[c],g=e.offsetAt(a.Position.create(l,0)),d=g;d<t.length;d++)switch(t.charAt(d)){case" ":case"\t":break;case"\r":case"\n":if(d!==g){var h=a.TextEdit.del({start:e.positionAt(g),end:e.positionAt(d)});o.push(h)}continue e;default:if(d!==g||r[l]){h=this.createFormattingEdit(e,g,d,r[l],s);o.push(h)}continue e}if(g<t.length){h=a.TextEdit.del({start:e.positionAt(g),end:e.positionAt(t.length)});o.push(h)}}return o},e}();t.DockerFormatter=i},2483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(842),i=n(380),s=function(){function e(){this.dockerMarkdown=new r.MarkdownDocumentation,this.dockerPlainText=new i.PlainTextDocumentation}return e.prototype.resolveCompletionItem=function(e,t){if(!e.documentation&&e.data)if(null==t)e.documentation=this.dockerPlainText.getDocumentation(e.data);else{for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i===a.MarkupKind.PlainText)return e.documentation={kind:a.MarkupKind.PlainText,value:this.dockerPlainText.getDocumentation(e.data)},e;if(i===a.MarkupKind.Markdown)return e.documentation={kind:a.MarkupKind.Markdown,value:this.dockerMarkdown.getMarkdown(e.data).contents},e}e.documentation=this.dockerPlainText.getDocumentation(e.data)}return e},e}();t.DockerCompletion=s},3:function(e,t){e.exports=require("path")},361:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(818),i=n(85);t.ModifiableInstruction=class ModifiableInstruction extends i.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getFlags(){if(!this.flags){this.flags=[];for(let e of this.getArguments()){let t=e.getValue();if(this.stopSearchingForFlags(t))return this.flags;if(0===t.indexOf("--")){let n=e.getRange(),i=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end)),s=t.indexOf("="),o=i.indexOf("="),c=!1,u=!1,l=-1;e:for(let e=0;e<i.length;e++)switch(i.charAt(e)){case"\\":case" ":case"\t":case"\r":case"\n":break;case"-":if(u){l=e;break e}c?u=!0:c=!0;break;default:l=e;break e}let g=this.document.positionAt(this.document.offsetAt(n.start)+l);if(-1===o)this.flags.push(new r.Flag(n,t.substring(2),a.Range.create(g,n.end),null,null));else if(o===t.length-1){let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new r.Flag(n,t.substring(2,o),a.Range.create(g,e),"",a.Range.create(n.end,n.end)))}else{let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new r.Flag(n,t.substring(2,s),a.Range.create(g,e),t.substring(s+1),a.Range.create(this.document.positionAt(this.document.offsetAt(n.start)+o+1),n.end)))}}}}return this.flags}getArguments(){const e=super.getArguments(),t=this.getFlags();if(0===t.length)return e;for(let n=0;n<t.length;n++)e.shift();return e}}},362:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(363),r=n(243);t.Arg=class Arg extends r.PropertyInstruction{constructor(e,t,n,r,i,s){super(e,t,n,r,i,s),this.property=null;const o=this.getPropertyArguments();1===o.length?this.property=new a.Property(this.document,this.escapeChar,o[0]):this.property=null}getProperty(){return this.property}}},363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(119);class Property{constructor(e,t,n,r){this.name=null,this.value=null,this.document=e,this.escapeChar=t,this.nameRange=Property.getNameRange(e,n);let i=e.getText().substring(e.offsetAt(this.nameRange.start),e.offsetAt(this.nameRange.end));if(this.name=Property.getValue(i,t),r)this.valueRange=r.getRange(),i=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=Property.getValue(i,t),this.range=a.Range.create(this.nameRange.start,this.valueRange.end);else{let a=n.getRange();this.nameRange.start.line===a.start.line&&this.nameRange.start.character===a.start.character&&this.nameRange.end.line===a.end.line&&this.nameRange.end.character===a.end.character?this.valueRange=null:(this.valueRange=Property.getValueRange(e,n),i=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=Property.getValue(i,t)),this.range=a}}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getUnescapedValue(){if(null===this.valueRange)return null;let e=!1,t="",n=this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end));e:for(let a=0;a<n.length;a++){let r=n.charAt(a);switch(r){case this.escapeChar:for(let i=a+1;i<n.length;i++)switch(n.charAt(i)){case"\r":i++;case"\n":e=!0,a=i;continue e;case" ":case"\t":break;default:t+=r;continue e}t+=r;break;case"\r":case"\n":break;case" ":case"\t":e||(t+=r);break;case"#":if(e)for(let e=a+1;e<n.length;e++)switch(n.charAt(e)){case"\r":e++;case"\n":a=e;continue e}else t+=r;break;default:t+=r,e=!1}}return t}static getNameRange(e,t){let n=t.getValue(),r=n.indexOf("=");if(-1!==r){let i=n.charAt(0),s=n.charAt(r-1);if('"'===i&&'"'===s||"'"===i&&"'"===s||'"'!==i&&"'"!==i)return a.Range.create(t.getRange().start,e.positionAt(e.offsetAt(t.getRange().start)+r))}return t.getRange()}static getValueRange(e,t){return a.Range.create(e.positionAt(e.offsetAt(t.getRange().start)+t.getValue().indexOf("=")+1),e.positionAt(e.offsetAt(t.getRange().end)))}static getValue(e,t){let n=!1;const a=r.Util.findLeadingNonWhitespace(e,t);0!==a&&"#"===e.charAt(a)&&(n=!0);let i=(e=e.substring(a)).charAt(0),s=e.charAt(e.length-1),o="'"===i||'"'===i,c="'"===i&&"'"===s,u=!1;if('"'===i)for(let n=1;n<e.length;n++)e.charAt(n)===t?n++:'"'===e.charAt(n)&&n===e.length-1&&(u=!0);(c||u)&&(e=e.substring(1,e.length-1));let l=-1,g="",d=0;e:for(let a=0;a<e.length;a++){let r=e.charAt(a);switch(r){case t:if(a+1===e.length){g+=t;break e}if(" "===(r=e.charAt(a+1))||"\t"===r)t:for(let i=a+2;i<e.length;i++){let s=e.charAt(i);switch(s){case" ":case"\t":break;case"\r":i++;case"\n":n=!0,a=i;continue e;default:if(!u&&!c&&!o){s===t?(g+=r,a+=1):(g=g+r+s,a=i);continue e}break t}}if(u){"\r"===r?(n=!0,a+=2):"\n"===r?(n=!0,a++):'"'!==r&&(r===t&&a++,g+=t);continue e}if(c||o){"\r"===r?(n=!0,a+=2):"\n"===r?(n=!0,a++):g+=t;continue e}r===t?(g+=t,a++):"\r"===r?(n=!0,a+=2):"\n"===r?(n=!0,d=++a):(g+=r,a++);break;case" ":case"\t":n&&-1===l&&(l=a),g+=r;break;case"\r":a++;case"\n":n&&-1!==l&&(g=g.substring(0,g.length-(a-l-1)),l=-1);break;case"#":if(n){-1!==l&&(g=g.substring(0,g.length-(a-l)),l=-1);t:for(let t=a+1;t<e.length;t++)switch(e.charAt(t)){case"\r":t++;case"\n":a=t;break t}continue e}default:n&&(n=!1,l=-1),g+=r}}return g}}t.Property=Property},364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105);t.Cmd=class Cmd extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105);t.Copy=class Copy extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}stopSearchingForFlags(e){return-1===e.indexOf("--")}getFromFlag(){let e=super.getFlags();return 1===e.length&&"from"===e[0].getName()?e[0]:null}}},366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(243);t.Env=class Env extends a.PropertyInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getProperties(){return super.getProperties()}}},367:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105);t.Entrypoint=class Entrypoint extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(361);t.Healthcheck=class Healthcheck extends a.ModifiableInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}stopSearchingForFlags(e){return"CMD"===(e=e.toUpperCase())||"NONE"===e}getSubcommand(){let e=this.getArguments();return 0!==e.length?e[0]:null}}},369:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(815),i=n(85);t.Onbuild=class Onbuild extends i.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getTrigger(){let e=this.getTriggerWord();return null===e?null:e.toUpperCase()}getTriggerWord(){return this.getRangeContent(this.getTriggerRange())}getTriggerRange(){let e=this.getArguments();return e.length>0?e[0].getRange():null}getTriggerInstruction(){let e=this.getTriggerRange();if(null===e)return null;let t=this.getArguments();return r.Parser.createInstruction(this.document,this.dockerfile,this.escapeChar,a.Range.create(t[0].getRange().start,this.getRange().end),this.getTriggerWord(),e)}}},370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(2469),i=n(2472);!function(e){e[e.CASING_INSTRUCTION=0]="CASING_INSTRUCTION",e[e.CASING_DIRECTIVE=1]="CASING_DIRECTIVE",e[e.ARGUMENT_MISSING=2]="ARGUMENT_MISSING",e[e.ARGUMENT_EXTRA=3]="ARGUMENT_EXTRA",e[e.ARGUMENT_REQUIRES_ONE=4]="ARGUMENT_REQUIRES_ONE",e[e.ARGUMENT_REQUIRES_AT_LEAST_ONE=5]="ARGUMENT_REQUIRES_AT_LEAST_ONE",e[e.ARGUMENT_REQUIRES_TWO=6]="ARGUMENT_REQUIRES_TWO",e[e.ARGUMENT_REQUIRES_AT_LEAST_TWO=7]="ARGUMENT_REQUIRES_AT_LEAST_TWO",e[e.ARGUMENT_REQUIRES_ONE_OR_THREE=8]="ARGUMENT_REQUIRES_ONE_OR_THREE",e[e.ARGUMENT_UNNECESSARY=9]="ARGUMENT_UNNECESSARY",e[e.DUPLICATE_BUILD_STAGE_NAME=10]="DUPLICATE_BUILD_STAGE_NAME",e[e.EMPTY_CONTINUATION_LINE=11]="EMPTY_CONTINUATION_LINE",e[e.INVALID_BUILD_STAGE_NAME=12]="INVALID_BUILD_STAGE_NAME",e[e.FLAG_AT_LEAST_ONE=13]="FLAG_AT_LEAST_ONE",e[e.FLAG_DUPLICATE=14]="FLAG_DUPLICATE",e[e.FLAG_INVALID_DURATION=15]="FLAG_INVALID_DURATION",e[e.FLAG_LESS_THAN_1MS=16]="FLAG_LESS_THAN_1MS",e[e.FLAG_MISSING_DURATION=17]="FLAG_MISSING_DURATION",e[e.FLAG_MISSING_VALUE=18]="FLAG_MISSING_VALUE",e[e.FLAG_UNKNOWN_UNIT=19]="FLAG_UNKNOWN_UNIT",e[e.NO_SOURCE_IMAGE=20]="NO_SOURCE_IMAGE",e[e.INVALID_ESCAPE_DIRECTIVE=21]="INVALID_ESCAPE_DIRECTIVE",e[e.INVALID_AS=22]="INVALID_AS",e[e.INVALID_DESTINATION=23]="INVALID_DESTINATION",e[e.INVALID_PORT=24]="INVALID_PORT",e[e.INVALID_PROTO=25]="INVALID_PROTO",e[e.INVALID_REFERENCE_FORMAT=26]="INVALID_REFERENCE_FORMAT",e[e.INVALID_SIGNAL=27]="INVALID_SIGNAL",e[e.INVALID_SYNTAX=28]="INVALID_SYNTAX",e[e.ONBUILD_CHAINING_DISALLOWED=29]="ONBUILD_CHAINING_DISALLOWED",e[e.ONBUILD_TRIGGER_DISALLOWED=30]="ONBUILD_TRIGGER_DISALLOWED",e[e.SHELL_JSON_FORM=31]="SHELL_JSON_FORM",e[e.SHELL_REQUIRES_ONE=32]="SHELL_REQUIRES_ONE",e[e.SYNTAX_MISSING_EQUALS=33]="SYNTAX_MISSING_EQUALS",e[e.SYNTAX_MISSING_NAMES=34]="SYNTAX_MISSING_NAMES",e[e.SYNTAX_MISSING_SINGLE_QUOTE=35]="SYNTAX_MISSING_SINGLE_QUOTE",e[e.SYNTAX_MISSING_DOUBLE_QUOTE=36]="SYNTAX_MISSING_DOUBLE_QUOTE",e[e.MULTIPLE_INSTRUCTIONS=37]="MULTIPLE_INSTRUCTIONS",e[e.UNKNOWN_INSTRUCTION=38]="UNKNOWN_INSTRUCTION",e[e.UNKNOWN_ADD_FLAG=39]="UNKNOWN_ADD_FLAG",e[e.UNKNOWN_COPY_FLAG=40]="UNKNOWN_COPY_FLAG",e[e.UNKNOWN_HEALTHCHECK_FLAG=41]="UNKNOWN_HEALTHCHECK_FLAG",e[e.UNKNOWN_TYPE=42]="UNKNOWN_TYPE",e[e.UNSUPPORTED_MODIFIER=43]="UNSUPPORTED_MODIFIER",e[e.DEPRECATED_MAINTAINER=44]="DEPRECATED_MAINTAINER",e[e.HEALTHCHECK_CMD_ARGUMENT_MISSING=45]="HEALTHCHECK_CMD_ARGUMENT_MISSING",e[e.FLAG_INVALID_FROM_VALUE=46]="FLAG_INVALID_FROM_VALUE",e[e.JSON_IN_SINGLE_QUOTES=47]="JSON_IN_SINGLE_QUOTES",e[e.WORKDIR_IS_NOT_ABSOLUTE=48]="WORKDIR_IS_NOT_ABSOLUTE",e[e.BASE_NAME_EMPTY=49]="BASE_NAME_EMPTY"}(t.ValidationCode||(t.ValidationCode={})),function(e){e[e.IGNORE=0]="IGNORE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(t.ValidationSeverity||(t.ValidationSeverity={})),t.format=function(e,t){const n=a.TextDocument.create("","",0,e);return(new r.DockerFormatter).formatDocument(n,t)},t.validate=function(e,t){const n=a.TextDocument.create("","",0,e);return new i.Validator(t).validate(n)}},371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(832),i=n(86);t.ModifiableInstruction=class ModifiableInstruction extends i.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getFlags(){if(!this.flags){this.flags=[];for(let e of this.getArguments()){let t=e.getValue();if(this.stopSearchingForFlags(t))return this.flags;if(0===t.indexOf("--")){let n=e.getRange(),i=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end)),s=t.indexOf("="),o=i.indexOf("="),c=!1,u=!1,l=-1;e:for(let e=0;e<i.length;e++)switch(i.charAt(e)){case"\\":case" ":case"\t":case"\r":case"\n":break;case"-":if(u){l=e;break e}c?u=!0:c=!0;break;default:l=e;break e}let g=this.document.positionAt(this.document.offsetAt(n.start)+l);if(-1===o)this.flags.push(new r.Flag(n,t.substring(2),a.Range.create(g,n.end),null,null));else if(o===t.length-1){let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new r.Flag(n,t.substring(2,o),a.Range.create(g,e),"",a.Range.create(n.end,n.end)))}else{let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new r.Flag(n,t.substring(2,s),a.Range.create(g,e),t.substring(s+1),a.Range.create(this.document.positionAt(this.document.offsetAt(n.start)+o+1),n.end)))}}}}return this.flags}getArguments(){const e=super.getArguments(),t=this.getFlags();if(0===t.length)return e;for(let n=0;n<t.length;n++)e.shift();return e}}},372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(373),r=n(246);t.Arg=class Arg extends r.PropertyInstruction{constructor(e,t,n,r,i,s){super(e,t,n,r,i,s),this.property=null;const o=this.getPropertyArguments();1===o.length?this.property=new a.Property(this.document,this.escapeChar,o[0]):this.property=null}getProperty(){return this.property}}},373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(120);class Property{constructor(e,t,n,r){this.valueRange=null,this.value=null,this.document=e,this.escapeChar=t,this.nameRange=Property.getNameRange(e,n);let i=e.getText().substring(e.offsetAt(this.nameRange.start),e.offsetAt(this.nameRange.end));if(this.name=Property.getValue(i,t),r)this.valueRange=r.getRange(),i=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=Property.getValue(i,t),this.range=a.Range.create(this.nameRange.start,this.valueRange.end);else{let a=n.getRange();this.nameRange.start.line===a.start.line&&this.nameRange.start.character===a.start.character&&this.nameRange.end.line===a.end.line&&this.nameRange.end.character===a.end.character||(this.valueRange=Property.getValueRange(e,n),i=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=Property.getValue(i,t)),this.range=a}}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getUnescapedValue(){if(null===this.valueRange)return null;let e=!1,t="",n=this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end));e:for(let a=0;a<n.length;a++){let r=n.charAt(a);switch(r){case this.escapeChar:for(let i=a+1;i<n.length;i++)switch(n.charAt(i)){case"\r":i++;case"\n":e=!0,a=i;continue e;case" ":case"\t":break;default:t+=r;continue e}t+=r;break;case"\r":case"\n":break;case" ":case"\t":e||(t+=r);break;case"#":if(e)for(let e=a+1;e<n.length;e++)switch(n.charAt(e)){case"\r":e++;case"\n":a=e;continue e}else t+=r;break;default:t+=r,e=!1}}return t}static getNameRange(e,t){let n=t.getValue(),r=n.indexOf("=");if(-1!==r){let i=n.charAt(0),s=n.charAt(r-1);if('"'===i&&'"'===s||"'"===i&&"'"===s||'"'!==i&&"'"!==i)return a.Range.create(t.getRange().start,e.positionAt(e.offsetAt(t.getRange().start)+r))}return t.getRange()}static getValueRange(e,t){return a.Range.create(e.positionAt(e.offsetAt(t.getRange().start)+t.getValue().indexOf("=")+1),e.positionAt(e.offsetAt(t.getRange().end)))}static getValue(e,t){let n=!1;const a=r.Util.findLeadingNonWhitespace(e,t);0!==a&&"#"===e.charAt(a)&&(n=!0);let i=(e=e.substring(a)).charAt(0),s=e.charAt(e.length-1),o="'"===i||'"'===i,c="'"===i&&"'"===s,u=!1;if('"'===i)for(let n=1;n<e.length;n++)e.charAt(n)===t?n++:'"'===e.charAt(n)&&n===e.length-1&&(u=!0);(c||u)&&(e=e.substring(1,e.length-1));let l=-1,g="",d=0;e:for(let a=0;a<e.length;a++){let r=e.charAt(a);switch(r){case t:if(a+1===e.length){g+=t;break e}if(" "===(r=e.charAt(a+1))||"\t"===r)t:for(let i=a+2;i<e.length;i++){let s=e.charAt(i);switch(s){case" ":case"\t":break;case"\r":i++;case"\n":n=!0,a=i;continue e;default:if(!u&&!c&&!o){s===t?(g+=r,a+=1):(g=g+r+s,a=i);continue e}break t}}if(u){"\r"===r?(n=!0,a+=2):"\n"===r?(n=!0,a++):'"'!==r&&(r===t&&a++,g+=t);continue e}if(c||o){"\r"===r?(n=!0,a+=2):"\n"===r?(n=!0,a++):g+=t;continue e}r===t?(g+=t,a++):"\r"===r?(n=!0,a+=2):"\n"===r?(n=!0,d=++a):(g+=r,a++);break;case" ":case"\t":n&&-1===l&&(l=a),g+=r;break;case"\r":a++;case"\n":n&&-1!==l&&(g=g.substring(0,g.length-(a-l-1)),l=-1);break;case"#":if(n){-1!==l&&(g=g.substring(0,g.length-(a-l)),l=-1);t:for(let t=a+1;t<e.length;t++)switch(e.charAt(t)){case"\r":t++;case"\n":a=t;break t}continue e}default:n&&(n=!1,l=-1),g+=r}}return g}}t.Property=Property},374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106);t.Cmd=class Cmd extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},375:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106);t.Copy=class Copy extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}stopSearchingForFlags(e){return-1===e.indexOf("--")}getFromFlag(){let e=super.getFlags();return 1===e.length&&"from"===e[0].getName()?e[0]:null}}},376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(246);t.Env=class Env extends a.PropertyInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getProperties(){return super.getProperties()}}},377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106);t.Entrypoint=class Entrypoint extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(371);t.Healthcheck=class Healthcheck extends a.ModifiableInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}stopSearchingForFlags(e){return"CMD"===(e=e.toUpperCase())||"NONE"===e}getSubcommand(){let e=this.getArguments();return 0!==e.length?e[0]:null}}},379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(829),i=n(86);t.Onbuild=class Onbuild extends i.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getTrigger(){let e=this.getTriggerWord();return null===e?null:e.toUpperCase()}getTriggerWord(){return this.getRangeContent(this.getTriggerRange())}getTriggerRange(){let e=this.getArguments();return e.length>0?e[0].getRange():null}getTriggerInstruction(){let e=this.getTriggerRange();if(null===e)return null;let t=this.getArguments();return r.Parser.createInstruction(this.document,this.dockerfile,this.escapeChar,a.Range.create(t[0].getRange().start,this.getRange().end),this.getTriggerWord(),e)}}},38:function(e,t){e.exports=require("https")},380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.dockerMessages={hoverAdd:"Copy files, folders, or remote URLs from `source` to the `dest` path in the image's filesystem.\n\n",hoverArg:"Define a variable with an optional default value that users can override at build-time when using `docker build`.\n\nSince Docker 1.9\n\n",hoverCmd:"Provide defaults for an executing container. If an executable is not specified, then ENTRYPOINT must be specified as well. There can only be one CMD instruction in a Dockerfile.\n\n",hoverCopy:"Copy files or folders from `source` to the `dest` path in the image's filesystem.\n\n",hoverEntrypoint:"Configures the container to be run as an executable.\n\n",hoverEnv:"Set the environment variable `key` to the value `value`.\n\n",hoverExpose:"Define the network `port`s that this container will listen on at runtime.\n\n",hoverFrom:"Set the `baseImage` to use for subsequent instructions. FROM must be the first instruction in a Dockerfile.\n\n",hoverHealthcheck:"Define how Docker should test the container to check that it is still working. Alternatively, disable the base image's HEALTHCHECK instruction. There can only be one HEALTHCHECK instruction in a Dockerfile.\n\nSince Docker 1.12\n\n",hoverLabel:"Adds metadata to an image.\n\nSince Docker 1.6\n\n",hoverMaintainer:"Set the Author field of the generated images. This instruction has been deprecated in favor of LABEL.\n\n",hoverOnbuild:"Add a trigger instruction to the image that will be executed when the image is used as a base image for another build.\n\n",hoverRun:"Execute any commands on top of the current image as a new layer and commit the results.\n\n",hoverShell:"Override the default shell used for the shell form of commands.\n\nSince Docker 1.12\n\n",hoverStopsignal:"Set the system call signal to use to send to the container to exit. Signals can be valid unsigned numbers or a signal name in the SIGNAME format such as SIGKILL.\n\nSince Docker 1.9\n\n",hoverUser:"Set the user name or UID to use when running the image in addition to any subsequent CMD, ENTRYPOINT, or RUN instructions that follow it in the Dockerfile.\n\n",hoverVolume:"Create a mount point with the specified name and mark it as holding externally mounted volumes from the native host or from other containers.\n\n",hoverWorkdir:"Set the working directory for any subsequent ADD, COPY, CMD, ENTRYPOINT, or RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverAddFlagChown:"The username, groupname, or UID/GID combination to own the added content.",hoverCopyFlagChown:"The username, groupname, or UID/GID combination to own the copied content.",hoverCopyFlagFrom:"The previous build stage to use as the source location instead of the build's context.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagInterval:"The seconds to wait for the health check to run after the container has started, and then again the number of seconds to wait before running again after the previous check has completed.",hoverHealthcheckFlagRetries:"The number of consecutive failures of this health check before the container is considered to be `unhealthy`.",hoverHealthcheckFlagStartPeriod:"The number of seconds to wait for the container to startup. Failures during this grace period will not count towards the maximum number of retries. However, should a health check succeed during this period then any subsequent failures will count towards the maximum number of retries.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagTimeout:"The number of seconds to wait for the check to complete before considering it to have failed.",hoverEscape:"Sets the character to use to escape characters and newlines in this Dockerfile. If unspecified, the default escape character is `\\`.\n\n",signatureEscape:"Sets this Dockerfile's escape character. If unspecified, the default escape character is `\\`.",signatureEscape_Param:"The character to use to escape characters and newlines in this Dockerfile.",signatureAdd_Signature0:"Copy new files, directories or remote URLs to the image's filesystem.",signatureAdd_Signature0_Param1:"The resource to copy or unpack if it is a local tar archive in a recognized compression format.",signatureAdd_Signature0_Param3:"The name of the destination file or folder.",signatureArg_Signature0:"Define a variable that users can pass a value to at build-time with `docker build`.",signatureArg_Signature0_Param:"The name of the variable.",signatureArg_Signature1:"Define a variable with an optional default value that users can override at build-time with `docker build`.",signatureArg_Signature1_Param1:"The default value of the variable.",signatureCmd_Signature0:"Set the default executable and parameters for this executing container.",signatureCmd_Signature0_Param0:"The default executable for this executing container.",signatureCmd_Signature0_Param1:"A parameter to the default executable.",signatureCmd_Signature1:"Set the default parameters for this executing container. An ENTRYPOINT instruction must also be specified.",signatureCmd_Signature1_Param0:"A parameter to the entrypoint executable.",signatureCopy_Signature0:"Copy new files and directories to the image's filesystem.",signatureCopy_Signature0_Param0:"Optional flags to configure this instruction.",signatureCopy_Signature0_Param1:"The resource to copy.",signatureCopyFlagFrom:"Set the build stage to use as the source location of this copy instruction instead of the build's context.",signatureCopyFlagFrom_Param:"The build stage or image name to use as the source. Also may be a numeric index.",signatureEntrypoint_Signature0:"Configure this container for running as an executable.",signatureEntrypoint_Signature0_Param1:"The container's main executable.",signatureEntrypoint_Signature0_Param2:"A parameter to the entrypoint executable.",signatureEnv_Signature0:"Set an environment variable to the specified value. The value will be in the environment of any descendent Dockerfiles",signatureEnv_Signature0_Param0:"The name of the environment variable.",signatureEnv_Signature0_Param1:"The value to set the environment variable to.",signatureExpose:"Define network ports for this container to listen on at runtime.",signatureExpose_Param0:"The port that this container should listen on.",signatureFrom_Signature0:"Set the base image to use for any subsequent instructions that follow.",signatureFrom_Signature0_Param:"The name of the base image to use.",signatureFrom_Signature1_Param1:"The tag of the base image to use.",signatureFrom_Signature2_Param1:"The digest of the base image to use.",signatureFrom_Signature3:"Set the base image to use for any subsequent instructions that follow and also give this build stage a name.",signatureFrom_Signature3_Param2:"The name of this build stage.",signatureFrom_Param2:"The name of this build stage.",signatureHealthcheck_Signature0:"Define how Docker should test the container to check that it is still working.",signatureHealthcheck_Signature1_Param2:"The parameters to the CMD instruction for the healthcheck.",signatureHealthcheck_Signature2:"Disable the inherited HEALTHCHECK instruction from the base image.",signatureLabel_Signature0:"Set metadata to an image.",signatureLabel_Signature0_Param0:"The name of the metadata.",signatureLabel_Signature0_Param1:"The value of the metadata.",signatureMaintainer:'Set the "Author" field of this image.',signatureMaintainer_Param:"The name of this image's maintainer.",signatureOnbuild:"Register a build instruction as a trigger to be executed when this image is used as a base image for another build.",signatureOnbuild_Param:"The build instruction to register as a trigger instruction.",signatureRun_Signature0:"Execute commands inside a shell.",signatureRun_Signature0_Param0:"The command to run.",signatureRun_Signature0_Param1:"A parameter to the command.",signatureRun_Signature1:"Execute commands without invoking a command shell.",signatureShell:"Override default shell used for the shell form of commands.",signatureShell_Param1:"The shell executable to use.",signatureShell_Param2:"The parameters to the shell executable.",signatureStopsignal:"Set the system call signal to use to send to the container to exit.",signatureStopsignal_Param:"The signal to send to the container to exit. This may be an valid unsigned number or a signal name in the SIGNAME format such as SIGKILL.",signatureUser_Signature0:"Set the user name to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature0_Param:"The user name to use.",signatureUser_Signature1:"Set the user name and user group to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature1_Param1:"The group name to use.",signatureUser_Signature2:"Set the UID to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature2_Param:"The UID to use.",signatureUser_Signature3:"Set the UID and GID to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature3_Param1:"The GID to use.",signatureVolume_Signature0:"Create mount points for holding externally mounted volumes from the native host or other containers.",signatureVolume_Signature0_Param0:"The name of the mount point.",signatureWorkdir:"Set the working directory for any ADD, COPY, CMD, ENTRYPOINT, or RUN instructions that follow.",signatureWorkdir_Param:"The absolute or relative path to use as the working directory. Will be created if it does not exist.",proposalArgNameOnly:"Define a variable that users can set at build-time when using `docker build`.\n\n",proposalArgDefaultValue:"Define a variable with the given default value that users can override at build-time when using `docker build`.\n\n",proposalHealthcheckExec:"Define how Docker should test the container to check that it is still working. There can only be one HEALTHCHECK instruction in a Dockerfile.\n\nSince Docker 1.12\n\n",proposalHealthcheckNone:"Disable the HEALTHCHECK instruction inherited from the base image if one exists. There can only be one HEALTHCHECK instruction in a Dockerfile.\n\nSince Docker 1.12"},this.markdowns={ADD:this.dockerMessages.hoverAdd+"ADD hello.txt /absolute/path\nADD hello.txt relative/to/workdir",ADD_FlagChown:this.dockerMessages.hoverAddFlagChown,ARG:this.dockerMessages.hoverArg+"ARG userName\nARG testOutputDir=test",ARG_NameOnly:this.dockerMessages.proposalArgNameOnly+"ARG userName",ARG_DefaultValue:this.dockerMessages.proposalArgDefaultValue+"ARG testOutputDir=test",CMD:this.dockerMessages.hoverCmd+'CMD [ "/bin/ls", "-l" ]',COPY:this.dockerMessages.hoverCopy+"COPY hello.txt /absolute/path\nCOPY hello.txt relative/to/workdir",COPY_FlagChown:this.dockerMessages.hoverCopyFlagChown,COPY_FlagFrom:this.dockerMessages.hoverCopyFlagFrom,ENTRYPOINT:this.dockerMessages.hoverEntrypoint+'ENTRYPOINT [ "/opt/app/run.sh", "--port", "8080" ]',ENV:this.dockerMessages.hoverEnv+"ENV buildTag=1.0",EXPOSE:this.dockerMessages.hoverExpose+"EXPOSE 8080\nEXPOSE 80 443 22\nEXPOSE 7000-8000",FROM:this.dockerMessages.hoverFrom+"FROM baseImage\nFROM baseImage:tag\nFROM baseImage@digest",HEALTHCHECK:this.dockerMessages.hoverHealthcheck+"HEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\nHEALTHCHECK NONE",HEALTHCHECK_CMD:this.dockerMessages.proposalHealthcheckExec+"HEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1",HEALTHCHECK_FlagInterval:this.dockerMessages.hoverHealthcheckFlagInterval,HEALTHCHECK_FlagRetries:this.dockerMessages.hoverHealthcheckFlagRetries,HEALTHCHECK_FlagStartPeriod:this.dockerMessages.hoverHealthcheckFlagStartPeriod,HEALTHCHECK_FlagTimeout:this.dockerMessages.hoverHealthcheckFlagTimeout,HEALTHCHECK_NONE:this.dockerMessages.proposalHealthcheckNone,LABEL:this.dockerMessages.hoverLabel+'LABEL version="1.0"',MAINTAINER:this.dockerMessages.hoverMaintainer+"MAINTAINER name",ONBUILD:this.dockerMessages.hoverOnbuild+"ONBUILD ADD . /opt/app/src/extensions\nONBUILD RUN /usr/local/bin/build.sh /opt/app",RUN:this.dockerMessages.hoverRun+"RUN apt-get update && apt-get install -y curl",SHELL:this.dockerMessages.hoverShell+'SHELL [ "powershell", "-command" ]',STOPSIGNAL:this.dockerMessages.hoverStopsignal+"STOPSIGNAL 9",USER:this.dockerMessages.hoverUser+"USER daemon",VOLUME:this.dockerMessages.hoverVolume+'VOLUME [ "/var/db" ]',WORKDIR:this.dockerMessages.hoverWorkdir+"WORKDIR /path/to/workdir\nWORKDIR relative/path",escape:this.dockerMessages.hoverEscape+"# escape=`",signatureEscape:this.dockerMessages.signatureEscape,signatureEscape_Param:this.dockerMessages.signatureEscape_Param,signatureAdd_Signature0:this.dockerMessages.signatureAdd_Signature0,signatureAdd_Signature0_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureAdd_Signature0_Param1:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature0_Param2:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature0_Param3:this.dockerMessages.signatureAdd_Signature0_Param3,signatureAdd_Signature1:this.dockerMessages.signatureAdd_Signature0,signatureAdd_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureAdd_Signature1_Param2:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature1_Param3:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature1_Param4:this.dockerMessages.signatureAdd_Signature0_Param3,signatureArg_Signature0:this.dockerMessages.signatureArg_Signature0,signatureArg_Signature0_Param:this.dockerMessages.signatureArg_Signature0_Param,signatureArg_Signature1:this.dockerMessages.signatureArg_Signature1,signatureArg_Signature1_Param0:this.dockerMessages.signatureArg_Signature0_Param,signatureArg_Signature1_Param1:this.dockerMessages.signatureArg_Signature1_Param1,signatureCmd_Signature0:this.dockerMessages.signatureCmd_Signature0,signatureCmd_Signature0_Param1:this.dockerMessages.signatureCmd_Signature0_Param0,signatureCmd_Signature0_Param2:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature0_Param3:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature1:this.dockerMessages.signatureCmd_Signature1,signatureCmd_Signature1_Param1:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature1_Param2:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature1_Param3:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature2:this.dockerMessages.signatureCmd_Signature0,signatureCmd_Signature2_Param0:this.dockerMessages.signatureCmd_Signature0_Param0,signatureCmd_Signature2_Param1:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature2_Param2:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCopy_Signature0:this.dockerMessages.signatureCopy_Signature0,signatureCopy_Signature0_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureCopy_Signature0_Param1:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature0_Param2:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature0_Param3:this.dockerMessages.signatureAdd_Signature0_Param3,signatureCopy_Signature1:this.dockerMessages.signatureCopy_Signature0,signatureCopy_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureCopy_Signature1_Param2:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature1_Param3:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature1_Param4:this.dockerMessages.signatureAdd_Signature0_Param3,signatureCopyFlagFrom:this.dockerMessages.signatureCopyFlagFrom,signatureCopyFlagFrom_Param:this.dockerMessages.signatureCopyFlagFrom_Param,signatureEntrypoint_Signature0:this.dockerMessages.signatureEntrypoint_Signature0,signatureEntrypoint_Signature0_Param1:this.dockerMessages.signatureEntrypoint_Signature0_Param1,signatureEntrypoint_Signature0_Param2:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature0_Param3:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature1:this.dockerMessages.signatureEntrypoint_Signature0,signatureEntrypoint_Signature1_Param0:this.dockerMessages.signatureEntrypoint_Signature0_Param1,signatureEntrypoint_Signature1_Param1:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature1_Param2:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEnv_Signature0:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature0_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature0_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature1:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature1_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature1_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature2:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature2_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature2_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature2_Param2:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature2_Param3:this.dockerMessages.signatureEnv_Signature0_Param1,signatureExpose:this.dockerMessages.signatureExpose,signatureExpose_Param0:this.dockerMessages.signatureExpose_Param0,signatureExpose_Param1:this.dockerMessages.signatureExpose_Param0,signatureFrom_Signature0:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature0_Param:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature1:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature1_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature1_Param1:this.dockerMessages.signatureFrom_Signature1_Param1,signatureFrom_Signature2:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature2_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature2_Param1:this.dockerMessages.signatureFrom_Signature2_Param1,signatureFrom_Signature3:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature3_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature3_Param2:this.dockerMessages.signatureFrom_Signature3_Param2,signatureFrom_Signature4:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature4_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature4_Param1:this.dockerMessages.signatureFrom_Signature1_Param1,signatureFrom_Signature4_Param3:this.dockerMessages.signatureFrom_Signature3_Param2,signatureFrom_Signature5:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature5_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature5_Param1:this.dockerMessages.signatureFrom_Signature2_Param1,signatureFrom_Signature5_Param3:this.dockerMessages.signatureFrom_Signature3_Param2,signatureHealthcheck:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature0:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature1:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureHealthcheck_Signature1_Param2:this.dockerMessages.signatureHealthcheck_Signature1_Param2,signatureHealthcheck_Signature2:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheckFlagInterval_Param:this.dockerMessages.hoverHealthcheckFlagInterval,signatureHealthcheckFlagRetries_Param:this.dockerMessages.hoverHealthcheckFlagRetries,signatureHealthcheckFlagStartPeriod_Param:this.dockerMessages.hoverHealthcheckFlagStartPeriod,signatureHealthcheckFlagTimeout_Param:this.dockerMessages.hoverHealthcheckFlagTimeout,signatureLabel_Signature0:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature0_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature0_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature1:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature1_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature1_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature2:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature2_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature2_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature2_Param2:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature2_Param3:this.dockerMessages.signatureLabel_Signature0_Param1,signatureMaintainer:this.dockerMessages.signatureMaintainer,signatureMaintainer_Param:this.dockerMessages.signatureMaintainer_Param,signatureOnbuild:this.dockerMessages.signatureOnbuild,signatureOnbuild_Param:this.dockerMessages.signatureOnbuild_Param,signatureRun_Signature0:this.dockerMessages.signatureRun_Signature0,signatureRun_Signature0_Param0:this.dockerMessages.signatureRun_Signature0_Param0,signatureRun_Signature0_Param1:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature0_Param2:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature1:this.dockerMessages.signatureRun_Signature1,signatureRun_Signature1_Param1:this.dockerMessages.signatureRun_Signature0_Param0,signatureRun_Signature1_Param2:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature1_Param3:this.dockerMessages.signatureRun_Signature0_Param1,signatureShell:this.dockerMessages.signatureShell,signatureShell_Param1:this.dockerMessages.signatureShell_Param1,signatureShell_Param2:this.dockerMessages.signatureShell_Param2,signatureShell_Param3:this.dockerMessages.signatureShell_Param2,signatureStopsignal:this.dockerMessages.signatureStopsignal,signatureStopsignal_Param:this.dockerMessages.signatureStopsignal_Param,signatureUser_Signature0:this.dockerMessages.signatureUser_Signature0,signatureUser_Signature0_Param:this.dockerMessages.signatureUser_Signature0_Param,signatureUser_Signature1:this.dockerMessages.signatureUser_Signature1,signatureUser_Signature1_Param0:this.dockerMessages.signatureUser_Signature0,signatureUser_Signature1_Param1:this.dockerMessages.signatureUser_Signature1_Param1,signatureUser_Signature2:this.dockerMessages.signatureUser_Signature2,signatureUser_Signature2_Param:this.dockerMessages.signatureUser_Signature2_Param,signatureUser_Signature3:this.dockerMessages.signatureUser_Signature3,signatureUser_Signature3_Param0:this.dockerMessages.signatureUser_Signature2_Param,signatureUser_Signature3_Param1:this.dockerMessages.signatureUser_Signature3_Param1,signatureVolume_Signature0:this.dockerMessages.signatureVolume_Signature0,signatureVolume_Signature0_Param0:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature0_Param1:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature1:this.dockerMessages.signatureVolume_Signature0,signatureVolume_Signature1_Param1:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature1_Param2:this.dockerMessages.signatureVolume_Signature0_Param0,signatureWorkdir:this.dockerMessages.signatureWorkdir,signatureWorkdir_Param:this.dockerMessages.signatureWorkdir_Param}}return e.prototype.getDocumentation=function(e){return this.markdowns[e]},e}();t.PlainTextDocumentation=a},49:function(e,t){e.exports=require("vscode-languageserver-protocol")},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(180);t.Argument=a.Argument;var r=n(827);t.JSONArgument=r.JSONArgument;const i=n(828);t.Comment=i.Comment;const s=n(829);var o=n(832);t.Flag=o.Flag;const c=n(86);t.Instruction=c.Instruction;var u=n(245);t.Line=u.Line;const l=n(830);t.ParserDirective=l.ParserDirective;var g=n(373);t.Property=g.Property;var d=n(831);t.Variable=d.Variable;var h=n(833);t.Add=h.Add;const m=n(372);t.Arg=m.Arg;const f=n(374);t.Cmd=f.Cmd;const p=n(375);t.Copy=p.Copy;const A=n(377);t.Entrypoint=A.Entrypoint;const _=n(376);t.Env=_.Env;const R=n(247);t.From=R.From;const I=n(378);t.Healthcheck=I.Healthcheck;var S=n(106);t.JSONInstruction=S.JSONInstruction;var D=n(834);t.Label=D.Label;var E=n(371);t.ModifiableInstruction=E.ModifiableInstruction;var N=n(379);t.Onbuild=N.Onbuild;var C=n(246);t.PropertyInstruction=C.PropertyInstruction;var b=n(835);t.Shell=b.Shell;var v=n(836);t.Stopsignal=v.Stopsignal;var V=n(838);t.User=V.User;var k=n(839);t.Volume=k.Volume;var T=n(837);t.Workdir=T.Workdir,function(e){e.ADD="ADD",e.ARG="ARG",e.CMD="CMD",e.COPY="COPY",e.ENTRYPOINT="ENTRYPOINT",e.ENV="ENV",e.EXPOSE="EXPOSE",e.FROM="FROM",e.HEALTHCHECK="HEALTHCHECK",e.LABEL="LABEL",e.MAINTAINER="MAINTAINER",e.ONBUILD="ONBUILD",e.RUN="RUN",e.SHELL="SHELL",e.STOPSIGNAL="STOPSIGNAL",e.USER="USER",e.VOLUME="VOLUME",e.WORKDIR="WORKDIR"}(t.Keyword||(t.Keyword={})),function(e){e.escape="escape"}(t.Directive||(t.Directive={})),t.DefaultVariables=["FTP_PROXY","ftp_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","NO_PROXY","no_proxy"],function(e){e.parse=function(e){return(new s.Parser).parse(e)}}(t.DockerfileParser||(t.DockerfileParser={}))},71:function(e,t){e.exports=require("child_process")},811:function(e,t,n){"use strict";function a(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=a,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>a(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}},812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(2464),i=n(2467);!function(e){e[e.CASING_INSTRUCTION=0]="CASING_INSTRUCTION",e[e.CASING_DIRECTIVE=1]="CASING_DIRECTIVE",e[e.ARGUMENT_MISSING=2]="ARGUMENT_MISSING",e[e.ARGUMENT_EXTRA=3]="ARGUMENT_EXTRA",e[e.ARGUMENT_REQUIRES_ONE=4]="ARGUMENT_REQUIRES_ONE",e[e.ARGUMENT_REQUIRES_AT_LEAST_ONE=5]="ARGUMENT_REQUIRES_AT_LEAST_ONE",e[e.ARGUMENT_REQUIRES_TWO=6]="ARGUMENT_REQUIRES_TWO",e[e.ARGUMENT_REQUIRES_AT_LEAST_TWO=7]="ARGUMENT_REQUIRES_AT_LEAST_TWO",e[e.ARGUMENT_REQUIRES_ONE_OR_THREE=8]="ARGUMENT_REQUIRES_ONE_OR_THREE",e[e.ARGUMENT_UNNECESSARY=9]="ARGUMENT_UNNECESSARY",e[e.DUPLICATE_BUILD_STAGE_NAME=10]="DUPLICATE_BUILD_STAGE_NAME",e[e.EMPTY_CONTINUATION_LINE=11]="EMPTY_CONTINUATION_LINE",e[e.INVALID_BUILD_STAGE_NAME=12]="INVALID_BUILD_STAGE_NAME",e[e.FLAG_AT_LEAST_ONE=13]="FLAG_AT_LEAST_ONE",e[e.FLAG_DUPLICATE=14]="FLAG_DUPLICATE",e[e.FLAG_INVALID_DURATION=15]="FLAG_INVALID_DURATION",e[e.FLAG_LESS_THAN_1MS=16]="FLAG_LESS_THAN_1MS",e[e.FLAG_MISSING_DURATION=17]="FLAG_MISSING_DURATION",e[e.FLAG_MISSING_VALUE=18]="FLAG_MISSING_VALUE",e[e.FLAG_UNKNOWN_UNIT=19]="FLAG_UNKNOWN_UNIT",e[e.NO_SOURCE_IMAGE=20]="NO_SOURCE_IMAGE",e[e.INVALID_ESCAPE_DIRECTIVE=21]="INVALID_ESCAPE_DIRECTIVE",e[e.INVALID_AS=22]="INVALID_AS",e[e.INVALID_DESTINATION=23]="INVALID_DESTINATION",e[e.INVALID_PORT=24]="INVALID_PORT",e[e.INVALID_PROTO=25]="INVALID_PROTO",e[e.INVALID_REFERENCE_FORMAT=26]="INVALID_REFERENCE_FORMAT",e[e.INVALID_SIGNAL=27]="INVALID_SIGNAL",e[e.INVALID_SYNTAX=28]="INVALID_SYNTAX",e[e.ONBUILD_CHAINING_DISALLOWED=29]="ONBUILD_CHAINING_DISALLOWED",e[e.ONBUILD_TRIGGER_DISALLOWED=30]="ONBUILD_TRIGGER_DISALLOWED",e[e.SHELL_JSON_FORM=31]="SHELL_JSON_FORM",e[e.SHELL_REQUIRES_ONE=32]="SHELL_REQUIRES_ONE",e[e.SYNTAX_MISSING_EQUALS=33]="SYNTAX_MISSING_EQUALS",e[e.SYNTAX_MISSING_NAMES=34]="SYNTAX_MISSING_NAMES",e[e.SYNTAX_MISSING_SINGLE_QUOTE=35]="SYNTAX_MISSING_SINGLE_QUOTE",e[e.SYNTAX_MISSING_DOUBLE_QUOTE=36]="SYNTAX_MISSING_DOUBLE_QUOTE",e[e.MULTIPLE_INSTRUCTIONS=37]="MULTIPLE_INSTRUCTIONS",e[e.UNKNOWN_INSTRUCTION=38]="UNKNOWN_INSTRUCTION",e[e.UNKNOWN_ADD_FLAG=39]="UNKNOWN_ADD_FLAG",e[e.UNKNOWN_COPY_FLAG=40]="UNKNOWN_COPY_FLAG",e[e.UNKNOWN_HEALTHCHECK_FLAG=41]="UNKNOWN_HEALTHCHECK_FLAG",e[e.UNKNOWN_TYPE=42]="UNKNOWN_TYPE",e[e.UNSUPPORTED_MODIFIER=43]="UNSUPPORTED_MODIFIER",e[e.DEPRECATED_MAINTAINER=44]="DEPRECATED_MAINTAINER",e[e.HEALTHCHECK_CMD_ARGUMENT_MISSING=45]="HEALTHCHECK_CMD_ARGUMENT_MISSING",e[e.FLAG_INVALID_FROM_VALUE=46]="FLAG_INVALID_FROM_VALUE",e[e.JSON_IN_SINGLE_QUOTES=47]="JSON_IN_SINGLE_QUOTES",e[e.WORKDIR_IS_NOT_ABSOLUTE=48]="WORKDIR_IS_NOT_ABSOLUTE"}(t.ValidationCode||(t.ValidationCode={})),function(e){e[e.IGNORE=0]="IGNORE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(t.ValidationSeverity||(t.ValidationSeverity={})),t.format=function(e,t){const n=a.TextDocument.create("","",0,e);return(new r.DockerFormatter).formatDocument(n,t)},t.validate=function(e,t){const n=a.TextDocument.create("","",0,e);return new i.Validator(t).validate(n)}},813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(179);t.JSONArgument=class JSONArgument extends a.Argument{constructor(e,t,n){super(e,t),this.jsonRange=n}getJSONRange(){return this.jsonRange}getJSONValue(){let e=super.getValue();return e=e.substring(1,e.length-1)}}},814:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(242),i=n(119);t.Comment=class Comment extends r.Line{constructor(e,t){super(e,t)}toString(){const e=this.getContent();return e?"# "+e:"#"}getContent(){let e=this.getContentRange();return null===e?"":this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getContentRange(){let e=this.getRange();const t=this.document.offsetAt(e.start);let n=this.document.getText().substring(t,this.document.offsetAt(e.end)),r=-1,s=-1;for(let e=1;e<n.length;e++)if(!i.Util.isWhitespace(n.charAt(e))){r=e;break}if(-1===r)return null;for(let e=n.length-1;e>=1;e--)if(!i.Util.isWhitespace(n.charAt(e))){s=e+1;break}return a.Range.create(this.document.positionAt(t+r),this.document.positionAt(t+s))}}},815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(814),i=n(816),s=n(85),o=n(105),c=n(819),u=n(362),l=n(364),g=n(365),d=n(366),h=n(367),m=n(244),f=n(368),p=n(820),A=n(369),_=n(821),R=n(822),I=n(823),S=n(824),D=n(825),E=n(2465),N=n(178);class Parser{static createInstruction(e,t,n,a,r,i){switch(r.toUpperCase()){case"ADD":return new c.Add(e,a,t,n,r,i);case"ARG":return new u.Arg(e,a,t,n,r,i);case"CMD":return new l.Cmd(e,a,t,n,r,i);case"COPY":return new g.Copy(e,a,t,n,r,i);case"ENTRYPOINT":return new h.Entrypoint(e,a,t,n,r,i);case"ENV":return new d.Env(e,a,t,n,r,i);case"FROM":return new m.From(e,a,t,n,r,i);case"HEALTHCHECK":return new f.Healthcheck(e,a,t,n,r,i);case"LABEL":return new p.Label(e,a,t,n,r,i);case"ONBUILD":return new A.Onbuild(e,a,t,n,r,i);case"RUN":return new o.JSONInstruction(e,a,t,n,r,i);case"SHELL":return new _.Shell(e,a,t,n,r,i);case"STOPSIGNAL":return new R.Stopsignal(e,a,t,n,r,i);case"WORKDIR":return new I.Workdir(e,a,t,n,r,i);case"USER":return new S.User(e,a,t,n,r,i);case"VOLUME":return new D.Volume(e,a,t,n,r,i)}return new s.Instruction(e,a,t,n,r,i)}getDirectiveSymbol(e,t){this.escapeChar="";e:for(let n=0;n<t.length;n++)switch(t.charAt(n)){case" ":case"\t":break;case"\r":case"\n":break e;case"#":let s=n,o=-1,c=-1;for(let u=n+1;u<t.length;u++){let n=t.charAt(u);switch(n){case" ":case"\t":-1!==o&&-1===c&&(c=u);break;case"\r":case"\n":return new r.Comment(e,a.Range.create(e.positionAt(s),e.positionAt(u)));case"=":let l=-1,g=-1;-1===c&&(c=u);let d=t.length;t:for(let e=u+1;e<t.length;e++)switch(n=t.charAt(e)){case"\r":case"\n":-1!==l&&-1===g&&(g=e),d=e;break t;case"\t":case" ":-1!==l&&-1===g&&(g=e);continue;default:-1===l&&(l=e)}let h=a.Range.create(e.positionAt(s),e.positionAt(d));if(-1===o)return new r.Comment(e,h);-1===l?(l=u+1,g=d):-1===g&&(g=t.length);let m=a.Range.create(e.positionAt(o),e.positionAt(c)),f=a.Range.create(e.positionAt(l),e.positionAt(g));return new i.ParserDirective(e,h,m,f);default:-1===o&&(o=u)}}break;default:break e}return null}parse(e){let t=a.TextDocument.create("","",0,e),n=new E.Dockerfile(t),s=this.getDirectiveSymbol(t,e),o=0;if(this.escapeChar="\\",s instanceof i.ParserDirective){let e=s;if(n.setDirective(e),N.Directive.escape===e.getDirective()){let t=e.getValue();"`"!==t&&"\\"!==t||(this.escapeChar=t)}o=t.offsetAt(s.getRange().end)}else s instanceof r.Comment&&(n.addComment(s),o=t.offsetAt(a.Position.create(1,0)));e:for(let i=o;i<e.length;i++){let s=e.charAt(i);switch(s){case" ":case"\t":case"\r":case"\n":break;case"#":for(let o=i+1;o<e.length;o++)switch(s=e.charAt(o)){case"\r":n.addComment(new r.Comment(t,a.Range.create(t.positionAt(i),t.positionAt(o)))),i=o+1;continue e;case"\n":n.addComment(new r.Comment(t,a.Range.create(t.positionAt(i),t.positionAt(o)))),i=o;continue e}let o=a.Range.create(t.positionAt(i),t.positionAt(e.length));n.addComment(new r.Comment(t,o));break e;default:let c=s,u=i,l=-1,g=null,d=null;t:for(let o=i+1;o<e.length;o++)switch(s=e.charAt(o)){case this.escapeChar:if("\r"===(s=e.charAt(o+1)))o+=2;else if("\n"===s)o++;else{if(" "===s||"\t"===s){for(let t=o+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":o=t+1;continue t;case"\n":o=t;continue t;default:l=o+1,c+=this.escapeChar,o=t-2;continue t}l=o+1,c+=this.escapeChar;break t}l=o+1,c+=this.escapeChar}break;case" ":case"\t":-1===l&&(l=o);let h=!1;n:for(let s=o+1;s<e.length;s++)switch(e.charAt(s)){case"\r":case"\n":if(h)continue;i=s,g=a.Range.create(t.positionAt(u),t.positionAt(s)),d=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,d));continue e;case this.escapeChar:let o=e.charAt(s+1);if("\n"===o)h=!0,s++;else if("\r"===o)h=!0,s+=2;else if(" "===o||"\t"===o)a:for(let t=s+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":h=!0,s=t+1;break a;case"\n":h=!0,s=t;break a;default:s=t;break a}continue;case"#":if(h){for(let i=s+1;i<e.length;i++)switch(e.charAt(i)){case"\r":n.addComment(new r.Comment(t,a.Range.create(t.positionAt(s),t.positionAt(i)))),s=i+1;continue n;case"\n":let o=a.Range.create(t.positionAt(s),t.positionAt(i));n.addComment(new r.Comment(t,o)),s=i;continue n}let i=a.Range.create(t.positionAt(s),t.positionAt(e.length));n.addComment(new r.Comment(t,i));break n}break;case" ":case"\t":break;default:h&&(h=!1)}g=a.Range.create(t.positionAt(u),t.positionAt(e.length)),d=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,d));break e;case"\r":-1===l&&(l=o),o++;case"\n":-1===l&&(l=o),g=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,g)),i=o;continue e;default:l=o+1,c+=s}-1===l&&(l=e.length),g=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,g));break e}}return n}}t.Parser=Parser},816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(178),r=n(242);t.ParserDirective=class ParserDirective extends r.Line{constructor(e,t,n,a){super(e,t),this.nameRange=n,this.valueRange=a}toString(){return"# "+this.getName()+"="+this.getValue()}getNameRange(){return this.nameRange}getValueRange(){return this.valueRange}getName(){return this.document.getText().substring(this.document.offsetAt(this.nameRange.start),this.document.offsetAt(this.nameRange.end))}getValue(){return this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end))}getDirective(){return a.Directive[this.getName().toLowerCase()]}}},817:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Variable=class Variable{constructor(e,t,n,a,r,i,s,o,c,u){this.name=e,this.nameRange=t,this.range=n,this.modifier=a,this.modifierRange=r,this.substitutionParameter=i,this.substitutionRange=s,this.defined=o,this.buildVariable=c,this.stringValue=u}toString(){return this.stringValue}getName(){return this.name}getNameRange(){return this.nameRange}getRange(){return this.range}getModifier(){return this.modifier}getModifierRange(){return this.modifierRange}getSubstitutionParameter(){return this.substitutionParameter}getSubstitutionRange(){return this.substitutionRange}isDefined(){return void 0!==this.buildVariable}isBuildVariable(){return!0===this.buildVariable}isEnvironmentVariable(){return!1===this.buildVariable}}},818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Flag=class Flag{constructor(e,t,n,a,r){this.range=e,this.name=t,this.nameRange=n,this.value=a,this.valueRange=r}toString(){return this.valueRange?"--"+this.name+"="+this.value:"--"+this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}}},819:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105);t.Add=class Add extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}stopSearchingForFlags(e){return-1===e.indexOf("--")}}},820:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(243),r=n(119);t.Label=class Label extends a.PropertyInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getVariables(){const e=super.getVariables(),t=this.getProperties();for(const n of t){const t=n.getUnescapedValue();if(null!==t&&t.length>2&&"'"===t.charAt(0)&&"'"===t.charAt(t.length-1)){const t=n.getValueRange();for(let n=0;n<e.length;n++)r.Util.isInsideRange(e[n].getRange().start,t)&&(e.splice(n,1),n--)}}return e}getProperties(){return super.getProperties()}}},821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105);t.Shell=class Shell extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},822:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(85);t.Stopsignal=class Stopsignal extends a.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},823:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(85);t.Workdir=class Workdir extends a.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(85);t.User=class User extends a.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105);t.Volume=class Volume extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2468);!function(e){e.LOWERCASE="docker.command.convertToLowercase",e.UPPERCASE="docker.command.convertToUppercase",e.EXTRA_ARGUMENT="docker.command.removeExtraArgument",e.DIRECTIVE_TO_BACKTICK="docker.command.directiveToBacktick",e.DIRECTIVE_TO_BACKSLASH="docker.command.directiveToBackslash",e.FLAG_TO_CHOWN="docker.command.flagToChown",e.FLAG_TO_COPY_FROM="docker.command.flagToCopyFrom",e.FLAG_TO_HEALTHCHECK_INTERVAL="docker.command.flagToHealthcheckInterval",e.FLAG_TO_HEALTHCHECK_RETRIES="docker.command.flagToHealthcheckRetries",e.FLAG_TO_HEALTHCHECK_START_PERIOD="docker.command.flagToHealthcheckStartPeriod",e.FLAG_TO_HEALTHCHECK_TIMEOUT="docker.command.flagToHealthcheckTimeout",e.REMOVE_EMPTY_CONTINUATION_LINE="docker.command.removeEmptyContinuationLine",e.CONVERT_TO_AS="docker.command.convertToAS"}(t.CommandIds||(t.CommandIds={})),function(e){e.createLanguageService=function(){return new a.LanguageService}}(t.DockerfileLanguageServiceFactory||(t.DockerfileLanguageServiceFactory={}))},827:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(180);t.JSONArgument=class JSONArgument extends a.Argument{constructor(e,t,n){super(e,t),this.jsonRange=n}getJSONRange(){return this.jsonRange}getJSONValue(){let e=super.getValue();return e=e.substring(1,e.length-1)}}},828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(245),i=n(120);t.Comment=class Comment extends r.Line{constructor(e,t){super(e,t)}toString(){const e=this.getContent();return e?"# "+e:"#"}getContent(){let e=this.getContentRange();return null===e?"":this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getContentRange(){let e=this.getRange();const t=this.document.offsetAt(e.start);let n=this.document.getText().substring(t,this.document.offsetAt(e.end)),r=-1,s=-1;for(let e=1;e<n.length;e++)if(!i.Util.isWhitespace(n.charAt(e))){r=e;break}if(-1===r)return null;for(let e=n.length-1;e>=1;e--)if(!i.Util.isWhitespace(n.charAt(e))){s=e+1;break}return a.Range.create(this.document.positionAt(t+r),this.document.positionAt(t+s))}}},829:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(828),i=n(830),s=n(86),o=n(106),c=n(833),u=n(372),l=n(374),g=n(375),d=n(376),h=n(377),m=n(247),f=n(378),p=n(834),A=n(379),_=n(835),R=n(836),I=n(837),S=n(838),D=n(839),E=n(2470),N=n(50);class Parser{static createInstruction(e,t,n,a,r,i){switch(r.toUpperCase()){case"ADD":return new c.Add(e,a,t,n,r,i);case"ARG":return new u.Arg(e,a,t,n,r,i);case"CMD":return new l.Cmd(e,a,t,n,r,i);case"COPY":return new g.Copy(e,a,t,n,r,i);case"ENTRYPOINT":return new h.Entrypoint(e,a,t,n,r,i);case"ENV":return new d.Env(e,a,t,n,r,i);case"FROM":return new m.From(e,a,t,n,r,i);case"HEALTHCHECK":return new f.Healthcheck(e,a,t,n,r,i);case"LABEL":return new p.Label(e,a,t,n,r,i);case"ONBUILD":return new A.Onbuild(e,a,t,n,r,i);case"RUN":return new o.JSONInstruction(e,a,t,n,r,i);case"SHELL":return new _.Shell(e,a,t,n,r,i);case"STOPSIGNAL":return new R.Stopsignal(e,a,t,n,r,i);case"WORKDIR":return new I.Workdir(e,a,t,n,r,i);case"USER":return new S.User(e,a,t,n,r,i);case"VOLUME":return new D.Volume(e,a,t,n,r,i)}return new s.Instruction(e,a,t,n,r,i)}getDirectiveSymbol(e,t){this.escapeChar="";e:for(let n=0;n<t.length;n++)switch(t.charAt(n)){case" ":case"\t":break;case"\r":case"\n":break e;case"#":let s=n,o=-1,c=-1;for(let u=n+1;u<t.length;u++){let n=t.charAt(u);switch(n){case" ":case"\t":-1!==o&&-1===c&&(c=u);break;case"\r":case"\n":return new r.Comment(e,a.Range.create(e.positionAt(s),e.positionAt(u)));case"=":let l=-1,g=-1;-1===c&&(c=u);let d=t.length;t:for(let e=u+1;e<t.length;e++)switch(n=t.charAt(e)){case"\r":case"\n":-1!==l&&-1===g&&(g=e),d=e;break t;case"\t":case" ":-1!==l&&-1===g&&(g=e);continue;default:-1===l&&(l=e)}let h=a.Range.create(e.positionAt(s),e.positionAt(d));if(-1===o)return new r.Comment(e,h);-1===l?(l=u+1,g=d):-1===g&&(g=t.length);let m=a.Range.create(e.positionAt(o),e.positionAt(c)),f=a.Range.create(e.positionAt(l),e.positionAt(g));return new i.ParserDirective(e,h,m,f);default:-1===o&&(o=u)}}break;default:break e}return null}parse(e){let t=a.TextDocument.create("","",0,e),n=new E.Dockerfile(t),s=this.getDirectiveSymbol(t,e),o=0;if(this.escapeChar="\\",s instanceof i.ParserDirective){let e=s;if(n.setDirective(e),N.Directive.escape===e.getDirective()){let t=e.getValue();"`"!==t&&"\\"!==t||(this.escapeChar=t)}o=t.offsetAt(s.getRange().end)}else s instanceof r.Comment&&(n.addComment(s),o=t.offsetAt(a.Position.create(1,0)));e:for(let i=o;i<e.length;i++){let s=e.charAt(i);switch(s){case" ":case"\t":case"\r":case"\n":break;case"#":for(let o=i+1;o<e.length;o++)switch(s=e.charAt(o)){case"\r":n.addComment(new r.Comment(t,a.Range.create(t.positionAt(i),t.positionAt(o)))),i=o+1;continue e;case"\n":n.addComment(new r.Comment(t,a.Range.create(t.positionAt(i),t.positionAt(o)))),i=o;continue e}let o=a.Range.create(t.positionAt(i),t.positionAt(e.length));n.addComment(new r.Comment(t,o));break e;default:let c=s,u=i,l=-1,g=null,d=null;t:for(let o=i+1;o<e.length;o++)switch(s=e.charAt(o)){case this.escapeChar:if("\r"===(s=e.charAt(o+1)))o+=2;else if("\n"===s)o++;else{if(" "===s||"\t"===s){for(let t=o+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":o=t+1;continue t;case"\n":o=t;continue t;default:l=o+1,c+=this.escapeChar,o=t-2;continue t}l=o+1,c+=this.escapeChar;break t}l=o+1,c+=this.escapeChar}break;case" ":case"\t":-1===l&&(l=o);let h=!1;n:for(let s=o+1;s<e.length;s++)switch(e.charAt(s)){case"\r":case"\n":if(h)continue;i=s,g=a.Range.create(t.positionAt(u),t.positionAt(s)),d=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,d));continue e;case this.escapeChar:let o=e.charAt(s+1);if("\n"===o)h=!0,s++;else if("\r"===o)h=!0,s+=2;else if(" "===o||"\t"===o)a:for(let t=s+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":h=!0,s=t+1;break a;case"\n":h=!0,s=t;break a;default:s=t;break a}continue;case"#":if(h){for(let i=s+1;i<e.length;i++)switch(e.charAt(i)){case"\r":n.addComment(new r.Comment(t,a.Range.create(t.positionAt(s),t.positionAt(i)))),s=i+1;continue n;case"\n":let o=a.Range.create(t.positionAt(s),t.positionAt(i));n.addComment(new r.Comment(t,o)),s=i;continue n}let i=a.Range.create(t.positionAt(s),t.positionAt(e.length));n.addComment(new r.Comment(t,i));break n}break;case" ":case"\t":break;default:h&&(h=!1)}g=a.Range.create(t.positionAt(u),t.positionAt(e.length)),d=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,d));break e;case"\r":-1===l&&(l=o),o++;case"\n":-1===l&&(l=o),g=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,g)),i=o;continue e;default:l=o+1,c+=s}-1===l&&(l=e.length),g=a.Range.create(t.positionAt(u),t.positionAt(l)),n.addInstruction(Parser.createInstruction(t,n,this.escapeChar,g,c,g));break e}}return n.organizeComments(),n}}t.Parser=Parser},830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(50),r=n(245);t.ParserDirective=class ParserDirective extends r.Line{constructor(e,t,n,a){super(e,t),this.nameRange=n,this.valueRange=a}toString(){return"# "+this.getName()+"="+this.getValue()}getNameRange(){return this.nameRange}getValueRange(){return this.valueRange}getName(){return this.document.getText().substring(this.document.offsetAt(this.nameRange.start),this.document.offsetAt(this.nameRange.end))}getValue(){return this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end))}getDirective(){return a.Directive[this.getName().toLowerCase()]}}},831:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Variable=class Variable{constructor(e,t,n,a,r,i,s,o,c,u){this.name=e,this.nameRange=t,this.range=n,this.modifier=a,this.modifierRange=r,this.substitutionParameter=i,this.substitutionRange=s,this.defined=o,this.buildVariable=c,this.stringValue=u}toString(){return this.stringValue}getName(){return this.name}getNameRange(){return this.nameRange}getRange(){return this.range}getModifier(){return this.modifier}getModifierRange(){return this.modifierRange}getSubstitutionParameter(){return this.substitutionParameter}getSubstitutionRange(){return this.substitutionRange}isDefined(){return this.defined}isBuildVariable(){return!0===this.buildVariable}isEnvironmentVariable(){return!1===this.buildVariable}}},832:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Flag=class Flag{constructor(e,t,n,a,r){this.range=e,this.name=t,this.nameRange=n,this.value=a,this.valueRange=r}toString(){return this.valueRange?"--"+this.name+"="+this.value:"--"+this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}}},833:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106);t.Add=class Add extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}stopSearchingForFlags(e){return-1===e.indexOf("--")}}},834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(246),r=n(120);t.Label=class Label extends a.PropertyInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}getVariables(){const e=super.getVariables(),t=this.getProperties();for(const n of t){const t=n.getUnescapedValue();if(null!==t&&t.length>2&&"'"===t.charAt(0)&&"'"===t.charAt(t.length-1)){const t=n.getValueRange();for(let n=0;n<e.length;n++)r.Util.isInsideRange(e[n].getRange().start,t)&&(e.splice(n,1),n--)}}return e}getProperties(){return super.getProperties()}}},835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106);t.Shell=class Shell extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(86);t.Stopsignal=class Stopsignal extends a.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(86);t.Workdir=class Workdir extends a.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(86);t.User=class User extends a.Instruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106);t.Volume=class Volume extends a.JSONInstruction{constructor(e,t,n,a,r,i){super(e,t,n,a,r,i)}}},840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(145),i=n(50),s=function(){function e(){}return e.prototype.computeBuildStageDefinition=function(e,t){for(var n=void 0,a=0,r=e.getCOPYs();a<r.length;a++){var i=(c=r[a]).getFromFlag();if(i)if((u=i.getValueRange())&&u.start.line===t.line&&u.start.character<=t.character&&t.character<=u.end.character){n=i.getValue();break}}for(var s=0,o=e.getFROMs();s<o.length;s++){var c,u;if(u=(c=o[s]).getBuildStageRange()){if(u.start.line===t.line&&u.start.character<=t.character&&t.character<=u.end.character)return u;if(void 0!==n&&c.getBuildStage().toLowerCase()===n.toLowerCase())return u}}return null},e.computeVariableDefinition=function(e,t){for(var n=null,a=0,s=e.getARGs();a<s.length;a++){if((g=s[a].getProperty())&&r.Util.isInsideRange(t,g.getNameRange())){n=g.getName();break}}if(null===n)e:for(var o=0,c=e.getENVs();o<c.length;o++)for(var u=0,l=c[o].getProperties();u<l.length;u++){var g=l[u];if(r.Util.isInsideRange(t,g.getNameRange())){n=g.getName();break e}}if(null===n)e:for(var d=0,h=e.getInstructions();d<h.length;d++)for(var m=0,f=(R=h[d]).getVariables();m<f.length;m++){var p=f[m];if(r.Util.isInsideRange(t,p.getNameRange())){n=p.getName();break e}}for(var A=0,_=e.getInstructions();A<_.length;A++){var R;if((R=_[A])instanceof i.Arg){if((g=R.getProperty())&&g.getName()===n)return g}else if(R instanceof i.Env)for(var I=0,S=R.getProperties();I<S.length;I++){if((g=S[I]).getName()===n)return g}}return null},e.findDefinition=function(t,n){for(var a=0,i=t.getFROMs();a<i.length;a++)for(var s=0,o=i[a].getVariables();s<o.length;s++){var c=o[s];if(r.Util.isInsideRange(n,c.getNameRange())){for(var u=0,l=t.getInitialARGs();u<l.length;u++){var g=l[u].getProperty();if(g&&g.getName()===c.getName())return g}return null}}var d=t.getContainingImage(n);return e.computeVariableDefinition(d,n)},e.prototype.computeVariableDefinition=function(t,n){var a=e.findDefinition(t,n);return a?a.getNameRange():null},e.prototype.computeDefinitionRange=function(e,t){var n=i.DockerfileParser.parse(e),a=this.computeBuildStageDefinition(n,t);return a||this.computeVariableDefinition(n,t)},e.prototype.computeDefinition=function(e,t,n){var r=i.DockerfileParser.parse(t),s=this.computeBuildStageDefinition(r,n);return null!==s?a.Location.create(e.uri,s):null!==(s=this.computeVariableDefinition(r,n))?a.Location.create(e.uri,s):null},e}();t.DockerDefinition=s},841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(50),i=n(840),s=n(145),o=function(){function e(){}return e.prototype.computeHighlightRanges=function(e,t){var n=r.DockerfileParser.parse(e),o=(new i.DockerDefinition).computeDefinitionRange(e,t),c=null===o?n.getContainingImage(t):n.getContainingImage(o.start),u=[];if(null===o){for(var l=0,g=n.getCOPYs();l<g.length;l++){if(q=(ee=g[l]).getFromFlag()){var d=q.getValueRange();if(d&&d.start.line===t.line&&d.start.character<=t.character&&t.character<=d.end.character){for(var h=q.getValue(),m=0,f=n.getCOPYs();m<f.length;m++){var p=f[m].getFromFlag();p&&p.getValue().toLowerCase()===h.toLowerCase()&&u.push(a.DocumentHighlight.create(p.getValueRange(),a.DocumentHighlightKind.Read))}return u}}}for(var A=0,_=n.getFROMs();A<_.length;A++)for(var R=0,I=(ce=_[A]).getVariables();R<I.length;R++){var S=I[R];if(s.Util.isInsideRange(t,S.getNameRange())){for(var D=S.getName(),E=0,N=n.getFROMs();E<N.length;E++)for(var C=0,b=N[E].getVariables();C<b.length;C++){var v=b[C];v.getName()===D&&u.push(a.DocumentHighlight.create(v.getNameRange(),a.DocumentHighlightKind.Read))}return u}}for(var V=0,k=c.getInstructions();V<k.length;V++)for(var T=0,O=(ee=k[V]).getVariables();T<O.length;T++){S=O[T];if(s.Util.isInsideRange(t,S.getNameRange())){D=S.getName();for(var M=0,P=c.getInstructions();M<P.length;M++){var y=P[M];if(!(y instanceof r.From))for(var L=0,w=y.getVariables();L<w.length;L++){var U=w[L];U.getName()===D&&u.push(a.DocumentHighlight.create(U.getNameRange(),a.DocumentHighlightKind.Read))}}return u}}}else{for(var F=a.TextDocument.create("","",0,e),x=F.getText().substring(F.offsetAt(o.start),F.offsetAt(o.end)),H=!1,G=0,K=n.getFROMs();G<K.length;G++){(h=(ce=K[G]).getBuildStage())&&x.toLowerCase()===h.toLowerCase()&&(u.push(a.DocumentHighlight.create(ce.getBuildStageRange(),a.DocumentHighlightKind.Write)),H=!0)}if(H){for(var W=0,B=n.getCOPYs();W<B.length;W++){var q;(q=(ee=B[W]).getFromFlag())&&q.getValue().toLowerCase()===x.toLowerCase()&&u.push(a.DocumentHighlight.create(q.getValueRange(),a.DocumentHighlightKind.Read))}return u}for(var Y=0,$=c.getARGs();Y<$.length;Y++){(ie=$[Y].getProperty())&&ie.getName()===x&&u.push(a.DocumentHighlight.create(ie.getNameRange(),a.DocumentHighlightKind.Write))}for(var J=0,j=c.getENVs();J<j.length;J++)for(var Q=0,X=j[J].getProperties();Q<X.length;Q++){(ie=X[Q]).getName()===x&&u.push(a.DocumentHighlight.create(ie.getNameRange(),a.DocumentHighlightKind.Write))}for(var z=0,Z=c.getInstructions();z<Z.length;z++){var ee;if(!((ee=Z[z])instanceof r.From))for(var te=0,ne=ee.getVariables();te<ne.length;te++){(S=ne[te]).getName()===x&&u.push(a.DocumentHighlight.create(S.getNameRange(),a.DocumentHighlightKind.Read))}}for(var ae=0,re=n.getInitialARGs();ae<re.length;ae++){var ie;if((ie=re[ae].getProperty())&&s.Util.rangeEquals(ie.getNameRange(),o))for(var se=0,oe=n.getFROMs();se<oe.length;se++)for(var ce,ue=0,le=(ce=oe[se]).getVariables();ue<le.length;ue++){(S=le[ue]).getName()===x&&u.push(a.DocumentHighlight.create(S.getNameRange(),a.DocumentHighlightKind.Read))}}}return u},e}();t.DockerHighlight=o},842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.dockerMessages={hoverAdd:"Copy files, folders, or remote URLs from `source` to the `dest` path in the image's filesystem.\n\n",hoverArg:"Define a variable with an optional default value that users can override at build-time when using `docker build`.\n\nSince Docker 1.9\n\n",hoverCmd:"Provide defaults for an executing container. If an executable is not specified, then `ENTRYPOINT` must be specified as well. There can only be one `CMD` instruction in a `Dockerfile`.\n\n",hoverCopy:"Copy files or folders from `source` to the `dest` path in the image's filesystem.\n\n",hoverEntrypoint:"Configures the container to be run as an executable.\n\n",hoverEnv:"Set the environment variable `key` to the value `value`.\n\n",hoverExpose:"Define the network `port`s that this container will listen on at runtime.\n\n",hoverFrom:"Set the `baseImage` to use for subsequent instructions. `FROM` must be the first instruction in a `Dockerfile`.\n\n",hoverHealthcheck:"Define how Docker should test the container to check that it is still working. Alternatively, disable the base image's `HEALTHCHECK` instruction. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12\n\n",hoverLabel:"Adds metadata to an image.\n\nSince Docker 1.6\n\n",hoverMaintainer:"Set the _Author_ field of the generated images. This instruction has been deprecated in favor of `LABEL`.\n\n",hoverOnbuild:"Add a _trigger_ instruction to the image that will be executed when the image is used as a base image for another build.\n\n",hoverRun:"Execute any commands on top of the current image as a new layer and commit the results.\n\n",hoverShell:"Override the default shell used for the _shell_ form of commands.\n\nSince Docker 1.12\n\n",hoverStopsignal:"Set the system call signal to use to send to the container to exit. Signals can be valid unsigned numbers or a signal name in the `SIGNAME` format such as `SIGKILL`.\n\nSince Docker 1.9\n\n",hoverUser:"Set the user name or UID to use when running the image in addition to any subsequent `CMD`, `ENTRYPOINT`, or `RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverVolume:"Create a mount point with the specified name and mark it as holding externally mounted volumes from the native host or from other containers.\n\n",hoverWorkdir:"Set the working directory for any subsequent `ADD`, `COPY`, `CMD`, `ENTRYPOINT`, or `RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverEscape:"Sets the character to use to escape characters and newlines in this Dockerfile. If unspecified, the default escape character is `\\`.\n\n",hoverOnlineDocumentationFooter:"\n\n[Online documentation](${0})",hoverAddFlagChown:"The username, groupname, or UID/GID combination to own the added content.",hoverCopyFlagChown:"The username, groupname, or UID/GID combination to own the copied content.",hoverCopyFlagFrom:"The previous build stage to use as the source location instead of the build's context.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagInterval:"The seconds to wait for the health check to run after the container has started, and then again the number of seconds to wait before running again after the previous check has completed.",hoverHealthcheckFlagRetries:"The number of consecutive failures of this health check before the container is considered to be `unhealthy`.",hoverHealthcheckFlagStartPeriod:"The number of seconds to wait for the container to startup. Failures during this grace period will not count towards the maximum number of retries. However, should a health check succeed during this period then any subsequent failures will count towards the maximum number of retries.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagTimeout:"The number of seconds to wait for the check to complete before considering it to have failed.",proposalArgNameOnly:"Define a variable that users can set at build-time when using `docker build`.\n\n",proposalArgDefaultValue:"Define a variable with the given default value that users can override at build-time when using `docker build`.\n\n",proposalHealthcheckExec:"Define how Docker should test the container to check that it is still working. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12\n\n",proposalHealthcheckNone:"Disable the `HEALTHCHECK` instruction inherited from the base image if one exists. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12"},this.markdowns={ADD:{contents:this.dockerMessages.hoverAdd+"```\nADD hello.txt /absolute/path\nADD hello.txt relative/to/workdir\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#add")},ADD_FlagChown:{contents:this.dockerMessages.hoverAddFlagChown},ARG:{contents:this.dockerMessages.hoverArg+"```\nARG userName\nARG testOutputDir=test\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},ARG_NameOnly:{contents:this.dockerMessages.proposalArgNameOnly+"```\nARG userName\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},ARG_DefaultValue:{contents:this.dockerMessages.proposalArgDefaultValue+"```\nARG testOutputDir=test\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},CMD:{contents:this.dockerMessages.hoverCmd+'```\nCMD [ "/bin/ls", "-l" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#cmd")},COPY:{contents:this.dockerMessages.hoverCopy+"```\nCOPY hello.txt /absolute/path\nCOPY hello.txt relative/to/workdir\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#copy")},COPY_FlagChown:{contents:this.dockerMessages.hoverCopyFlagChown},COPY_FlagFrom:{contents:this.dockerMessages.hoverCopyFlagFrom},ENTRYPOINT:{contents:this.dockerMessages.hoverEntrypoint+'```\nENTRYPOINT [ "/opt/app/run.sh", "--port", "8080" ]\n```'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#entrypoint")},ENV:{contents:this.dockerMessages.hoverEnv+"```\nENV buildTag=1.0\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#env")},EXPOSE:{contents:this.dockerMessages.hoverExpose+"```\nEXPOSE 8080\nEXPOSE 80 443 22\nEXPOSE 7000-8000\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#expose")},FROM:{contents:this.dockerMessages.hoverFrom+"```\nFROM baseImage\nFROM baseImage:tag\nFROM baseImage@digest\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#from")},HEALTHCHECK:{contents:this.dockerMessages.hoverHealthcheck+"```\nHEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\nHEALTHCHECK NONE\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},HEALTHCHECK_CMD:{contents:this.dockerMessages.proposalHealthcheckExec+"```\nHEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},HEALTHCHECK_FlagInterval:{contents:this.dockerMessages.hoverHealthcheckFlagInterval},HEALTHCHECK_FlagRetries:{contents:this.dockerMessages.hoverHealthcheckFlagRetries},HEALTHCHECK_FlagStartPeriod:{contents:this.dockerMessages.hoverHealthcheckFlagStartPeriod},HEALTHCHECK_FlagTimeout:{contents:this.dockerMessages.hoverHealthcheckFlagTimeout},HEALTHCHECK_NONE:{contents:this.dockerMessages.proposalHealthcheckNone+"```\nHEALTHCHECK NONE\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},LABEL:{contents:this.dockerMessages.hoverLabel+'```\nLABEL version="1.0"\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#label")},MAINTAINER:{contents:this.dockerMessages.hoverMaintainer+"```\nMAINTAINER name\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#maintainer")},ONBUILD:{contents:this.dockerMessages.hoverOnbuild+"```\nONBUILD ADD . /opt/app/src/extensions\nONBUILD RUN /usr/local/bin/build.sh /opt/app```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#cmd")},RUN:{contents:this.dockerMessages.hoverRun+"```\nRUN apt-get update && apt-get install -y curl\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#run")},SHELL:{contents:this.dockerMessages.hoverShell+'```\nSHELL [ "powershell", "-command" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#shell")},STOPSIGNAL:{contents:this.dockerMessages.hoverStopsignal+"```\nSTOPSIGNAL 9\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#stopsignal")},USER:{contents:this.dockerMessages.hoverUser+"```\nUSER daemon\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#user")},VOLUME:{contents:this.dockerMessages.hoverVolume+'```\nVOLUME [ "/var/db" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#volume")},WORKDIR:{contents:this.dockerMessages.hoverWorkdir+"```\nWORKDIR /path/to/workdir\nWORKDIR relative/path\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#workdir")},escape:{contents:this.dockerMessages.hoverEscape+"```\n# escape=`\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#escape")}}}return e.prototype.formatMessage=function(e,t){return e.replace("${0}",t)},e.prototype.getMarkdown=function(e){return this.markdowns[e]},e}();t.MarkdownDocumentation=a},85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(119),i=n(242),s=n(179),o=n(817);t.Instruction=class Instruction extends i.Line{constructor(e,t,n,a,r,i){super(e,t),this.dockerfile=n,this.escapeChar=a,this.instruction=r,this.instructionRange=i}toString(){let e=this.getKeyword();for(let t of this.getArguments())e+=" ",e+=t.getValue();return e}getRangeContent(e){return null===e?null:this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getInstructionRange(){return this.instructionRange}getInstruction(){return this.instruction}getKeyword(){return this.getInstruction().toUpperCase()}getArgumentsRange(){let e=this.getArguments();return 0===e.length?null:a.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)}getArgumentsRanges(){let e=this.getArguments();if(0===e.length)return[];if(e[0].getRange().start.line===e[e.length-1].getRange().end.line)return[a.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)];let t=[],n=-1,i=e[0].getRange().start,s=this.getInstructionRange(),o=this.document.offsetAt(s.end)-this.document.offsetAt(s.start),c=this.getTextContent().substring(o,this.document.offsetAt(e[e.length-1].getRange().end)-this.document.offsetAt(s.start)),u=this.document.offsetAt(s.start)+o,l=!1,g=!1;for(let e=0;e<c.length;e++){let s=c.charAt(e);if(s===this.escapeChar){let r=c.charAt(e+1);if(" "===r||"\t"===r)e:for(let r=e+2;r<c.length;r++)switch(c.charAt(r)){case" ":case"\t":continue;case"\r":r++;case"\n":t.push(a.Range.create(i,this.document.positionAt(u+n+1))),i=null,l=!0,g=!1,e=r;break e;default:break e}else"\r"===r?(t.push(a.Range.create(i,this.document.positionAt(u+n+1))),i=null,l=!0,g=!1,e+=2):"\n"===r?(t.push(a.Range.create(i,this.document.positionAt(u+n+1))),i=null,l=!0,g=!1,e++):e++}else if(r.Util.isNewline(s))g&&(i&&t.push(a.Range.create(i,this.document.positionAt(u+n))),i=null,l=!0,g=!1);else if(!g){if(null===i){"#"===s&&(g=!0);let t=this.document.positionAt(u+e);0!==t.character&&(i=a.Position.create(t.line,0))}n=e}}return t.push(a.Range.create(i,this.document.positionAt(u+n+1))),t}getRawArgumentsContent(){let e=this.getArguments();return 0===e.length?null:this.getRangeContent(a.Range.create(e[0].getRange().start,e[e.length-1].getRange().end))}getArgumentsContent(){if(0===this.getArguments().length)return null;let e="",t=this.getArgumentsRanges(),n=this.document.getText();for(let a of t)e+=n.substring(this.document.offsetAt(a.start),this.document.offsetAt(a.end));return e}getArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end)-this.document.offsetAt(t.start),i=this.getTextContent().substring(n),o=this.document.offsetAt(t.start)+n,c=!1,u=!1,l=-1,g=!1,d=!1,h=-1,m="";for(let t=0;t<i.length;t++){let n=i.charAt(t);if(r.Util.isWhitespace(n)){if(d){g=!0,r.Util.isNewline(n)&&(g=!1,u&&(u=!1));continue}-1!==l&&(-1===h?e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+t)))):e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h)))),h=-1,m="",l=-1)}else if(n===this.escapeChar){let r=i.charAt(t+1);if(" "===r||"\t"===r)e:for(let e=t+2;e<i.length;e++)switch(i.charAt(e)){case" ":case"\t":continue;case"\r":e++;case"\n":d=!0,c=!0,-1!==l&&(h=t),t=e;break e;default:h=t,-1===l&&(t=e-1);break e}else"\r"===r?(d=!0,c=!0,-1!==l&&(h=t),t+=2):"\n"===r?(d=!0,c=!0,-1!==l&&(h=t),t++):(g&&-1!==h&&(e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h)))),m="",l=-1),g=!1,d=!1,"$"===r?m=m+n+r:m+=r,-1===l&&(l=t),t++)}else u||(c&&"#"===n?(c=!1,u=!0):(g&&-1!==h&&(e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h)))),m="",l=-1),g=!1,d=!1,h=-1,m+=n,-1===l&&(l=t)))}return-1!==l&&(-1===h?e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+i.length)))):e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h))))),e}getExpandedArguments(){let e=this.getArguments();for(let t=0;t<e.length;t++){const n=e[t].getRange();let a=this.document.offsetAt(n.start);const r=this.parseVariables(a,e[t].getValue()),i=[];let o=!1;for(let e of r){const t=this.dockerfile.resolveVariable(e.getName(),e.getNameRange().start.line);i.push(t),o=o||void 0!==t}if(o){let o="";for(let e=0;e<i.length;e++){const t=r[e].getRange(),n=this.document.offsetAt(t.start),s=this.document.offsetAt(t.end);i[e]?(o+=this.document.getText().substring(a,n),o+=i[e],a=s):(o+=this.document.getText().substring(a,s),a=s)}e[t]=new s.Argument(o,n)}}return e}getVariables(){const e=[],t=this.getArguments();for(const n of t){let t=n.getRange(),a=this.document.getText().substring(this.document.offsetAt(t.start),this.document.offsetAt(t.end));const r=this.parseVariables(this.document.offsetAt(n.getRange().start),a);for(const t of r)e.push(t)}return e}parseVariables(e,t){let n=[];e:for(let i=0;i<t.length;i++)switch(t.charAt(i)){case this.escapeChar:"$"===t.charAt(i+1)&&i++;break;case"$":if("{"===t.charAt(i+1)){let r="${",s="",c=-1,u="",l=-1,g=-1,d=-1;t:for(let h=i+2;h<t.length;h++){let m=t.charAt(h);switch(m){case this.escapeChar:for(let e=h+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":h=e;continue t}break;case"}":r+="}";let f=null,p=null,A=-1!==d?u:null,_=null;-1===c?c=h:c+1===h?(f="",p=a.Range.create(this.document.positionAt(e+c+1),this.document.positionAt(e+c+1))):(-1===l?(l=d+1,g=d+1):g+=1,f=t.substring(d,d+1),p=a.Range.create(this.document.positionAt(e+d),this.document.positionAt(e+d+1)),_=a.Range.create(this.document.positionAt(e+l),this.document.positionAt(e+g)));let R=this.document.positionAt(e+i);n.push(new o.Variable(s,a.Range.create(this.document.positionAt(e+i+2),this.document.positionAt(e+c)),a.Range.create(R,this.document.positionAt(e+h+1)),f,p,A,_,void 0!==this.dockerfile.resolveVariable(s,R.line),this.isBuildVariable(s,R.line),r)),i=h;continue e;case":":-1===c?c=h:-1!==d?(-1===l?(l=h,g=h):g=h,u+=":"):d=h,r+=":";break;case"\n":case"\r":case" ":case"\t":break;default:-1===c?s+=m:-1!==d?(-1===l?(l=h,g=h):g=h,u+=m):d=h,r+=m}}break e}if(r.Util.isWhitespace(t.charAt(i+1))||i===t.length-1)continue;{let r="";t:for(let s=i+1;s<t.length;s++){let c=t.charAt(s);switch(c){case"\r":case"\n":case" ":case"\t":continue;case"$":case"'":case'"':let u=this.document.positionAt(e+i);n.push(new o.Variable(r,a.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+s)),a.Range.create(u,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(r,u.line),this.isBuildVariable(r,u.line),"$"+r)),i=s-1;continue e;case this.escapeChar:for(let e=s+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":s=e;continue t}let l=this.document.positionAt(e+i);n.push(new o.Variable(r,a.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+s)),a.Range.create(l,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(r,l.line),this.isBuildVariable(r,l.line),"$"+r));break e}r+=c}let s=this.document.positionAt(e+i);n.push(new o.Variable(r,a.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+t.length)),a.Range.create(s,this.document.positionAt(e+t.length)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(r,s.line),this.isBuildVariable(r,s.line),"$"+r))}break e}return n}isBuildVariable(e,t){let n=this.dockerfile.getContainingImage(a.Position.create(t,0)),r=n.getENVs();for(let n=r.length-1;n>=0;n--)if(r[n].isBefore(t))for(let t of r[n].getProperties())if(t.getName()===e)return!1;let i=n.getARGs();for(let n=i.length-1;n>=0;n--)if(i[n].isBefore(t)){let t=i[n].getProperty();if(t&&t.getName()===e)return!0}}}},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(18),r=n(120),i=n(245),s=n(180),o=n(831),c=n(50);t.Instruction=class Instruction extends i.Line{constructor(e,t,n,a,r,i){super(e,t),this.dockerfile=n,this.escapeChar=a,this.instruction=r,this.instructionRange=i}toString(){let e=this.getKeyword();for(let t of this.getArguments())e+=" ",e+=t.getValue();return e}getRangeContent(e){return null===e?null:this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getInstructionRange(){return this.instructionRange}getInstruction(){return this.instruction}getKeyword(){return this.getInstruction().toUpperCase()}getArgumentsRange(){let e=this.getArguments();return 0===e.length?null:a.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)}getArgumentsRanges(){let e=this.getArguments();if(0===e.length)return[];if(e[0].getRange().start.line===e[e.length-1].getRange().end.line)return[a.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)];let t=[],n=-1,i=e[0].getRange().start,s=this.getInstructionRange(),o=this.document.offsetAt(s.end)-this.document.offsetAt(s.start),c=this.getTextContent().substring(o,this.document.offsetAt(e[e.length-1].getRange().end)-this.document.offsetAt(s.start)),u=this.document.offsetAt(s.start)+o,l=!1,g=!1;for(let e=0;e<c.length;e++){let s=c.charAt(e);if(s===this.escapeChar){let r=c.charAt(e+1);if(" "===r||"\t"===r)e:for(let r=e+2;r<c.length;r++)switch(c.charAt(r)){case" ":case"\t":continue;case"\r":r++;case"\n":t.push(a.Range.create(i,this.document.positionAt(u+n+1))),i=null,l=!0,g=!1,e=r;break e;default:break e}else"\r"===r?(t.push(a.Range.create(i,this.document.positionAt(u+n+1))),i=null,l=!0,g=!1,e+=2):"\n"===r?(t.push(a.Range.create(i,this.document.positionAt(u+n+1))),i=null,l=!0,g=!1,e++):e++}else if(r.Util.isNewline(s))g&&(i&&t.push(a.Range.create(i,this.document.positionAt(u+n))),i=null,l=!0,g=!1);else if(!g){if(null===i){"#"===s&&(g=!0);let t=this.document.positionAt(u+e);0!==t.character&&(i=a.Position.create(t.line,0))}n=e}}return t.push(a.Range.create(i,this.document.positionAt(u+n+1))),t}getRawArgumentsContent(){let e=this.getArguments();return 0===e.length?null:this.getRangeContent(a.Range.create(e[0].getRange().start,e[e.length-1].getRange().end))}getArgumentsContent(){if(0===this.getArguments().length)return null;let e="",t=this.getArgumentsRanges(),n=this.document.getText();for(let a of t)e+=n.substring(this.document.offsetAt(a.start),this.document.offsetAt(a.end));return e}getArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end)-this.document.offsetAt(t.start),i=this.getTextContent().substring(n),o=this.document.offsetAt(t.start)+n,c=!1,u=!1,l=-1,g=!1,d=!1,h=-1,m="";for(let t=0;t<i.length;t++){let n=i.charAt(t);if(r.Util.isWhitespace(n)){if(d){g=!0,r.Util.isNewline(n)&&(g=!1,u&&(u=!1));continue}-1!==l&&(-1===h?e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+t)))):e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h)))),h=-1,m="",l=-1)}else if(n===this.escapeChar){let r=i.charAt(t+1);if(" "===r||"\t"===r)e:for(let e=t+2;e<i.length;e++)switch(i.charAt(e)){case" ":case"\t":continue;case"\r":e++;case"\n":d=!0,c=!0,-1!==l&&(h=t),t=e;break e;default:h=t,-1===l&&(t=e-1);break e}else"\r"===r?(d=!0,c=!0,-1!==l&&(h=t),t+=2):"\n"===r?(d=!0,c=!0,-1!==l&&(h=t),t++):(g&&-1!==h&&(e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h)))),m="",l=-1),g=!1,d=!1,"$"===r?m=m+n+r:m+=r,-1===l&&(l=t),t++)}else u||(c&&"#"===n?(c=!1,u=!0):(g&&-1!==h&&(e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h)))),m="",l=-1),g=!1,d=!1,h=-1,m+=n,-1===l&&(l=t)))}return-1!==l&&(-1===h?e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+i.length)))):e.push(new s.Argument(m,a.Range.create(this.document.positionAt(o+l),this.document.positionAt(o+h))))),e}getExpandedArguments(){let e=this.getArguments();for(let t=0;t<e.length;t++){const n=e[t].getRange();let a=this.document.offsetAt(n.start);const r=this.parseVariables(a,e[t].getValue()),i=[];let o=!1;for(let e of r){const t=this.dockerfile.resolveVariable(e.getName(),e.getNameRange().start.line);i.push(t),o=o||void 0!==t}if(o){let o="";for(let e=0;e<i.length;e++){const t=r[e].getRange(),n=this.document.offsetAt(t.start),s=this.document.offsetAt(t.end);i[e]?(o+=this.document.getText().substring(a,n),o+=i[e],a=s):(o+=this.document.getText().substring(a,s),a=s)}const c=this.document.offsetAt(n.end);c!==a&&(o+=this.document.getText().substring(a,c)),e[t]=new s.Argument(o,n)}}return e}getVariables(){const e=[],t=this.getArguments();for(const n of t){let t=n.getRange(),a=this.document.getText().substring(this.document.offsetAt(t.start),this.document.offsetAt(t.end));const r=this.parseVariables(this.document.offsetAt(n.getRange().start),a);for(const t of r)e.push(t)}return e}parseVariables(e,t){let n=[];e:for(let i=0;i<t.length;i++)switch(t.charAt(i)){case this.escapeChar:"$"===t.charAt(i+1)&&i++;break;case"$":if("{"===t.charAt(i+1)){let r="${",s="",c=-1,u="",l=-1,g=-1,d=-1;t:for(let h=i+2;h<t.length;h++){let m=t.charAt(h);switch(m){case this.escapeChar:for(let e=h+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":h=e;continue t}break;case"}":r+="}";let f=null,p=null,A=-1!==d?u:null,_=null;-1===c?c=h:c+1===h?(f="",p=a.Range.create(this.document.positionAt(e+c+1),this.document.positionAt(e+c+1))):(-1===l?(l=d+1,g=d+1):g+=1,f=t.substring(d,d+1),p=a.Range.create(this.document.positionAt(e+d),this.document.positionAt(e+d+1)),_=a.Range.create(this.document.positionAt(e+l),this.document.positionAt(e+g)));let R=this.document.positionAt(e+i);n.push(new o.Variable(s,a.Range.create(this.document.positionAt(e+i+2),this.document.positionAt(e+c)),a.Range.create(R,this.document.positionAt(e+h+1)),f,p,A,_,void 0!==this.dockerfile.resolveVariable(s,R.line),this.isBuildVariable(s,R.line),r)),i=h;continue e;case":":-1===c?c=h:-1!==d?(-1===l?(l=h,g=h):g=h,u+=":"):d=h,r+=":";break;case"\n":case"\r":case" ":case"\t":break;default:-1===c?s+=m:-1!==d?(-1===l?(l=h,g=h):g=h,u+=m):d=h,r+=m}}break e}if(r.Util.isWhitespace(t.charAt(i+1))||i===t.length-1)continue;{let r="";t:for(let s=i+1;s<t.length;s++){let c=t.charAt(s);switch(c){case"\r":case"\n":case" ":case"\t":continue;case"$":case"'":case'"':let u=this.document.positionAt(e+i);n.push(new o.Variable(r,a.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+s)),a.Range.create(u,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(r,u.line),this.isBuildVariable(r,u.line),"$"+r)),i=s-1;continue e;case this.escapeChar:for(let e=s+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":s=e;continue t}let l=this.document.positionAt(e+i);n.push(new o.Variable(r,a.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+s)),a.Range.create(l,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(r,l.line),this.isBuildVariable(r,l.line),"$"+r));break e}if(null===c.match(/^[a-z0-9_]+$/i)){let t=this.document.positionAt(e+i);n.push(new o.Variable(r,a.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+s)),a.Range.create(t,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(r,t.line),this.isBuildVariable(r,t.line),"$"+r)),i=s-1;continue e}r+=c}let s=this.document.positionAt(e+i);n.push(new o.Variable(r,a.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+t.length)),a.Range.create(s,this.document.positionAt(e+t.length)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(r,s.line),this.isBuildVariable(r,s.line),"$"+r))}break e}return n}isBuildVariable(e,t){if(this.getKeyword()===c.Keyword.FROM){for(const t of this.dockerfile.getInitialARGs()){const n=t.getProperty();if(n&&e===n.getName())return!0}return}let n=this.dockerfile.getContainingImage(a.Position.create(t,0)),r=n.getENVs();for(let n=r.length-1;n>=0;n--)if(r[n].isBefore(t))for(let t of r[n].getProperties())if(t.getName()===e)return!1;let i=n.getARGs();for(let n=i.length-1;n>=0;n--)if(i[n].isBefore(t)){let t=i[n].getProperty();if(t&&t.getName()===e)return!0}}}}});