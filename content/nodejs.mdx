---
title: "Node.js"
metaTitle: "Introdução ao Node.js"
metaDescription: ""
---

# Conceitos

## O que é Node.js ?

* JavaScript no back-end;
  * Não lidamos com eventos do usuário final;
  * Rotas e integrações;
* Plataforma (não linguagem);
* Construída em cima da V8;
* Comparável a PHP / Ruby / Python / Go;

## O que é NPM?

* Instalar bibliotecas de terceiros;
* Fornecer bibliotecas;
* Comparáveis:
  * Composer do PHP;
  * Gems do Ruby;
  * PIP do Python;

## Características do Node

* Arquitetura Event-loop
  * Baseada em eventos (Rotas na maioria das vezes);
  * Call Stack;
* Node single-thread;
  * C++ por trás com libuv;
  * Background threads;
* Non-blocking I/O;

## Frameworks

* ExpressJS como base:
  * Sem opinião;
  * Ótimo para iniciar;
  * Micro-serviços
* Frameworks opinados:
  * AdonisJS;
  * NestJS;

# Instalações e Configurações

## Instalação do Node.js

Instalação do Node.js via *Chocolatey* no Windows

```shell
# Utilizando o Chocolatey
$ cinst nodejs
```

Instalação do Node.js via *NVM* em Linux/Mac

`https://yarnpkg.com/lang/en/docs/install/#debian-stable`


# O código por si só

## Configurando Estrutura Inicial do Node.js

```shell
$ yarn init -y
```

Isso criará o package.json que cuidará das versões das dependencias da aplicação.


## Express
O express é uma lib do NodeJS que executa possibilidades para criar e administrar rotas e views.


```shell
# Instalação do express
$ yarn add express
```
Isso adicionará uma nova dependencia no arquivo package.json

### Exemplos de uso
```javascript
const express = require('express')
```
Importa o *express* para dentro do backend. O Express retorna uma função, portanto:

```javascript
const server = express();
```
Para chamar a função retornada pelo Express. O server é uma *instância do express*

```javascript
server.use(express.json())
```
Para autorizar o uso de dados *.json* pelo epxress

```javascript
server.listen(3000);
```
Fará com que server (função importada através do express) ouça a porta 3000. Geralmente inserida no final do código *index.js*


## Nodemon e Sucrase
O nodemon serve para atualizar automaticamente a aplicação, quando for salva. Já o Sucrase é uma alternativa ao Babel mais voltada para  backend permitindo um desenvolvimento mais rápido.

Instalar a dependência apenas no ambiente de desenvolvimento:

```shell
$ yarn add nodemon sucrase -D
```

<hr/>

## Exemplo básico de rotas

```javascript
import { Router } from 'express';   // Importa as rotas do Express

const routes = new Router();        // Cria uma instância de rotas

routes.get('/', (req, res) => {
  return res.json({ message: 'Hello World '});
});

export default routes;              // Exporta as rotas usando o Sucrase
```

<hr/>

## Arquivo nodemon.json

```javascripton
{
  "execMap": {
    "js": "node -r sucrase/register"
  }
}
```

## Scripts do Nodemon


```javascripton
// ...
"scripts": {
  "dev": "nodemon src/server.js"
},
// ..
```
