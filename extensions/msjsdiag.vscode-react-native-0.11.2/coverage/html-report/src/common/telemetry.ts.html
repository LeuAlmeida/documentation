<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src\common\telemetry.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">src/common/</a> telemetry.ts
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">4.11% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>3/73</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/25</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/15</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">4.29% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>3/70</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">﻿// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root for details.
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>import * as crypto from "crypto";
<span class="cstat-no" title="statement not covered" ></span>import * as fs from "fs";
<span class="cstat-no" title="statement not covered" ></span>import * as path from "path";
<span class="cstat-no" title="statement not covered" ></span>import { HostPlatform } from "./hostPlatform";
&nbsp;
/**
 * Telemetry module specialized for vscode integration.
 */
<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ></span>export module Telemetry </span>{
    export let appName: string;
    export let <span class="cstat-no" title="statement not covered" ></span>isOptedIn: boolean = false;
    export let reporter: ITelemetryReporter;
    export let <span class="cstat-no" title="statement not covered" ></span>reporterDictionary: { [key: string]: ITelemetryReporter } = {};
&nbsp;
    export interface ITelemetryProperties {
        [propertyName: string]: any;
    }
&nbsp;
    export interface TelemetryRequest {
        extensionId: string;
        extensionVersion: string;
        appInsightsKey: string;
        eventName: string;
        properties: Telemetry.ITelemetryEventProperties;
        measures: Telemetry.ITelemetryEventMeasures;
    }
&nbsp;
    class TelemetryUtils {
        private static telemetrySettings: ITelemetrySettings;
        private static <span class="cstat-no" title="statement not covered" ></span>TELEMETRY_SETTINGS_FILENAME: string = "VSCodeTelemetrySettings.json";
&nbsp;
        private <span class="fstat-no" title="function not covered" >static get telemetrySettingsFile(</span>): string {
<span class="cstat-no" title="statement not covered" ></span>            let settingsHome = HostPlatform.getSettingsHome();
<span class="cstat-no" title="statement not covered" ></span>            return path.join(settingsHome, TelemetryUtils.TELEMETRY_SETTINGS_FILENAME);
        }
&nbsp;
        public <span class="fstat-no" title="function not covered" >static init(appVersion: string, reporterToUse: ITelemetryReporter)</span>: void {
<span class="cstat-no" title="statement not covered" ></span>            TelemetryUtils.loadSettings();
<span class="cstat-no" title="statement not covered" ></span>            Telemetry.reporter = reporterToUse;
<span class="cstat-no" title="statement not covered" ></span>            Telemetry.isOptedIn = TelemetryUtils.getTelemetryOptInSetting();
<span class="cstat-no" title="statement not covered" ></span>            TelemetryUtils.saveSettings();
        }
&nbsp;
        public <span class="fstat-no" title="function not covered" >static getTelemetryOptInSetting(</span>): boolean {
<span class="cstat-no" title="statement not covered" >            if (TelemetryUtils.telemetrySettings.optIn === undefined) {</span>
                // Opt-in by default
<span class="cstat-no" title="statement not covered" ></span>                TelemetryUtils.telemetrySettings.optIn = true;
            }
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>            return TelemetryUtils.telemetrySettings.optIn;
        }
&nbsp;
        /**
         * Load settings data from settingsHome/TelemetrySettings.json
         */
        private <span class="fstat-no" title="function not covered" >static loadSettings(</span>): ITelemetrySettings {
<span class="cstat-no" title="statement not covered" >            try {</span>
<span class="cstat-no" title="statement not covered" ></span>                TelemetryUtils.telemetrySettings = JSON.parse(&lt;any&gt;fs.readFileSync(TelemetryUtils.telemetrySettingsFile));
            } catch (e) {
                // if file does not exist or fails to parse then assume no settings are saved and start over
<span class="cstat-no" title="statement not covered" ></span>                TelemetryUtils.telemetrySettings = {};
            }
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>            return TelemetryUtils.telemetrySettings;
        }
&nbsp;
        /**
         * Save settings data in settingsHome/TelemetrySettings.json
         */
        private <span class="fstat-no" title="function not covered" >static saveSettings(</span>): void {
<span class="cstat-no" title="statement not covered" ></span>            let settingsHome = HostPlatform.getSettingsHome();
<span class="cstat-no" title="statement not covered" >            if (!fs.existsSync(settingsHome)) {</span>
<span class="cstat-no" title="statement not covered" ></span>                fs.mkdirSync(settingsHome);
            }
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>            fs.writeFileSync(TelemetryUtils.telemetrySettingsFile, JSON.stringify(TelemetryUtils.telemetrySettings));
        }
    }
&nbsp;
    /**
     * TelemetryEvent represents a basic telemetry data point
     */
    export class <span class="cstat-no" title="statement not covered" ></span>TelemetryEvent {
        public name: string;
        public properties: ITelemetryProperties;
        private static <span class="cstat-no" title="statement not covered" ></span>PII_HASH_KEY: string = "959069c9-9e93-4fa1-bf16-3f8120d7db0c";
&nbsp;
<span class="fstat-no" title="function not covered" >        constructor(name: string, properties?: ITelemetryProperties)</span> {
<span class="cstat-no" title="statement not covered" ></span>            this.name = name;
<span class="cstat-no" title="statement not covered" ></span>            this.properties = properties || {};
        }
&nbsp;
        public <span class="fstat-no" title="function not covered" >setPiiProperty(name: string, value: string)</span>: void {
<span class="cstat-no" title="statement not covered" ></span>            let hmac: crypto.Hmac = crypto.createHmac("sha256", new Buffer(TelemetryEvent.PII_HASH_KEY, "utf8"));
<span class="cstat-no" title="statement not covered" ></span>            let hashedValue: string = hmac.update(value).digest("hex");
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>            this.properties[name] = hashedValue;
        }
    }
&nbsp;
    /**
     * TelemetryActivity automatically includes timing data, used for scenarios where we want to track performance.
     * Calls to start() and end() are optional, if not called explicitly then the constructor will be the start and send will be the end.
     * This event will include a property called reserved.activity.duration which represents time in milliseconds.
     */
    export class <span class="cstat-no" title="statement not covered" ></span>TelemetryActivity extends TelemetryEvent {
        private startTime: [number, number];
        private endTime: [number, number];
&nbsp;
<span class="fstat-no" title="function not covered" >        constructor(name: string, properties?: ITelemetryProperties)</span> {
<span class="cstat-no" title="statement not covered" ></span>            super(name, properties);
<span class="cstat-no" title="statement not covered" ></span>            this.start();
        }
&nbsp;
        public <span class="fstat-no" title="function not covered" >start(</span>): void {
<span class="cstat-no" title="statement not covered" ></span>            this.startTime = process.hrtime();
        }
&nbsp;
        public <span class="fstat-no" title="function not covered" >end(</span>): void {
<span class="cstat-no" title="statement not covered" >            if (!this.endTime) {</span>
<span class="cstat-no" title="statement not covered" ></span>                this.endTime = process.hrtime(this.startTime);
&nbsp;
                // convert [seconds, nanoseconds] to milliseconds and include as property
<span class="cstat-no" title="statement not covered" ></span>                this.properties["reserved.activity.duration"] = this.endTime[0] * 1000 + this.endTime[1] / 1000000;
            }
        }
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    export function <span class="cstat-no" title="statement not covered" ></span>init(appNameValue: string, appVersion: string, reporterToUse: ITelemetryReporter)</span>: void {
<span class="cstat-no" title="statement not covered" >        try {</span>
<span class="cstat-no" title="statement not covered" ></span>            Telemetry.appName = appNameValue;
<span class="cstat-no" title="statement not covered" ></span>            TelemetryUtils.init(appVersion, reporterToUse);
        } catch (err) {
<span class="cstat-no" title="statement not covered" ></span>            console.error(err);
        }
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    export function <span class="cstat-no" title="statement not covered" ></span>send(event: TelemetryEvent, ignoreOptIn: boolean = false)</span>: void {
<span class="cstat-no" title="statement not covered" >        if (Telemetry.isOptedIn || ignoreOptIn) {</span>
<span class="cstat-no" title="statement not covered" >            try {</span>
<span class="cstat-no" title="statement not covered" >                if (event instanceof TelemetryActivity) {</span>
                    (&lt;TelemetryActivity&gt;<span class="cstat-no" title="statement not covered" ></span>event).end();
                }
&nbsp;
<span class="cstat-no" title="statement not covered" >                if (Telemetry.reporter) {</span>
<span class="cstat-no" title="statement not covered" ></span>                    let properties: ITelemetryEventProperties = {};
<span class="cstat-no" title="statement not covered" ></span>                    let measures: ITelemetryEventMeasures = {};
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>                    Object.keys(event.properties || {}).forEach(<span class="fstat-no" title="function not covered" >function (key: string)</span> {
<span class="cstat-no" title="statement not covered" ></span>                        switch (typeof event.properties[key]) {
                            case "string":
<span class="cstat-no" title="statement not covered" ></span>                                properties[key] = &lt;string&gt;event.properties[key];
<span class="cstat-no" title="statement not covered" ></span>                                break;
&nbsp;
                            case "number":
<span class="cstat-no" title="statement not covered" ></span>                                measures[key] = &lt;number&gt;event.properties[key];
<span class="cstat-no" title="statement not covered" ></span>                                break;
&nbsp;
                            default:
<span class="cstat-no" title="statement not covered" ></span>                                properties[key] = JSON.stringify(event.properties[key]);
<span class="cstat-no" title="statement not covered" ></span>                                break;
                        }
                    });
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>                    Telemetry.reporter.sendTelemetryEvent(event.name, properties, measures);
                }
&nbsp;
            } catch (err) {
<span class="cstat-no" title="statement not covered" ></span>                console.error(err);
            }
        }
    }
&nbsp;
    interface ITelemetrySettings {
        [settingKey: string]: any;
        userId?: string;
        machineId?: string;
        optIn?: boolean;
        userType?: string;
    }
&nbsp;
    export const <span class="cstat-no" title="statement not covered" >APPINSIGHTS_INSTRUMENTATIONKEY: string = "AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217"; // Matches vscode telemetry key</span>
&nbsp;
    export interface ITelemetryEventProperties {
        [key: string]: string;
    }
&nbsp;
    export interface ITelemetryEventMeasures {
        [key: string]: number;
    }
&nbsp;
    export interface ITelemetryReporter {
        sendTelemetryEvent(eventName: string, properties?: ITelemetryEventProperties, measures?: ITelemetryEventMeasures): void;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    export function <span class="cstat-no" title="statement not covered" ></span>sendExtensionTelemetry(extensionId: string, extensionVersion: string, appInsightsKey: string, eventName: string, properties: ITelemetryEventProperties, measures: ITelemetryEventMeasures)</span>: void {
<span class="cstat-no" title="statement not covered" ></span>        let extensionTelemetryReporter: ITelemetryReporter = Telemetry.reporterDictionary[extensionId];
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (!extensionTelemetryReporter) {</span>
<span class="cstat-no" title="statement not covered" ></span>            let TelemetryReporter = require("vscode-extension-telemetry").default;
<span class="cstat-no" title="statement not covered" ></span>            Telemetry.reporterDictionary[extensionId] = new TelemetryReporter(extensionId, extensionVersion, appInsightsKey);
<span class="cstat-no" title="statement not covered" ></span>            extensionTelemetryReporter = Telemetry.reporterDictionary[extensionId];
        }
&nbsp;
<span class="cstat-no" title="statement not covered" ></span>        extensionTelemetryReporter.sendTelemetryEvent(eventName, properties, measures);
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Sep 26 2019 09:04:01 GMT+0000 (Greenwich Mean Time)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
